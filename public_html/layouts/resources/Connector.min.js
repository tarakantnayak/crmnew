'use strict';

var _typeof = typeof Symbol === "function" && typeof Symbol.iterator === "symbol" ? function (obj) {
  return typeof obj;
} : function (obj) {
  return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj;
};

window.AppConnector={requestPjax:function requestPjax(params){return AppConnector._request(params,!0)},request:function request(params,rawData){return AppConnector._request(params,!1,rawData)},_request:function _request(params,pjaxMode,rawData){var aDeferred=jQuery.Deferred();'undefined'==typeof rawData&&(rawData=!1),'undefined'==typeof pjaxMode&&(pjaxMode=!1),'undefined'==typeof params&&(params={});var index,callerParams,fullUrl='';if('undefined'==typeof params.data||rawData){if('string'!=typeof params)callerParams=$.extend({},params);else if(callerParams=fullUrl=params,index=callerParams.indexOf('?'),-1!==index){var subStr=callerParams.substr(0,index+1);callerParams=callerParams.replace(subStr,'');}params={},params.data=callerParams;}if(('undefined'==typeof params.type||rawData)&&(params.type='POST'),('undefined'==typeof params.jsonp||rawData)&&(params.jsonp=!1),'undefined'==typeof params.dataType||rawData){var data=params.data;params.dataType='json',data.hasOwnProperty('view')?params.dataType='html':'string'==typeof data&&-1!==data.indexOf('&view=')&&(params.dataType='html'),'undefined'!=typeof params.url&&-1!==params.url.indexOf('&view=')&&(params.dataType='html');}if('undefined'!=typeof params.url&&-1!==params.url.indexOf('?')){fullUrl=params.url;var urlSplit=params.url.split('?'),queryString=urlSplit[1];params.url=urlSplit[0];var queryParameters=queryString.split('&');for(index=0;index<queryParameters.length;index++){var queryParam=queryParameters[index],queryParamComponents=queryParam.split('=');params.data[queryParamComponents[0]]=queryParamComponents[1];}}if(('undefined'==typeof params.url||0>=params.url.length)&&(params.url='index.php'),params.success=function(data){null!==data&&'object'===('undefined'==typeof data?'undefined':_typeof(data))&&data.error&&(app.errorLog(data.error),data.error.message&&Vtiger_Helper_Js.showMessage({text:data.error.message,type:'error'})),aDeferred.resolve(data);},params.error=function(jqXHR,textStatus,errorThrown){var action=jqXHR.getResponseHeader('yf-action');if('logout'===action&&(window.location.href='index.php'),CONFIG.debug)if(406===jqXHR.status){console.warn('%cYetiForce debug mode!!!','color: red; font-family: sans-serif; font-size: 1.5em; font-weight: bolder; text-shadow: #000 1px 1px;'),console.error('Error: '+errorThrown,'\n------------------------------------------------------------------------------------------------------------------------------------------------------\nTrace:\n------------------------------------------------------------------------------------------------------------------------------------------------------\n'+(jqXHR.responseJSON?jqXHR.responseJSON.error.trace:''),'\n------------------------------------------------------------------------------------------------------------------------------------------------------\nParams:\n------------------------------------------------------------------------------------------------------------------------------------------------------\n'+JSON.stringify(params,null,'\t'));}else app.errorLog(jqXHR,textStatus,errorThrown);aDeferred.reject(textStatus,errorThrown,jqXHR);},''===params.data)return app.showNotify({type:'error',title:app.vtranslate('JS_ERROR')}),aDeferred.reject();if(jQuery.ajax(params),pjaxMode&&('undefined'!=typeof params.data.historyUrl&&(fullUrl=params.data.historyUrl),''===fullUrl?fullUrl='index.php?'+$.param(params.data):-1===fullUrl.indexOf('index.php?')&&(fullUrl='index.php?'+fullUrl),history.pushState&&''!==fullUrl)){var currentHref=window.location.href;history.state||history.replaceState(currentHref,'title 1',currentHref),history.pushState(fullUrl,'title 2',fullUrl);}return aDeferred.promise()},requestForm:function requestForm(url){var params=1<arguments.length&&arguments[1]!==void 0?arguments[1]:{};app.openUrlMethodPost(url,params);}};
//# sourceMappingURL=Connector.min.js.map
