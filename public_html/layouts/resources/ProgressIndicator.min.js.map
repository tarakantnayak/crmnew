{"version":3,"file":"ProgressIndicator.min.js","sources":["ProgressIndicator.js"],"sourcesContent":["/*+***********************************************************************************\n * The contents of this file are subject to the vtiger CRM Public License Version 1.0\n * (\"License\"); You may not use this file except in compliance with the License\n * The Original Code is:  vtiger CRM Open Source\n * The Initial Developer of the Original Code is vtiger.\n * Portions created by vtiger are Copyright (C) vtiger.\n * All Rights Reserved.\n *************************************************************************************/\n'use strict';\n\n(function($) {\n\tvar ProgressIndicatorHelper = function() {\n\t\tvar thisInstance = this;\n\n\t\tthis.defaults = {\n\t\t\tposition: 'append',\n\t\t\tmode: 'show',\n\t\t\tblockInfo: {\n\t\t\t\telementToBlock: 'body'\n\t\t\t},\n\t\t\tmessage: ''\n\t\t};\n\n\t\tthis.imageContainerCss = {\n\t\t\t'text-align': 'center'\n\t\t};\n\n\t\tthis.blockOverlayCSS = {\n\t\t\topacity: '0.2'\n\t\t};\n\n\t\tthis.blockCss = {\n\t\t\tborder: '',\n\t\t\tbackgroundColor: '',\n\t\t\t'background-clip': 'border-box',\n\t\t\t'border-radius': '2px'\n\t\t};\n\n\t\tthis.showTopCSS = {\n\t\t\twidth: '25%',\n\t\t\tleft: '37.5%',\n\t\t\tposition: 'fixed',\n\t\t\ttop: '4.5%',\n\t\t\t'z-index': '100000'\n\t\t};\n\n\t\tthis.showOnTop = false;\n\n\t\tthis.init = function(element, options) {\n\t\t\tif (typeof options === 'undefined') {\n\t\t\t\toptions = {};\n\t\t\t}\n\n\t\t\tthisInstance.options = $.extend(true, this.defaults, options);\n\t\t\tthisInstance.container = element;\n\t\t\tthisInstance.position = options.position;\n\t\t\tif (typeof options.imageContainerCss !== 'undefined') {\n\t\t\t\tthisInstance.imageContainerCss = $.extend(true, this.imageContainerCss, options.imageContainerCss);\n\t\t\t}\n\t\t\tif (this.isBlockMode()) {\n\t\t\t\tthisInstance.elementToBlock = $(thisInstance.options.blockInfo.elementToBlock);\n\t\t\t}\n\t\t\treturn this;\n\t\t};\n\n\t\tthis.initActions = function() {\n\t\t\tif (this.options.mode == 'show') {\n\t\t\t\tthis.show();\n\t\t\t} else if (this.options.mode == 'hide') {\n\t\t\t\tthis.hide();\n\t\t\t}\n\t\t};\n\n\t\tthis.isPageBlockMode = function() {\n\t\t\tif (typeof this.elementToBlock !== 'undefined' && this.elementToBlock.is('body')) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t\treturn false;\n\t\t};\n\n\t\tthis.isBlockMode = function() {\n\t\t\tif (typeof this.options.blockInfo !== 'undefined' && this.options.blockInfo.enabled == true) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t\treturn false;\n\t\t};\n\n\t\tthis.show = function() {\n\t\t\tvar className = 'bigLoading';\n\t\t\tif (this.options.smallLoadingImage == true) {\n\t\t\t\tclassName = 'smallLoading';\n\t\t\t}\n\t\t\tif (this.isBlockMode()) {\n\t\t\t\tclassName = className + ' blockProgressContainer';\n\t\t\t}\n\t\t\tvar imageHtml =\n\t\t\t\t'<div class=\"imageHolder ' +\n\t\t\t\tclassName +\n\t\t\t\t'\">' +\n\t\t\t\t'<div class=\"sk-cube-grid\"><div class=\"sk-cube sk-cube1\"></div>' +\n\t\t\t\t'<div class=\"sk-cube sk-cube2\"></div>' +\n\t\t\t\t'<div class=\"sk-cube sk-cube3\"></div><div class=\"sk-cube sk-cube4\"></div><div class=\"sk-cube sk-cube5\"></div>' +\n\t\t\t\t'<div class=\"sk-cube sk-cube6\"></div><div class=\"sk-cube sk-cube7\"></div><div class=\"sk-cube sk-cube8\"></div>' +\n\t\t\t\t'<div class=\"sk-cube sk-cube9\"></div></div></div>';\n\t\t\tvar jQImageHtml = jQuery(imageHtml).css(this.imageContainerCss);\n\n\t\t\tvar jQMessage = thisInstance.options.message;\n\t\t\tif (jQMessage.length == 0) {\n\t\t\t\tjQMessage = app.vtranslate('JS_LOADING_PLEASE_WAIT');\n\t\t\t}\n\t\t\tif (!(jQMessage instanceof jQuery)) {\n\t\t\t\tjQMessage = jQuery('<span></span>').html(jQMessage);\n\t\t\t}\n\t\t\tvar messageContainer = jQuery('<div class=\"message\"></div>').append(jQMessage);\n\t\t\tjQImageHtml.append(messageContainer);\n\t\t\tif (this.isBlockMode()) {\n\t\t\t\tjQImageHtml.addClass('blockMessageContainer');\n\t\t\t}\n\n\t\t\tswitch (thisInstance.position) {\n\t\t\t\tcase 'prepend':\n\t\t\t\t\tthisInstance.container.prepend(jQImageHtml);\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'html':\n\t\t\t\t\tthisInstance.container.html(jQImageHtml);\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'replace':\n\t\t\t\t\tthisInstance.container.replaceWith(jQImageHtml);\n\t\t\t\t\tbreak;\n\t\t\t\tdefault:\n\t\t\t\t\tthisInstance.container.append(jQImageHtml);\n\t\t\t}\n\t\t\tif (this.isBlockMode()) {\n\t\t\t\tthisInstance.blockedElement = thisInstance.elementToBlock;\n\t\t\t\tif (thisInstance.isPageBlockMode()) {\n\t\t\t\t\t$.blockUI({\n\t\t\t\t\t\tmessage: thisInstance.container,\n\t\t\t\t\t\toverlayCSS: thisInstance.blockOverlayCSS,\n\t\t\t\t\t\tcss: thisInstance.blockCss,\n\t\t\t\t\t\tonBlock: thisInstance.options.blockInfo.onBlock\n\t\t\t\t\t});\n\t\t\t\t} else {\n\t\t\t\t\tthisInstance.elementToBlock.block({\n\t\t\t\t\t\tmessage: thisInstance.container,\n\t\t\t\t\t\toverlayCSS: thisInstance.blockOverlayCSS,\n\t\t\t\t\t\tcss: thisInstance.blockCss\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (thisInstance.showOnTop) {\n\t\t\t\tthis.container.css(this.showTopCSS).appendTo('body');\n\t\t\t}\n\t\t};\n\n\t\tthis.hide = function() {\n\t\t\t$('.imageHolder', this.container).remove();\n\t\t\tif (typeof this.blockedElement !== 'undefined') {\n\t\t\t\tif (this.isPageBlockMode()) {\n\t\t\t\t\t$.unblockUI();\n\t\t\t\t} else {\n\t\t\t\t\tthis.blockedElement.unblock();\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis.container.removeData('progressIndicator');\n\t\t};\n\t};\n\n\t$.fn.progressIndicator = function(options) {\n\t\tlet element = this;\n\t\tif (this.length <= 0) {\n\t\t\telement = jQuery('body');\n\t\t}\n\t\treturn element.each(function(index, element) {\n\t\t\tlet jQueryObject = $(element),\n\t\t\t\tprogressIndicatorInstance;\n\t\t\tif (typeof jQueryObject.data('progressIndicator') !== 'undefined') {\n\t\t\t\tprogressIndicatorInstance = jQueryObject.data('progressIndicator');\n\t\t\t} else {\n\t\t\t\tprogressIndicatorInstance = new ProgressIndicatorHelper();\n\t\t\t\tjQueryObject.data('progressIndicator', progressIndicatorInstance);\n\t\t\t}\n\t\t\tprogressIndicatorInstance.init(jQueryObject, options).initActions();\n\t\t});\n\t};\n\n\t$.progressIndicator = function(options) {\n\t\tvar progressImageContainer = jQuery('<div></div>');\n\t\tvar progressIndicatorInstance = new ProgressIndicatorHelper();\n\t\tprogressIndicatorInstance.init(progressImageContainer, options);\n\t\tif (!progressIndicatorInstance.isBlockMode()) {\n\t\t\tprogressIndicatorInstance.showOnTop = true;\n\t\t}\n\t\tprogressIndicatorInstance.initActions();\n\t\treturn progressImageContainer.data('progressIndicator', progressIndicatorInstance);\n\t};\n\n\t//Change the z-index of the block overlay value\n\t$.blockUI.defaults.baseZ = 10000;\n})(jQuery);\n"],"names":["$","defaults","position","mode","blockInfo","elementToBlock","message","imageContainerCss","blockOverlayCSS","opacity","blockCss","border","backgroundColor","showTopCSS","width","left","top","showOnTop","init","element","options","thisInstance","extend","container","isBlockMode","initActions","show","hide","isPageBlockMode","is","enabled","smallLoadingImage","className","jQImageHtml","jQuery","imageHtml","css","jQMessage","length","app","vtranslate","html","append","messageContainer","addClass","prepend","replaceWith","blockedElement","blockUI","overlayCSS","onBlock","block","appendTo","remove","unblockUI","unblock","removeData","fn","progressIndicator","each","index","jQueryObject","data","progressIndicatorInstance","progressImageContainer","baseZ"],"mappings":"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"}