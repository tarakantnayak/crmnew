{"version":3,"file":"CalendarView.min.js","sources":["CalendarView.js"],"sourcesContent":["/*+***********************************************************************************\n * The contents of this file are subject to the vtiger CRM Public License Version 1.0\n * (\"License\"); You may not use this file except in compliance with the License\n * The Original Code is:  vtiger CRM Open Source\n * The Initial Developer of the Original Code is vtiger.\n * Portions created by vtiger are Copyright (C) vtiger.\n * All Rights Reserved.\n *************************************************************************************/\n'use strict';\n\njQuery.Class(\"Calendar_CalendarView_Js\", {\n\tcurrentInstance: false,\n\tgetInstanceByView: function () {\n\t\tvar view = jQuery('#currentView').val();\n\t\tvar jsFileName = view + 'View';\n\t\tvar moduleClassName = view + \"_\" + jsFileName + \"_Js\";\n\t\tvar instance;\n\t\tif (typeof window[moduleClassName] !== \"undefined\") {\n\t\t\tinstance = new window[moduleClassName]();\n\t\t} else {\n\t\t\tinstance = new Calendar_CalendarView_Js();\n\t\t}\n\t\treturn instance;\n\t},\n\tregisterColorField: function (field, fieldClass) {\n\t\tvar params = {};\n\t\tparams.dropdownCss = {'z-index': 0};\n\t\tparams.formatSelection = function (object, container) {\n\t\t\tvar selectedId = object.id;\n\t\t\tvar selectedOptionTag = field.find('option[value=\"' + selectedId + '\"]');\n\t\t\tcontainer.addClass(fieldClass + '_' + selectedId);\n\t\t\tvar element = '<div>' + selectedOptionTag.text() + '</div>';\n\t\t\treturn element;\n\t\t};\n\t\tApp.Fields.Picklist.changeSelectElementView(field, 'select2', params);\n\t}\n}, {\n\tcalendarView: false,\n\tcalendarCreateView: false,\n\trenderCalendar: function () {\n\t\tvar thisInstance = this;\n\t\tvar eventLimit = app.getMainParams('eventLimit');\n\t\tif (eventLimit == 'true') {\n\t\t\teventLimit = true;\n\t\t} else if (eventLimit == 'false') {\n\t\t\teventLimit = false;\n\t\t} else {\n\t\t\teventLimit = parseInt(eventLimit) + 1;\n\t\t}\n\t\tvar weekView = app.getMainParams('weekView');\n\t\tvar dayView = app.getMainParams('dayView');\n\t\t//User preferred default view\n\t\tvar userDefaultActivityView = app.getMainParams('activity_view');\n\t\tif (userDefaultActivityView == 'Today') {\n\t\t\tuserDefaultActivityView = dayView;\n\t\t} else if (userDefaultActivityView == 'This Week') {\n\t\t\tuserDefaultActivityView = weekView;\n\t\t} else {\n\t\t\tuserDefaultActivityView = 'month';\n\t\t}\n\t\tvar defaultView = app.moduleCacheGet('defaultView');\n\t\tif (defaultView != null) {\n\t\t\tuserDefaultActivityView = defaultView;\n\t\t}\n\t\t//Default time format\n\t\tvar userDefaultTimeFormat = app.getMainParams('time_format');\n\t\tif (userDefaultTimeFormat == 24) {\n\t\t\tuserDefaultTimeFormat = 'H:mm';\n\t\t} else {\n\t\t\tuserDefaultTimeFormat = 'h:mmt';\n\t\t}\n\t\t//Default first day of the week\n\t\tvar convertedFirstDay = CONFIG.firstDayOfWeekNo;\n\t\t//Default first hour of the day\n\t\tvar defaultFirstHour = app.getMainParams('start_hour') + ':00';\n\t\tvar hiddenDays = [];\n\t\tif (app.getMainParams('switchingDays') == 'workDays') {\n\t\t\thiddenDays = app.getMainParams('hiddenDays', true);\n\t\t}\n\t\tvar options = {\n\t\t\theader: {\n\t\t\t\tleft: 'month,' + weekView + ',' + dayView,\n\t\t\t\tcenter: 'title today',\n\t\t\t\tright: 'prev,next'\n\t\t\t},\n\t\t\ttimeFormat: userDefaultTimeFormat,\n\t\t\taxisFormat: userDefaultTimeFormat,\n\t\t\tscrollTime: defaultFirstHour,\n\t\t\tfirstDay: convertedFirstDay,\n\t\t\tdefaultView: userDefaultActivityView,\n\t\t\teditable: true,\n\t\t\tslotMinutes: 15,\n\t\t\tdefaultEventMinutes: 0,\n\t\t\tforceEventDuration: true,\n\t\t\tdefaultTimedEventDuration: '01:00:00',\n\t\t\teventLimit: eventLimit,\n\t\t\tselectable: true,\n\t\t\tselectHelper: true,\n\t\t\thiddenDays: hiddenDays,\n\t\t\theight: app.setCalendarHeight(),\n\t\t\tviews: {\n\t\t\t\tbasic: {\n\t\t\t\t\teventLimit: false,\n\t\t\t\t}\n\t\t\t},\n\t\t\tselect: function (start, end) {\n\t\t\t\tthisInstance.selectDays(start, end);\n\t\t\t\tthisInstance.getCalendarView().fullCalendar('unselect');\n\t\t\t},\n\t\t\teventDrop: function (event, delta, revertFunc) {\n\t\t\t\tthisInstance.updateEvent(event, delta, revertFunc);\n\t\t\t},\n\t\t\teventResize: function (event, delta, revertFunc) {\n\t\t\t\tthisInstance.updateEvent(event, delta, revertFunc);\n\t\t\t},\n\t\t\teventRender: function (event, element) {\n\t\t\t\tlet valueEventVis = '';\n\t\t\t\tif (event.vis !== '') {\n\t\t\t\t\tvalueEventVis = app.vtranslate('JS_' + event.vis);\n\t\t\t\t}\n\t\t\t\tapp.showPopoverElementView(element.find('.fc-content'), {\n\t\t\t\t\ttitle: event.title + '<a href=\"index.php?module=' + event.module + '&view=Edit&record=' + event.id + '\" class=\"float-right\"><span class=\"fas fa-edit\"></span></a>' + '<a href=\"index.php?module=' + event.module + '&view=Detail&record=' + event.id + '\" class=\"float-right mx-1\"><span class=\"fas fa-th-list\"></span></a>',\n\t\t\t\t\tcontainer: 'body',\n\t\t\t\t\thtml: true,\n\t\t\t\t\tplacement: 'auto',\n\t\t\t\t\ttemplate: '<div class=\"popover calendarPopover\" role=\"tooltip\"><div class=\"arrow\"></div><h3 class=\"popover-header\"></h3><div class=\"popover-body\"></div></div>',\n\t\t\t\t\tcontent: '<div><span class=\"far fa-clock\"></span> <label>' + app.vtranslate('JS_START_DATE') + '</label>: ' + event.start_display + '</div>' +\n\t\t\t\t\t\t'<div><span class=\"far fa-clock\"></span> <label>' + app.vtranslate('JS_END_DATE') + '</label>: ' + event.end_display + '</div>' +\n\t\t\t\t\t\t(event.lok ? '<div><span class=\"fas fa-globe\"></span> <label>' + app.vtranslate('JS_LOCATION') + '</label>: ' + event.lok + '</div>' : '') +\n\t\t\t\t\t\t(event.pri ? '<div><span class=\"fas fa-exclamation-circle\"></span> <label>' + app.vtranslate('JS_PRIORITY') + '</label>: ' + app.vtranslate('JS_' + event.pri) + '</div>' : '') +\n\t\t\t\t\t\t'<div><span class=\"fas fa-question-circle\"></span> <label>' + app.vtranslate('JS_STATUS') + '</label>: ' + app.vtranslate('JS_' + event.sta) + '</div>' +\n\t\t\t\t\t\t(event.accname ? '<div><span class=\"userIcon-Accounts\" aria-hidden=\"true\"></span> <label>' + app.vtranslate('JS_ACCOUNTS') + '</label>: ' + event.accname + '</div>' : '') +\n\t\t\t\t\t\t(event.linkexl ? '<div><span class=\"userIcon-' + event.linkexm + '\" aria-hidden=\"true\"></span> <label>' + app.vtranslate('JS_RELATION_EXTEND') + '</label>: <a target=\"_blank\" href=\"index.php?module=' + event.linkexm + '&view=Detail&record=' + event.linkextend + '\">' + event.linkexl + '</a></div>' : '') +\n\t\t\t\t\t\t(event.linkl ? '<div><span class=\"userIcon-' + event.linkm + '\" aria-hidden=\"true\"></span> <label>' + app.vtranslate('JS_RELATION') + '</label>: <a target=\"_blank\" href=\"index.php?module=' + event.linkm + '&view=Detail&record=' + event.link + '\">' + event.linkl + '</a></div>' : '') +\n\t\t\t\t\t\t(event.procl ? '<div><span class=\"userIcon-' + event.procm + '\" aria-hidden=\"true\"></span> <label>' + app.vtranslate('JS_PROCESS') + '</label>: <a target=\"_blank\" href=\"index.php?module=' + event.procm + '&view=Detail&record=' + event.process + '\">' + event.procl + '</a></div>' : '') +\n\t\t\t\t\t\t(event.subprocl ? '<div><span class=\"userIcon-' + event.subprocm + '\" aria-hidden=\"true\"></span> <label>' + app.vtranslate('JS_SUB_PROCESS') + '</label>: <a target=\"_blank\" href=\"index.php?module=' + event.subprocm + '&view=Detail&record=' + event.subprocess + '\">' + event.subprocl + '</a></div>' : '') +\n\t\t\t\t\t\t(event.state ? '<div><span class=\"far fa-star\"></span> <label>' + app.vtranslate('JS_STATE') + '</label>: ' + app.vtranslate(event.state) + '</div>' : '') +\n\t\t\t\t\t\t'<div><span class=\"fas fa-eye\"></span> <label>' + app.vtranslate('JS_VISIBILITY') + '</label>: ' + valueEventVis + '</div>' +\n\t\t\t\t\t\t(event.smownerid ? '<div><span class=\"fas fa-user\"></span> <label>' + app.vtranslate('JS_ASSIGNED_TO') + '</label>: ' + event.smownerid + '</div>' : '')\n\t\t\t\t});\n\t\t\t},\n\t\t\teventClick: function (calEvent, jsEvent, view) {\n\t\t\t\tjsEvent.preventDefault();\n\t\t\t\tvar link = new URL($(this)[0].href);\n\t\t\t\tvar progressInstance = jQuery.progressIndicator({blockInfo: {enabled: true}});\n\t\t\t\tvar url = 'index.php?module=Calendar&view=ActivityStateModal&record=' + link.searchParams.get(\"record\");\n\t\t\t\tvar callbackFunction = function (data) {\n\t\t\t\t\tprogressInstance.progressIndicator({mode: 'hide'});\n\t\t\t\t};\n\t\t\t\tvar modalWindowParams = {\n\t\t\t\t\turl: url,\n\t\t\t\t\tcb: callbackFunction\n\t\t\t\t};\n\t\t\t\tapp.showModalWindow(modalWindowParams);\n\t\t\t},\n\t\t\tmonthNames: [app.vtranslate('JS_JANUARY'), app.vtranslate('JS_FEBRUARY'), app.vtranslate('JS_MARCH'),\n\t\t\t\tapp.vtranslate('JS_APRIL'), app.vtranslate('JS_MAY'), app.vtranslate('JS_JUNE'), app.vtranslate('JS_JULY'),\n\t\t\t\tapp.vtranslate('JS_AUGUST'), app.vtranslate('JS_SEPTEMBER'), app.vtranslate('JS_OCTOBER'),\n\t\t\t\tapp.vtranslate('JS_NOVEMBER'), app.vtranslate('JS_DECEMBER')],\n\t\t\tmonthNamesShort: [app.vtranslate('JS_JAN'), app.vtranslate('JS_FEB'), app.vtranslate('JS_MAR'),\n\t\t\t\tapp.vtranslate('JS_APR'), app.vtranslate('JS_MAY'), app.vtranslate('JS_JUN'), app.vtranslate('JS_JUL'),\n\t\t\t\tapp.vtranslate('JS_AUG'), app.vtranslate('JS_SEP'), app.vtranslate('JS_OCT'), app.vtranslate('JS_NOV'),\n\t\t\t\tapp.vtranslate('JS_DEC')],\n\t\t\tdayNames: [app.vtranslate('JS_SUNDAY'), app.vtranslate('JS_MONDAY'), app.vtranslate('JS_TUESDAY'),\n\t\t\t\tapp.vtranslate('JS_WEDNESDAY'), app.vtranslate('JS_THURSDAY'), app.vtranslate('JS_FRIDAY'),\n\t\t\t\tapp.vtranslate('JS_SATURDAY')],\n\t\t\tdayNamesShort: [app.vtranslate('JS_SUN'), app.vtranslate('JS_MON'), app.vtranslate('JS_TUE'),\n\t\t\t\tapp.vtranslate('JS_WED'), app.vtranslate('JS_THU'), app.vtranslate('JS_FRI'),\n\t\t\t\tapp.vtranslate('JS_SAT')],\n\t\t\tbuttonText: {\n\t\t\t\ttoday: app.vtranslate('JS_TODAY'),\n\t\t\t\tmonth: app.vtranslate('JS_MONTH'),\n\t\t\t\tweek: app.vtranslate('JS_WEEK'),\n\t\t\t\tday: app.vtranslate('JS_DAY')\n\t\t\t},\n\t\t\tallDayText: app.vtranslate('JS_ALL_DAY'),\n\t\t\teventLimitText: app.vtranslate('JS_MORE')\n\t\t};\n\n\t\tif (app.moduleCacheGet('start') != null) {\n\t\t\tvar s = moment(app.moduleCacheGet('start')).valueOf();\n\t\t\tvar e = moment(app.moduleCacheGet('end')).valueOf();\n\t\t\toptions.defaultDate = moment(moment(s + ((e - s) / 2)).format('YYYY-MM-DD'));\n\t\t}\n\n\t\tthisInstance.getCalendarView().fullCalendar('destroy');\n\t\tthisInstance.getCalendarView().fullCalendar(options);\n\t\tthisInstance.createAddSwitch();\n\t},\n\tgetValuesFromSelect2: function (element, data, text) {\n\t\tif (element.hasClass('select2-hidden-accessible')) {\n\t\t\tvar types = (element.select2('data'));\n\t\t\tfor (var i = 0; i < types.length; i++) {\n\t\t\t\tif (text) {\n\t\t\t\t\tdata.push(types[i].text);\n\t\t\t\t} else {\n\t\t\t\t\tdata.push(types[i].id);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn data;\n\t},\n\tregisterButtonSelectAll: function () {\n\t\tvar selectBtn = $('.selectAllBtn');\n\n\t\tselectBtn.on('click', function (e) {\n\t\t\tvar selectAllLabel = $(this).find('.selectAll');\n\t\t\tvar deselectAllLabel = $(this).find('.deselectAll');\n\n\t\t\tif (selectAllLabel.hasClass('d-none')) {\n\t\t\t\tselectAllLabel.removeClass('d-none');\n\t\t\t\tdeselectAllLabel.addClass('d-none');\n\t\t\t\t$(this).closest('.quickWidget').find('select option').prop(\"selected\", false);\n\t\t\t} else {\n\t\t\t\t$(this).closest('.quickWidget').find('select option').prop(\"selected\", true);\n\t\t\t\tdeselectAllLabel.removeClass('d-none');\n\t\t\t\tselectAllLabel.addClass('d-none');\n\t\t\t}\n\t\t\t$(this).closest('.quickWidget').find('select').trigger(\"change\");\n\t\t});\n\t},\n\tloadCalendarData: function (allEvents) {\n\t\tvar progressInstance = jQuery.progressIndicator({blockInfo: {enabled: true}});\n\t\tvar thisInstance = this;\n\t\tthisInstance.getCalendarView().fullCalendar('removeEvents');\n\t\tvar view = thisInstance.getCalendarView().fullCalendar('getView');\n\t\tvar types = [];\n\t\tvar formatDate = CONFIG.dateFormat.toUpperCase();\n\t\ttypes = thisInstance.getValuesFromSelect2($(\"#calendarActivityTypeList\"), types);\n\t\tif (types.length == 0) {\n\t\t\tallEvents = true;\n\t\t}\n\t\tvar user = [];\n\t\tuser = thisInstance.getValuesFromSelect2($(\"#calendarUserList\"), user);\n\t\tif (user.length == 0) {\n\t\t\tuser = [CONFIG.userId];\n\t\t}\n\t\tuser = thisInstance.getValuesFromSelect2($(\"#calendarGroupList\"), user);\n\t\tvar filters = [];\n\t\t$(\".calendarFilters .filterField\").each(function (index) {\n\t\t\tvar element = $(this);\n\t\t\tvar name, value;\n\t\t\tif (element.attr('type') == 'checkbox') {\n\t\t\t\tname = element.val();\n\t\t\t\tvalue = element.prop('checked') ? 1 : 0;\n\t\t\t} else {\n\t\t\t\tname = element.attr('name');\n\t\t\t\tvalue = element.val();\n\t\t\t}\n\t\t\tfilters.push({name: name, value: value});\n\t\t});\n\t\tif (allEvents == true || types.length > 0) {\n\t\t\tvar params = {\n\t\t\t\tmodule: 'Calendar',\n\t\t\t\taction: 'Calendar',\n\t\t\t\tmode: 'getEvents',\n\t\t\t\tstart: view.start.format(formatDate),\n\t\t\t\tend: view.end.format(formatDate),\n\t\t\t\tuser: user,\n\t\t\t\ttime: app.getMainParams('showType'),\n\t\t\t\ttypes: types,\n\t\t\t\tfilters: filters\n\t\t\t};\n\t\t\tAppConnector.request(params).done(function (events) {\n\t\t\t\tthisInstance.getCalendarView().fullCalendar('addEventSource', events.result);\n\t\t\t\tprogressInstance.progressIndicator({mode: 'hide'});\n\t\t\t});\n\t\t} else {\n\t\t\tthisInstance.getCalendarView().fullCalendar('removeEvents');\n\t\t\tprogressInstance.progressIndicator({mode: 'hide'});\n\t\t}\n\t},\n\tupdateEvent: function (event, delta, revertFunc) {\n\t\tvar progressInstance = jQuery.progressIndicator({blockInfo: {enabled: true}});\n\t\tvar start = event.start.format();\n\t\tvar params = {\n\t\t\tmodule: 'Calendar',\n\t\t\taction: 'Calendar',\n\t\t\tmode: 'updateEvent',\n\t\t\tid: event.id,\n\t\t\tstart: start,\n\t\t\tdelta: delta._data,\n\t\t\tallDay: event.allDay\n\t\t};\n\t\tAppConnector.request(params).done(function (response) {\n\t\t\tprogressInstance.progressIndicator({mode: 'hide'});\n\t\t\tif (!response['result']) {\n\t\t\t\tVtiger_Helper_Js.showPnotify(app.vtranslate('JS_NO_EDIT_PERMISSION'));\n\t\t\t\trevertFunc();\n\t\t\t}\n\t\t}).fail(function (error) {\n\t\t\tprogressInstance.progressIndicator({mode: 'hide'});\n\t\t\tVtiger_Helper_Js.showPnotify(app.vtranslate('JS_NO_EDIT_PERMISSION'));\n\t\t\trevertFunc();\n\t\t});\n\t},\n\tselectDays: function (startDate, endDate) {\n\t\tvar thisInstance = this;\n\t\tvar start_hour = $('#start_hour').val();\n\t\tvar end_hour = $('#end_hour').val();\n\t\tif (endDate.hasTime() == false) {\n\t\t\tendDate.add(-1, 'days');\n\t\t}\n\t\tstartDate = startDate.format();\n\t\tendDate = endDate.format();\n\t\tvar view = thisInstance.getCalendarView().fullCalendar('getView');\n\t\tif (start_hour == '') {\n\t\t\tstart_hour = '00';\n\t\t}\n\t\tif (end_hour == '') {\n\t\t\tend_hour = '00';\n\t\t}\n\t\tthis.getCalendarCreateView().done(function (data) {\n\t\t\tif (data.length <= 0) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif (view.name != 'agendaDay' && view.name != 'agendaWeek') {\n\t\t\t\tstartDate = startDate + 'T' + start_hour + ':00';\n\t\t\t\tendDate = endDate + 'T' + start_hour + ':00';\n\t\t\t\tif (startDate == endDate) {\n\t\t\t\t\tvar defaulDuration = 0;\n\t\t\t\t\tif (data.find('[name=\"activitytype\"]').val() == 'Call') {\n\t\t\t\t\t\tdefaulDuration = data.find('[name=\"defaultCallDuration\"]').val();\n\t\t\t\t\t} else {\n\t\t\t\t\t\tdefaulDuration = data.find('[name=\"defaultOtherEventDuration\"]').val();\n\t\t\t\t\t}\n\t\t\t\t\tendDate = moment(endDate).add(defaulDuration, 'minutes').toISOString();\n\t\t\t\t}\n\t\t\t}\n\t\t\tvar dateFormat = data.find('[name=\"date_start\"]').data('dateFormat').toUpperCase();\n\t\t\tvar timeFormat = data.find('[name=\"time_start\"]').data('format');\n\t\t\tif (timeFormat == 24) {\n\t\t\t\tvar defaultTimeFormat = 'HH:mm';\n\t\t\t} else {\n\t\t\t\tdefaultTimeFormat = 'hh:mm A';\n\t\t\t}\n\t\t\tvar startDateString = moment(startDate).format(dateFormat);\n\t\t\tvar startTimeString = moment(startDate).format(defaultTimeFormat);\n\t\t\tvar endDateString = moment(endDate).format(dateFormat);\n\t\t\tvar endTimeString = moment(endDate).format(defaultTimeFormat);\n\n\t\t\tdata.find('[name=\"date_start\"]').val(startDateString);\n\t\t\tdata.find('[name=\"due_date\"]').val(endDateString);\n\t\t\tdata.find('[name=\"time_start\"]').val(startTimeString);\n\t\t\tdata.find('[name=\"time_end\"]').val(endTimeString);\n\n\t\t\tvar headerInstance = new Vtiger_Header_Js();\n\t\t\theaderInstance.handleQuickCreateData(data, {\n\t\t\t\tcallbackFunction: function (data) {\n\t\t\t\t\tthisInstance.addCalendarEvent(data.result);\n\t\t\t\t}\n\t\t\t});\n\t\t\tjQuery('.modal-body').css({'max-height': app.getScreenHeight(70) + 'px', 'overflow-y': 'auto'});\n\t\t});\n\t},\n\taddCalendarEvent: function (calendarDetails) {\n\t\tconst thisInstance = this;\n\t\tlet usersList = $(\"#calendarUserList\").val();\n\t\tif (usersList.length === 0) {\n\t\t\tusersList = [CONFIG.userId.toString()];\n\t\t}\n\t\tlet groupList = $(\"#calendarGroupList\").val();\n\t\tif ($.inArray(calendarDetails.assigned_user_id.value, usersList) < 0 && ($.inArray(calendarDetails.assigned_user_id.value, groupList) < 0 || groupList.length === 0)) {\n\t\t\treturn;\n\t\t}\n\t\tlet types = thisInstance.getValuesFromSelect2($(\"#calendarActivityTypeList\"), []);\n\t\tif (types.length !== 0 && $.inArray(calendarDetails.activitytype.value, $(\"#calendarActivityTypeList\").val()) < 0) {\n\t\t\treturn;\n\t\t}\n\t\tvar state = $('.fc-toolbar .js-switch--label-on').last().hasClass('active');\n\t\tvar calendar = this.getCalendarView();\n\t\tvar taskstatus = $.inArray(calendarDetails.activitystatus.value, ['PLL_POSTPONED', 'PLL_CANCELLED', 'PLL_COMPLETED']);\n\t\tif (state === true && taskstatus >= 0 || state != true && taskstatus == -1) {\n\t\t\treturn false;\n\t\t}\n\t\tvar startDate = calendar.fullCalendar('moment', calendarDetails.date_start.value + ' ' + calendarDetails.time_start.value);\n\t\tvar endDate = calendar.fullCalendar('moment', calendarDetails.due_date.value + ' ' + calendarDetails.time_end.value);\n\t\tvar eventObject = {\n\t\t\tid: calendarDetails._recordId,\n\t\t\ttitle: calendarDetails.subject.display_value,\n\t\t\tstart: startDate.format(),\n\t\t\tend: endDate.format(),\n\t\t\turl: 'index.php?module=Calendar&view=Detail&record=' + calendarDetails._recordId,\n\t\t\tactivitytype: calendarDetails.activitytype.value,\n\t\t\tallDay: calendarDetails.allday.value == 'on',\n\t\t\tstate: calendarDetails.state.value,\n\t\t\tvis: calendarDetails.visibility.value,\n\t\t\tsta: calendarDetails.activitystatus.value,\n\t\t\tclassName: 'ownerCBg_' + calendarDetails.assigned_user_id.value + ' picklistCBr_Calendar_activitytype_' + calendarDetails.activitytype.value,\n\t\t\tstart_display: calendarDetails.date_start.display_value + ' ' + calendarDetails.time_start.display_value,\n\t\t\tend_display: calendarDetails.due_date.display_value + ' ' + calendarDetails.time_end.display_value,\n\t\t\tsmownerid: calendarDetails.assigned_user_id.display_value,\n\t\t\tpri: calendarDetails.taskpriority.value,\n\t\t\tlok: calendarDetails.location.display_value\n\t\t};\n\t\tthis.getCalendarView().fullCalendar('renderEvent', eventObject);\n\t},\n\tgetCalendarCreateView: function () {\n\t\tvar thisInstance = this;\n\t\tvar aDeferred = jQuery.Deferred();\n\n\t\tif (this.calendarCreateView !== false) {\n\t\t\taDeferred.resolve(this.calendarCreateView.clone(true, true));\n\t\t\treturn aDeferred.promise();\n\t\t}\n\t\tvar progressInstance = jQuery.progressIndicator({blockInfo: {enabled: true}});\n\t\tthis.loadCalendarCreateView().done(function (data) {\n\t\t\tprogressInstance.progressIndicator({mode: 'hide'});\n\t\t\tthisInstance.calendarCreateView = data;\n\t\t\taDeferred.resolve(data.clone(true, true));\n\t\t}).fail(function (error) {\n\t\t\tprogressInstance.progressIndicator({mode: 'hide'});\n\t\t\tconsole.error(error);\n\t\t});\n\t\treturn aDeferred.promise();\n\t},\n\tloadCalendarCreateView: function () {\n\t\tvar aDeferred = jQuery.Deferred();\n\t\tvar moduleName = app.getModuleName();\n\t\tvar url = 'index.php?module=' + moduleName + '&view=QuickCreateAjax';\n\t\tvar headerInstance = Vtiger_Header_Js.getInstance();\n\t\theaderInstance.getQuickCreateForm(url, moduleName).done(function (data) {\n\t\t\taDeferred.resolve(jQuery(data));\n\t\t}).fail(function () {\n\t\t\taDeferred.reject();\n\t\t});\n\t\treturn aDeferred.promise();\n\t},\n\tgetCalendarView: function () {\n\t\tif (this.calendarView == false) {\n\t\t\tthis.calendarView = jQuery('#calendarview');\n\t\t}\n\t\treturn this.calendarView;\n\t},\n\tregisterChangeView: function () {\n\t\tvar thisInstance = this;\n\t\tthisInstance.getCalendarView().find(\"button.fc-button\").on('click', function () {\n\t\t\tthisInstance.loadCalendarData();\n\t\t});\n\t},\n\tgoToRecordsList: function (link) {\n\t\tvar thisInstance = this;\n\t\tvar types = thisInstance.getValuesFromSelect2($(\"#calendarActivityTypeList\"), []);\n\t\tvar user = thisInstance.getValuesFromSelect2($(\"#calendarUserList\"), [], false);\n\t\tuser = thisInstance.getValuesFromSelect2($(\"#calendarGroupList\"), user, false);\n\t\tvar view = thisInstance.getCalendarView().fullCalendar('getView');\n\t\tvar start_date = view.start.format();\n\t\tvar end_date = view.end.format();\n\t\tvar status = app.getMainParams('activityStateLabels', true);\n\t\tvar searchParams = '[\"activitystatus\",\"e\",\"' + status[app.getMainParams('showType')].join() + '\"]';\n\t\tsearchParams += ',[\"date_start\",\"bw\",\"' + start_date + ',' + end_date + '\"]';\n\t\tif (types.length) {\n\t\t\tsearchParams += ',[\"activitytype\",\"e\",\"' + types + '\"]';\n\t\t}\n\t\tif (user.length) {\n\t\t\tsearchParams += ',[\"assigned_user_id\",\"e\",\"' + user + '\"]';\n\t\t}\n\t\t$(\".calendarFilters .filterField\").each(function () {\n\t\t\tvar type = $(this).attr('type');\n\t\t\tif (type == 'checkbox' && $(this).prop('checked')) {\n\t\t\t\tsearchParams += (searchParams != '' ? ',[' : '[') + $(this).data('search') + ']';\n\t\t\t}\n\n\t\t});\n\t\twindow.location.href = link + '&search_params=[[' + searchParams + ']]';\n\t},\n\tregisterAddButton: function () {\n\t\tconst self = this;\n\t\t$('.js-add').on('click', (e) => {\n\t\t\tself.getCalendarCreateView().done((data) => {\n\t\t\t\tconst headerInstance = new Vtiger_Header_Js();\n\t\t\t\theaderInstance.handleQuickCreateData(data, {\n\t\t\t\t\tcallbackFunction: (data) => {\n\t\t\t\t\t\tself.addCalendarEvent(data.result);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t});\n\t\t});\n\t},\n\tswitchTpl(on, off, state) {\n\t\treturn `<div class=\"btn-group btn-group-toggle js-switch\" data-toggle=\"buttons\">\n\t\t\t\t\t<label class=\"btn btn-outline-primary js-switch--label-on ${state ? '' : 'active'}\">\n\t\t\t\t\t\t<input type=\"radio\" name=\"options\" data-on-text=\"${on}\" autocomplete=\"off\" ${state ? '' : 'checked'}>\n\t\t\t\t\t\t${on}\n\t\t\t\t\t</label>\n\t\t\t\t\t<label class=\"btn btn-outline-primary ${state ? 'active' : ''}\">\n\t\t\t\t\t\t<input type=\"radio\" name=\"options\" data-off-text=\"${off}\" autocomplete=\"off\" ${state ? 'checked' : ''}>\n\t\t\t\t\t\t${off}\n\t\t\t\t\t</label>\n\t\t\t\t</div>`;\n\t},\n\tcreateAddSwitch() {\n\t\tconst calendarview = this.getCalendarView();\n\t\tlet switchHistory,\n\t\t\tswitchAllDays,\n\t\t\tswitchContainer = $(`<div class=\"js-calendar-switch-container\"></div>`).insertAfter(calendarview.find('.fc-center'));\n\t\tif (app.getMainParams('showType') == 'current' && app.moduleCacheGet('defaultShowType') != 'history') {\n\t\t\tswitchHistory = false;\n\t\t} else {\n\t\t\tswitchHistory = true;\n\t\t}\n\t\t$(this.switchTpl(app.vtranslate('JS_TO_REALIZE'), app.vtranslate('JS_HISTORY'), switchHistory))\n\t\t\t.prependTo(switchContainer)\n\t\t\t.on('change', 'input', (e) => {\n\t\t\t\tconst currentTarget = $(e.currentTarget);\n\t\t\t\tif (typeof currentTarget.data('on-text') !== 'undefined') {\n\t\t\t\t\tapp.setMainParams('showType', 'current');\n\t\t\t\t\tapp.moduleCacheSet('defaultShowType', 'current');\n\t\t\t\t} else if (typeof currentTarget.data('off-text') !== 'undefined') {\n\t\t\t\t\tapp.setMainParams('showType', 'history');\n\t\t\t\t\tapp.moduleCacheSet('defaultShowType', 'history');\n\t\t\t\t}\n\t\t\t\tthis.loadCalendarData();\n\t\t\t});\n\t\tif (app.getMainParams('switchingDays') === 'workDays' && app.moduleCacheGet('defaultSwitchingDays') !== 'all') {\n\t\t\tswitchAllDays = false;\n\t\t} else {\n\t\t\tswitchAllDays = true;\n\t\t}\n\t\tif (app.getMainParams('hiddenDays', true) !== false) {\n\t\t\t$(this.switchTpl(app.vtranslate('JS_WORK_DAYS'), app.vtranslate('JS_ALL'), switchAllDays))\n\t\t\t\t.prependTo(switchContainer)\n\t\t\t\t.on('change', 'input', (e) => {\n\t\t\t\t\tconst currentTarget = $(e.currentTarget);\n\t\t\t\t\tif (typeof currentTarget.data('on-text') !== 'undefined') {\n\t\t\t\t\t\tapp.setMainParams('switchingDays', 'workDays');\n\t\t\t\t\t\tapp.moduleCacheSet('defaultSwitchingDays', 'workDays');\n\t\t\t\t\t} else if (typeof currentTarget.data('off-text') !== 'undefined') {\n\t\t\t\t\t\tapp.setMainParams('switchingDays', 'all');\n\t\t\t\t\t\tapp.moduleCacheSet('defaultSwitchingDays', 'all');\n\t\t\t\t\t}\n\t\t\t\t\tthis.renderCalendar();\n\t\t\t\t\tthis.loadCalendarData();\n\t\t\t\t});\n\t\t}\n\t},\n\tregisterSelect2Event: function () {\n\t\tvar thisInstance = this;\n\t\t$('.siteBarRight .select2').each(function (index) {\n\t\t\tvar name = $(this).attr('id');\n\t\t\tvar value = app.moduleCacheGet(name);\n\t\t\tvar element = $('#' + name);\n\t\t\tif (element.length > 0 && value != null) {\n\t\t\t\tif (element.prop('tagName') == 'SELECT') {\n\t\t\t\t\telement.val(value);\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t\t$('.siteBarRight .select2, .siteBarRight .filterField').off('change');\n\t\tApp.Fields.Picklist.showSelect2ElementView($('#calendarUserList'));\n\t\tApp.Fields.Picklist.showSelect2ElementView($('#calendarActivityTypeList'));\n\t\tApp.Fields.Picklist.showSelect2ElementView($('#calendarGroupList'));\n\t\t$('.siteBarRight .select2, .siteBarRight .filterField').on('change', function () {\n\t\t\tvar element = $(this);\n\t\t\tvar value = element.val();\n\t\t\tif (value == null) {\n\t\t\t\tvalue = '';\n\t\t\t}\n\t\t\tthisInstance.loadCalendarData();\n\t\t\tif (element.attr('type') == 'checkbox') {\n\t\t\t\tvalue = element.is(':checked');\n\t\t\t}\n\t\t\tapp.moduleCacheSet(element.attr('id'), value);\n\t\t});\n\t},\n\tregisterCacheSettings: function () {\n\t\tvar thisInstance = this;\n\t\tvar calendar = thisInstance.getCalendarView();\n\t\tif (app.moduleCacheGet('defaultSwitchingDays') == 'all') {\n\t\t\tapp.setMainParams('switchingDays', 'all');\n\t\t} else {\n\t\t\tapp.setMainParams('switchingDays', 'workDays');\n\t\t}\n\t\tif (app.moduleCacheGet('defaultShowType') == 'history') {\n\t\t\tapp.setMainParams('showType', 'history');\n\t\t} else {\n\t\t\tapp.setMainParams('showType', 'current');\n\t\t}\n\t\t$('.siteBarRight .filterField').each(function (index) {\n\t\t\tvar name = $(this).attr('id');\n\t\t\tvar value = app.moduleCacheGet(name);\n\t\t\tvar element = $('#' + name);\n\t\t\tif (element.length > 0 && value != null) {\n\t\t\t\tif (element.attr('type') == 'checkbox') {\n\t\t\t\t\telement.prop(\"checked\", value);\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t\tcalendar.find('.fc-toolbar .fc-button').on('click', function (e) {\n\t\t\tvar defaultView, view, options;\n\t\t\tvar element = $(e.currentTarget);\n\t\t\tview = calendar.fullCalendar('getView');\n\t\t\toptions = view.options;\n\t\t\tif (element.hasClass('fc-' + view.name + '-button')) {\n\t\t\t\tapp.moduleCacheSet('defaultView', view.name);\n\t\t\t} else if (element.hasClass('fc-prev-button') || element.hasClass('fc-next-button') || element.hasClass('fc-today-button')) {\n\t\t\t\tapp.moduleCacheSet('start', view.start.format());\n\t\t\t\tapp.moduleCacheSet('end', view.end.format());\n\t\t\t}\n\t\t});\n\t\tvar keys = app.moduleCacheKeys();\n\t\tif (keys.length > 0) {\n\t\t\tvar alert = $('#moduleCacheAlert');\n\t\t\t$('.bodyContents').on('Vtiger.Widget.Load.undefined', function (e, data) {\n\t\t\t\talert.removeClass('d-none');\n\t\t\t});\n\t\t\talert.find('.cacheClear').on('click', function (e) {\n\t\t\t\tapp.moduleCacheClear();\n\t\t\t\talert.addClass('d-none');\n\t\t\t\tlocation.reload();\n\t\t\t});\n\t\t}\n\t},\n\tregisterLoadCalendarData: function () {\n\t\tvar thisInstance = this;\n\t\tvar widgets = $('.siteBarRight .widgetContainer').length;\n\t\t$('.bodyContents').on('Vtiger.Widget.Load.undefined', function (e, data) {\n\t\t\twidgets -= 1;\n\t\t\tif (widgets == 0) {\n\t\t\t\tthisInstance.loadCalendarData(true);\n\t\t\t}\n\t\t});\n\t},\n\tregisterEvents: function () {\n\t\tthis.registerCacheSettings();\n\t\tthis.renderCalendar();\n\t\tthis.registerAddButton();\n\t\tthis.registerLoadCalendarData();\n\t\tthis.registerButtonSelectAll();\n\t\tthis.registerChangeView();\n\t}\n});\njQuery(document).ready(function () {\n\tvar instance = Calendar_CalendarView_Js.getInstanceByView();\n\tinstance.registerEvents();\n\tCalendar_CalendarView_Js.currentInstance = instance;\n});\n"],"names":["jQuery","Class","currentInstance","getInstanceByView","view","val","moduleClassName","instance","registerColorField","field","fieldClass","params","dropdownCss","formatSelection","object","container","id","selectedOptionTag","find","selectedId","addClass","text","App","Fields","Picklist","changeSelectElementView","calendarView","calendarCreateView","renderCalendar","eventLimit","app","getMainParams","parseInt","dayView","userDefaultActivityView","weekView","moduleCacheGet","defaultView","userDefaultTimeFormat","CONFIG","firstDayOfWeekNo","defaultFirstHour","hiddenDays","header","left","center","right","timeFormat","axisFormat","scrollTime","firstDay","convertedFirstDay","editable","slotMinutes","defaultEventMinutes","forceEventDuration","defaultTimedEventDuration","selectable","selectHelper","height","setCalendarHeight","views","basic","select","start","end","thisInstance","selectDays","getCalendarView","fullCalendar","eventDrop","event","delta","revertFunc","updateEvent","eventResize","eventRender","element","vis","valueEventVis","vtranslate","showPopoverElementView","title","module","html","placement","template","content","start_display","end_display","lok","pri","sta","accname","linkexl","linkexm","linkextend","linkl","linkm","link","procl","procm","process","subprocl","subprocm","subprocess","state","smownerid","eventClick","calEvent","jsEvent","preventDefault","$","href","progressInstance","progressIndicator","blockInfo","enabled","url","searchParams","get","showModalWindow","cb","mode","monthNames","monthNamesShort","dayNames","dayNamesShort","buttonText","today","month","week","day","allDayText","eventLimitText","moment","valueOf","e","options","defaultDate","s","format","createAddSwitch","getValuesFromSelect2","data","hasClass","select2","i","types","length","push","registerButtonSelectAll","selectBtn","on","deselectAllLabel","selectAllLabel","removeClass","closest","prop","trigger","loadCalendarData","allEvents","formatDate","dateFormat","toUpperCase","user","userId","each","value","attr","name","filters","action","time","AppConnector","request","done","events","result","_data","allDay","response","Vtiger_Helper_Js","showPnotify","fail","startDate","endDate","start_hour","end_hour","hasTime","add","getCalendarCreateView","defaulDuration","toISOString","startTimeString","defaultTimeFormat","endDateString","endTimeString","startDateString","headerInstance","handleQuickCreateData","callbackFunction","addCalendarEvent","css","getScreenHeight","calendarDetails","usersList","toString","inArray","assigned_user_id","groupList","activitytype","last","calendar","taskstatus","activitystatus","date_start","time_start","due_date","time_end","eventObject","_recordId","subject","display_value","allday","visibility","className","taskpriority","location","aDeferred","Deferred","resolve","clone","promise","loadCalendarCreateView","error","console","moduleName","getModuleName","Vtiger_Header_Js","getInstance","getQuickCreateForm","reject","registerChangeView","goToRecordsList","start_date","end_date","status","join","window","registerAddButton","self","switchTpl","off","calendarview","switchHistory","switchAllDays","switchContainer","insertAfter","prependTo","currentTarget","setMainParams","moduleCacheSet","registerSelect2Event","showSelect2ElementView","is","registerCacheSettings","moduleCacheKeys","alert","moduleCacheClear","reload","registerLoadCalendarData","widgets","registerEvents","document","ready","Calendar_CalendarView_Js"],"mappings":"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"}