{"version":3,"file":"Map.min.js","sources":["Map.js"],"sourcesContent":["/* {[The file is published on the basis of YetiForce Public License 3.0 that can be found in the following directory: licenses/LicenseEN.txt or yetiforce.com]} */\n'use strict';\n\njQuery.Class(\"OpenStreetMap_Map_Js\", {}, {\n\tcontainer: false,\n\tmapInstance: false,\n\tselectedParams: false,\n\tlayerMarkers: false,\n\tmarkers: false,\n\tcacheMarkers: [],\n\tpolygonLayer: false,\n\trouteLayer: false,\n\trecordsIds: '',\n\tcacheLayerMarkers: {},\n\tindirectPointLayer: {},\n\tsetSelectedParams: function (params) {\n\t\tdelete params['view'];\n\t\tthis.selectedParams = params;\n\t},\n\tregisterMap: function (startCoordinate, startZoom) {\n\t\tvar myMap = L.map('mapid').setView(startCoordinate, startZoom);\n\t\tL.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {\n\t\t\tmaxZoom: 19,\n\t\t\tattribution: '&copy; <a href=\"https://www.openstreetmap.org/copyright\" rel=\"noreferrer noopener\">OpenStreetMap</a>'\n\n\t\t}).addTo(myMap);\n\t\tthis.mapInstance = myMap;\n\t\treturn myMap;\n\t},\n\tsetMarkersByResponse: function (response) {\n\t\tvar thisInstance = this;\n\t\tvar markerArray = [];\n\t\tvar container = this.container;\n\t\tvar map = this.mapInstance;\n\t\tif (typeof response.result.coordinates !== \"undefined\") {\n\t\t\tvar markers = L.markerClusterGroup({\n\t\t\t\tmaxClusterRadius: 10\n\t\t\t});\n\t\t\tvar coordinates = response.result.coordinates;\n\t\t\tif (typeof this.layerMarkers !== 'boolean') {\n\t\t\t\tmap.removeLayer(this.layerMarkers);\n\t\t\t}\n\t\t\tvar records = [];\n\t\t\tcoordinates.forEach(function (e) {\n\t\t\t\tmarkerArray.push([e.lat, e.lon]);\n\t\t\t\tvar marker = L.marker([e.lat, e.lon], {\n\t\t\t\t\ticon: L.AwesomeMarkers.icon({\n\t\t\t\t\t\ticon: 'home',\n\t\t\t\t\t\tmarkerColor: 'blue',\n\t\t\t\t\t\tprefix: 'fa',\n\t\t\t\t\t\ticonColor: e.color\n\t\t\t\t\t})\n\t\t\t\t}).bindPopup(e.label);\n\t\t\t\tmarkers.addLayer(marker);\n\t\t\t\trecords.push(e.recordId);\n\t\t\t});\n\t\t\tthis.recordsIds = records;\n\t\t\tthis.markers = coordinates;\n\t\t\tthis.layerMarkers = markers;\n\t\t\tmap.addLayer(markers);\n\t\t}\n\t\tif (typeof this.polygonLayer !== 'boolean') {\n\t\t\tmap.removeLayer(this.polygonLayer);\n\t\t}\n\t\tif (typeof response.result.coordinatesCeneter !== \"undefined\") {\n\t\t\tif (typeof response.result.coordinatesCeneter.error === \"undefined\") {\n\t\t\t\tvar radius = container.find('.js-radius').val();\n\t\t\t\tmarkerArray.push([response.result.coordinatesCeneter.lat, response.result.coordinatesCeneter.lon]);\n\t\t\t\tvar popup = '<span class=\"description\">' + container.find('.searchValue').val() + '</span><br /><input type=hidden class=\"coordinates\" data-lon=\"' + response.result.coordinatesCeneter.lon + '\" data-lat=\"' + response.result.coordinatesCeneter.lat + '\">';\n\t\t\t\tpopup += '<button class=\"btn btn-success btn-sm p-1 startTrack mr-2\"><span class=\"fas  fa-truck\"></span></button>';\n\t\t\t\tpopup += '<button class=\"btn btn-danger btn-sm p-1 endTrack\"><span class=\"fas fa-flag-checkered\"></span></button>';\n\t\t\t\tvar marker = L.marker([response.result.coordinatesCeneter.lat, response.result.coordinatesCeneter.lon], {\n\t\t\t\t\ticon: L.AwesomeMarkers.icon({\n\t\t\t\t\t\ticon: 'search',\n\t\t\t\t\t\tmarkerColor: 'red',\n\t\t\t\t\t\tprefix: 'fa',\n\t\t\t\t\t})\n\t\t\t\t}).bindPopup(popup);\n\t\t\t\tmap.addLayer(marker);\n\t\t\t\tif ($.isNumeric(radius)) {\n\t\t\t\t\tradius = parseInt(radius) * 1000;\n\t\t\t\t\tvar circle = L.circle([response.result.coordinatesCeneter.lat, response.result.coordinatesCeneter.lon], radius, {\n\t\t\t\t\t\tcolor: 'red',\n\t\t\t\t\t\tfillColor: '#f03',\n\t\t\t\t\t\tfillOpacity: 0.05\n\t\t\t\t\t});\n\t\t\t\t\tthis.polygonLayer = L.featureGroup([circle]);\n\t\t\t\t\tmap.addLayer(this.polygonLayer);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tvar params = {\n\t\t\t\t\ttitle: app.vtranslate('JS_LBL_PERMISSION'),\n\t\t\t\t\ttext: response.result.coordinatesCeneter.error,\n\t\t\t\t\ttype: 'error',\n\t\t\t\t};\n\t\t\t\tVtiger_Helper_Js.showMessage(params);\n\t\t\t}\n\t\t}\n\t\tif (typeof response.result.cache !== \"undefined\") {\n\t\t\tvar cache = response.result.cache;\n\t\t\tObject.keys(cache).forEach(function (key) {\n\t\t\t\tif (typeof thisInstance.cacheLayerMarkers[key] !== \"undefined\") {\n\t\t\t\t\tmap.removeLayer(thisInstance.cacheLayerMarkers[key]);\n\t\t\t\t}\n\t\t\t\tvar markersCache = L.markerClusterGroup({\n\t\t\t\t\tmaxClusterRadius: 10\n\t\t\t\t});\n\t\t\t\tcoordinates = cache[key];\n\t\t\t\tcoordinates.forEach(function (e) {\n\t\t\t\t\tif (thisInstance.recordsIds.indexOf(e.recordId) === -1) {\n\t\t\t\t\t\tmarkerArray.push([e.lat, e.lon]);\n\t\t\t\t\t\tvar marker = L.marker([e.lat, e.lon], {\n\t\t\t\t\t\t\ticon: L.AwesomeMarkers.icon({\n\t\t\t\t\t\t\t\ticon: 'home',\n\t\t\t\t\t\t\t\tmarkerColor: 'orange',\n\t\t\t\t\t\t\t\tprefix: 'fa',\n\t\t\t\t\t\t\t\ticonColor: e.color\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t}).bindPopup(e.label);\n\t\t\t\t\t\tmarkersCache.addLayer(marker);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\tthisInstance.cacheMarkers[key] = coordinates;\n\t\t\t\tmap.addLayer(markersCache);\n\t\t\t\tthisInstance.cacheLayerMarkers[key] = markersCache;\n\t\t\t});\n\t\t}\n\n\t\tvar footer = this.container.find('.modal-footer');\n\t\tif (typeof response.result.legend !== \"undefined\") {\n\t\t\tvar html = '';\n\t\t\tvar legend = response.result.legend;\n\t\t\tlegend.forEach(function (e) {\n\t\t\t\thtml += '<div class=\"pull-left\"><span class=\"leegendIcon\" style=\"background:' + e.color + '\"></span> ' + e.value + '</div>';\n\t\t\t});\n\t\t\tfooter.html(html);\n\t\t} else {\n\t\t\tfooter.html('');\n\t\t}\n\t\tif (markerArray.length)\n\t\t\tmap.fitBounds(markerArray);\n\t\tthis.container.find('.groupNeighbours').prop('checked', true);\n\t},\n\tshowCalculateBtn: function () {\n\t\tvar container = this.container;\n\t\tvar endAddress = container.find('.end').val();\n\t\tvar startAddress = container.find('.start').val();\n\t\tif (endAddress.length > 0 && startAddress.length > 0) {\n\t\t\tcontainer.find('.calculateTrack').removeClass('d-none');\n\t\t}\n\t},\n\tregisterCacheEvents: function (container) {\n\t\tvar thisInstance = this;\n\t\tcontainer.find('.showRecordsFromCache').on('change', function (e) {\n\t\t\tvar currentTarget = $(e.currentTarget);\n\t\t\tvar moduleName = currentTarget.data('module');\n\t\t\tif (currentTarget.is(':checked')) {\n\t\t\t\tvar params = {\n\t\t\t\t\tmodule: 'OpenStreetMap',\n\t\t\t\t\taction: 'GetMarkers',\n\t\t\t\t\tsrcModule: app.getModuleName(),\n\t\t\t\t\tcache: [moduleName],\n\t\t\t\t};\n\t\t\t\tAppConnector.request(params).done(function (response) {\n\t\t\t\t\tthisInstance.setMarkersByResponse(response);\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tthisInstance.mapInstance.removeLayer(thisInstance.cacheLayerMarkers[moduleName]);\n\t\t\t}\n\n\t\t});\n\t\tcontainer.find('.copyToClipboard').on('click', function () {\n\t\t\tvar params = {\n\t\t\t\tmodule: 'OpenStreetMap',\n\t\t\t\taction: 'ClipBoard',\n\t\t\t\tmode: 'save',\n\t\t\t\trecordIds: JSON.stringify(thisInstance.recordsIds),\n\t\t\t\tsrcModule: app.getModuleName()\n\t\t\t};\n\t\t\tAppConnector.request(params).done(function (response) {\n\t\t\t\tVtiger_Helper_Js.showMessage({\n\t\t\t\t\ttext: app.vtranslate('JS_NOTIFY_COPY_TEXT'),\n\t\t\t\t\ttype: 'success',\n\t\t\t\t});\n\t\t\t\tvar countRecords = container.find('.countRecords' + app.getModuleName());\n\t\t\t\tcountRecords.html(response.result);\n\t\t\t\tcountRecords.closest('.cacheModuleContainer').find('.deleteClipBoard').removeClass('d-none');\n\t\t\t});\n\t\t});\n\t\tcontainer.find('.deleteClipBoard').on('click', function (e) {\n\t\t\tvar currentTarget = $(e.currentTarget);\n\t\t\tvar moduleName = currentTarget.data('module');\n\t\t\tvar params = {\n\t\t\t\tmodule: 'OpenStreetMap',\n\t\t\t\taction: 'ClipBoard',\n\t\t\t\tmode: 'delete',\n\t\t\t\tsrcModule: moduleName\n\t\t\t};\n\t\t\tAppConnector.request(params).done(function (response) {\n\t\t\t\tVtiger_Helper_Js.showMessage({\n\t\t\t\t\ttitle: app.vtranslate('JS_LBL_PERMISSION'),\n\t\t\t\t\ttext: app.vtranslate('JS_SAVE_NOTIFY_OK'),\n\t\t\t\t\ttype: 'success',\n\t\t\t\t});\n\t\t\t\tvar countRecords = container.find('.countRecords' + moduleName);\n\t\t\t\tcountRecords.html('');\n\t\t\t\tcurrentTarget.addClass('d-none');\n\t\t\t\tcountRecords.closest('.cacheModuleContainer').find('.showRecordsFromCache').prop('checked', false);\n\t\t\t\tcountRecords.closest('.cacheModuleContainer').find('.showRecordsFromCache').trigger('change');\n\t\t\t});\n\t\t});\n\t\tcontainer.find('.addAllRecords').on('click', function (e) {\n\t\t\tvar currentTarget = $(e.currentTarget);\n\t\t\tvar moduleName = currentTarget.data('module');\n\t\t\tvar params = {\n\t\t\t\tmodule: 'OpenStreetMap',\n\t\t\t\taction: 'ClipBoard',\n\t\t\t\tmode: 'addAllRecords',\n\t\t\t\tsrcModule: moduleName\n\t\t\t};\n\t\t\tAppConnector.request(params).done(function (response) {\n\t\t\t\tVtiger_Helper_Js.showMessage({\n\t\t\t\t\ttext: app.vtranslate('JS_MESSAGE_DOWNLOADED_ADDRESS_DATA'),\n\t\t\t\t\ttype: 'success',\n\t\t\t\t});\n\t\t\t\tcontainer.find('.countRecords' + moduleName).html(response.result.count);\n\t\t\t\tvar moduleContainer = currentTarget.closest('.cacheModuleContainer');\n\t\t\t\tmoduleContainer.find('.showRecordsFromCache').prop('checked', true);\n\t\t\t\tmoduleContainer.find('.showRecordsFromCache').trigger('change');\n\t\t\t\tif (response.result.count != '0')\n\t\t\t\t\tmoduleContainer.find('.deleteClipBoard').removeClass('d-none');\n\t\t\t});\n\t\t});\n\t},\n\tgetCacheParamsToRequest: function () {\n\t\tvar container = this.container;\n\t\tvar params = [];\n\t\tcontainer.find('.showRecordsFromCache').each(function () {\n\t\t\tvar currentObject = $(this);\n\t\t\tif (currentObject.is(':checked'))\n\t\t\t\tparams.push(currentObject.data('module'));\n\t\t});\n\t\treturn params;\n\t},\n\tregisterSearchCompany: function () {\n\t\tvar container = this.container;\n\t\tvar searchValue = container.find('.searchCompany');\n\t\tvar searchModule = container.find('.searchModule');\n\t\tvar addButton = container.find('.addRecord');\n\t\tvar thistInstance = this;\n\t\taddButton.on('click', function () {\n\t\t\tvar map = thistInstance.mapInstance;\n\t\t\tvar markers = thistInstance.layerMarkers;\n\t\t\tvar crmId = addButton.data('crmId');\n\t\t\tif (crmId == '')\n\t\t\t\treturn false;\n\t\t\tAppConnector.request({\n\t\t\t\tmodule: 'OpenStreetMap',\n\t\t\t\taction: 'ClipBoard',\n\t\t\t\tmode: 'addRecord',\n\t\t\t\trecord: crmId,\n\t\t\t\tsrcModuleName: searchModule.val()\n\t\t\t}).done(function (response) {\n\t\t\t\taddButton.data('crmId', '');\n\t\t\t\tif (response.result.length == 1) {\n\t\t\t\t\tvar marker = L.marker([response.result[0].lat, response.result[0].lon], {\n\t\t\t\t\t\ticon: L.AwesomeMarkers.icon({\n\t\t\t\t\t\t\ticon: 'home',\n\t\t\t\t\t\t\tmarkerColor: 'cadetblue',\n\t\t\t\t\t\t\tprefix: 'fa',\n\t\t\t\t\t\t\ticonColor: response.result[0].color\n\t\t\t\t\t\t})\n\t\t\t\t\t}).bindPopup(response.result[0].label);\n\t\t\t\t\tmarkers.addLayer(marker);\n\t\t\t\t\tmap.addLayer(markers);\n\t\t\t\t\tmap.setView(new L.LatLng(response.result[0].lat, response.result[0].lon), 14);\n\t\t\t\t} else {\n\t\t\t\t\tVtiger_Helper_Js.showMessage({\n\t\t\t\t\t\ttitle: app.vtranslate('JS_LBL_PERMISSION'),\n\t\t\t\t\t\ttext: response.result,\n\t\t\t\t\t\ttype: 'error',\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\tsearchValue.val('');\n\t\t\t});\n\t\t});\n\t\t$.widget(\"custom.ivAutocomplete\", $.ui.autocomplete, {\n\t\t\t_create: function () {\n\t\t\t\tthis._super();\n\t\t\t\tthis.widget().menu(\"option\", \"items\", \"> :not(.ui-autocomplete-category)\");\n\t\t\t},\n\t\t\t_renderMenu: function (ul, items) {\n\t\t\t\tvar that = this, currentCategory = \"\";\n\t\t\t\t$.each(items, function (index, item) {\n\t\t\t\t\tvar li;\n\t\t\t\t\tif (item.category != currentCategory) {\n\t\t\t\t\t\tul.append(\"<li class='ui-autocomplete-category'>\" + item.category + \"</li>\");\n\t\t\t\t\t\tcurrentCategory = item.category;\n\t\t\t\t\t}\n\t\t\t\t\tthat._renderItemData(ul, item);\n\t\t\t\t});\n\t\t\t},\n\t\t\t_renderItemData: function (ul, item) {\n\t\t\t\treturn this._renderItem(ul, item).data(\"ui-autocomplete-item\", item);\n\t\t\t},\n\t\t\t_renderItem: function (ul, item) {\n\t\t\t\treturn $(\"<li>\")\n\t\t\t\t\t.data(\"item.autocomplete\", item)\n\t\t\t\t\t.append($(\"<a></a>\").html(item.label))\n\t\t\t\t\t.appendTo(ul);\n\t\t\t},\n\t\t});\n\t\tsearchValue.ivAutocomplete({\n\t\t\tdelay: '600',\n\t\t\tminLength: '3',\n\t\t\tsource: function (request, response) {\n\t\t\t\tAppConnector.request({\n\t\t\t\t\tmodule: searchModule.val(),\n\t\t\t\t\tcurentModule: app.getModuleName(),\n\t\t\t\t\tsearchModule: searchModule.val(),\n\t\t\t\t\tview: 'BasicAjax',\n\t\t\t\t\tmode: 'showSearchResults',\n\t\t\t\t\tvalue: searchValue.val(),\n\t\t\t\t\thtml: false,\n\t\t\t\t}).done(function (responseAjax) {\n\t\t\t\t\tresponseAjax = JSON.parse(responseAjax);\n\t\t\t\t\tvar reponseDataList = responseAjax.result;\n\t\t\t\t\tif (reponseDataList.length <= 0) {\n\t\t\t\t\t\treponseDataList.push({\n\t\t\t\t\t\t\tlabel: app.vtranslate('JS_NO_RESULTS_FOUND'),\n\t\t\t\t\t\t\ttype: 'no results',\n\t\t\t\t\t\t\tcategory: ''\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t\tresponse(reponseDataList);\n\t\t\t\t});\n\t\t\t},\n\t\t\tselect: function (event, ui) {\n\t\t\t\tvar selected = ui.item;\n\t\t\t\taddButton.data('crmId', selected.id);\n\t\t\t},\n\t\t\tclose: function (event, ui) {\n\n\t\t\t}\n\n\t\t});\n\t},\n\tregisterBasicModal: function () {\n\t\tvar thisInstance = this;\n\t\tvar container = this.container;\n\t\tvar map = thisInstance.mapInstance;\n\t\tvar layer, description;\n\t\tthisInstance.registerCacheEvents(container);\n\t\tcontainer.find('.groupBy').on('click', function () {\n\t\t\tvar progressIndicatorElement = jQuery.progressIndicator({\n\t\t\t\t'position': container,\n\t\t\t\t'blockInfo': {\n\t\t\t\t\t'enabled': true\n\t\t\t\t}\n\t\t\t});\n\t\t\tvar params = {\n\t\t\t\tmodule: 'OpenStreetMap',\n\t\t\t\taction: 'GetMarkers',\n\t\t\t\tsrcModule: app.getModuleName(),\n\t\t\t\tgroupBy: container.find('.fieldsToGroup').val(),\n\t\t\t\tsearchValue: container.find('.searchValue').val(),\n\t\t\t\tradius: container.find('.js-radius').val(),\n\t\t\t\tcache: thisInstance.getCacheParamsToRequest(),\n\t\t\t};\n\t\t\tparams = $.extend(thisInstance.selectedParams, params);\n\t\t\tAppConnector.request(params).done(function (response) {\n\t\t\t\tprogressIndicatorElement.progressIndicator({'mode': 'hide'});\n\t\t\t\tthisInstance.setMarkersByResponse(response);\n\t\t\t});\n\t\t});\n\t\tcontainer.find('.groupNeighbours').on('change', function (e) {\n\t\t\tvar currentTarget = $(e.currentTarget);\n\t\t\tmap.removeLayer(thisInstance.layerMarkers);\n\t\t\tvar markers = thisInstance.markers;\n\t\t\tif (currentTarget.is(':checked')) {\n\t\t\t\tlayer = L.markerClusterGroup({\n\t\t\t\t\tmaxClusterRadius: 10\n\t\t\t\t});\n\t\t\t\tmarkers.forEach(function (e) {\n\t\t\t\t\tvar marker = L.marker([e.lat, e.lon], {\n\t\t\t\t\t\ticon: L.AwesomeMarkers.icon({\n\t\t\t\t\t\t\ticon: 'home',\n\t\t\t\t\t\t\tmarkerColor: 'blue',\n\t\t\t\t\t\t\tprefix: 'fa',\n\t\t\t\t\t\t\ticonColor: e.color\n\t\t\t\t\t\t})\n\t\t\t\t\t}).bindPopup(e.label);\n\t\t\t\t\tlayer.addLayer(marker);\n\t\t\t\t});\n\n\t\t\t\tObject.keys(thisInstance.cacheLayerMarkers).forEach(function (key) {\n\t\t\t\t\tmap.removeLayer(thisInstance.cacheLayerMarkers[key]);\n\t\t\t\t\tvar cacheLayer = L.markerClusterGroup({\n\t\t\t\t\t\tmaxClusterRadius: 10\n\t\t\t\t\t});\n\t\t\t\t\tthisInstance.cacheMarkers[key].forEach(function (e) {\n\t\t\t\t\t\tvar marker = L.marker([e.lat, e.lon], {\n\t\t\t\t\t\t\ticon: L.AwesomeMarkers.icon({\n\t\t\t\t\t\t\t\ticon: 'home',\n\t\t\t\t\t\t\t\tmarkerColor: 'orange',\n\t\t\t\t\t\t\t\tprefix: 'fa',\n\t\t\t\t\t\t\t\ticonColor: e.color\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t}).bindPopup(e.label);\n\t\t\t\t\t\tcacheLayer.addLayer(marker);\n\t\t\t\t\t});\n\t\t\t\t\tthisInstance.cacheLayerMarkers[key] = cacheLayer;\n\t\t\t\t\tmap.addLayer(cacheLayer);\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tvar markerArray = [];\n\t\t\t\tmarkers.forEach(function (e) {\n\t\t\t\t\tvar marker = L.marker([e.lat, e.lon], {\n\t\t\t\t\t\ticon: L.AwesomeMarkers.icon({\n\t\t\t\t\t\t\ticon: 'home',\n\t\t\t\t\t\t\tmarkerColor: 'blue',\n\t\t\t\t\t\t\tprefix: 'fa',\n\t\t\t\t\t\t\ticonColor: e.color\n\t\t\t\t\t\t})\n\t\t\t\t\t}).bindPopup(e.label);\n\t\t\t\t\tmarkerArray.push(marker);\n\t\t\t\t});\n\t\t\t\tlayer = L.featureGroup(markerArray);\n\t\t\t\tObject.keys(thisInstance.cacheLayerMarkers).forEach(function (key) {\n\t\t\t\t\tmap.removeLayer(thisInstance.cacheLayerMarkers[key]);\n\t\t\t\t\tvar markerArray = [];\n\t\t\t\t\tthisInstance.cacheMarkers[key].forEach(function (e) {\n\t\t\t\t\t\tvar marker = L.marker([e.lat, e.lon], {\n\t\t\t\t\t\t\ticon: L.AwesomeMarkers.icon({\n\t\t\t\t\t\t\t\ticon: 'home',\n\t\t\t\t\t\t\t\tmarkerColor: 'orange',\n\t\t\t\t\t\t\t\tprefix: 'fa',\n\t\t\t\t\t\t\t\ticonColor: e.color\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t}).bindPopup(e.label);\n\t\t\t\t\t\tmarkerArray.push(marker);\n\t\t\t\t\t});\n\t\t\t\t\tthisInstance.cacheLayerMarkers[key] = L.featureGroup(markerArray);\n\t\t\t\t\tmap.addLayer(thisInstance.cacheLayerMarkers[key]);\n\t\t\t\t});\n\t\t\t}\n\t\t\tthisInstance.layerMarkers = layer;\n\t\t\tmap.addLayer(layer);\n\t\t});\n\t\tcontainer.find('.searchBtn').on('click', function (e) {\n\t\t\tvar progressIndicatorElement = jQuery.progressIndicator({\n\t\t\t\t'position': container,\n\t\t\t\t'blockInfo': {\n\t\t\t\t\t'enabled': true\n\t\t\t\t}\n\t\t\t});\n\t\t\tvar params = {\n\t\t\t\tmodule: 'OpenStreetMap',\n\t\t\t\taction: 'GetMarkers',\n\t\t\t\tsrcModule: app.getModuleName(),\n\t\t\t\tsearchValue: container.find('.searchValue').val(),\n\t\t\t\tcache: thisInstance.getCacheParamsToRequest(),\n\t\t\t};\n\t\t\tvar radiusValue = container.find('.js-radius').val();\n\t\t\tif (radiusValue !== '' && parseInt(radiusValue)) {\n\t\t\t\tparams['radius'] = radiusValue;\n\t\t\t}\n\t\t\tparams = $.extend(thisInstance.selectedParams, params);\n\t\t\tAppConnector.request(params).done(function (response) {\n\t\t\t\tprogressIndicatorElement.progressIndicator({'mode': 'hide'});\n\t\t\t\tthisInstance.setMarkersByResponse(response);\n\t\t\t});\n\t\t});\n\t\tvar startIconLayer = false;\n\t\tcontainer.on('click', '.startTrack', function (e) {\n\t\t\tif (startIconLayer) {\n\t\t\t\tmap.removeLayer(startIconLayer);\n\t\t\t}\n\t\t\tvar currentTarget = $(e.currentTarget);\n\t\t\tvar containerPopup = currentTarget.closest('.leaflet-popup-content');\n\t\t\tdescription = containerPopup.find('.description').html();\n\t\t\tvar startElement = container.find('.start');\n\t\t\tvar coordinates = containerPopup.find('.coordinates');\n\t\t\tdescription = description.replace(/\\<br\\>/gi, \", \");\n\t\t\tstartElement.val(description);\n\t\t\tstartElement.data('lat', coordinates.data('lat'));\n\t\t\tstartElement.data('lon', coordinates.data('lon'));\n\t\t\tvar marker = L.marker([coordinates.data('lat'), coordinates.data('lon')], {\n\t\t\t\ticon: L.AwesomeMarkers.icon({\n\t\t\t\t\ticon: 'truck',\n\t\t\t\t\tmarkerColor: 'green',\n\t\t\t\t\tprefix: 'fa',\n\t\t\t\t})\n\t\t\t}).bindPopup(containerPopup.html());\n\t\t\tstartIconLayer = L.featureGroup([marker]);\n\t\t\tmap.addLayer(startIconLayer);\n\t\t\tthisInstance.showCalculateBtn();\n\t\t});\n\t\tvar endIconLayer = false;\n\t\tcontainer.on('click', '.endTrack', function (e) {\n\t\t\tif (endIconLayer) {\n\t\t\t\tmap.removeLayer(endIconLayer);\n\t\t\t}\n\t\t\tvar currentTarget = $(e.currentTarget);\n\t\t\tvar containerPopup = currentTarget.closest('.leaflet-popup-content');\n\t\t\tdescription = containerPopup.find('.description').html();\n\t\t\tvar endElement = container.find('.end');\n\t\t\tvar coordinates = containerPopup.find('.coordinates');\n\t\t\tdescription = description.replace(/\\<br\\>/gi, \", \");\n\t\t\tendElement.val(description);\n\t\t\tendElement.data('lat', coordinates.data('lat'));\n\t\t\tendElement.data('lon', coordinates.data('lon'));\n\t\t\tvar marker = L.marker([coordinates.data('lat'), coordinates.data('lon')], {\n\t\t\t\ticon: L.AwesomeMarkers.icon({\n\t\t\t\t\ticon: 'flag-checkered',\n\t\t\t\t\tmarkerColor: 'red',\n\t\t\t\t\tprefix: 'fa',\n\t\t\t\t})\n\t\t\t}).bindPopup(containerPopup.html());\n\t\t\tendIconLayer = L.featureGroup([marker]);\n\t\t\tmap.addLayer(endIconLayer);\n\t\t\tthisInstance.showCalculateBtn();\n\t\t});\n\n\t\tcontainer.on('click', '.indirectPoint', function (e) {\n\t\t\tvar currentTarget = $(e.currentTarget);\n\t\t\tvar containerPopup = currentTarget.closest('.leaflet-popup-content');\n\t\t\tdescription = containerPopup.find('.description').html();\n\t\t\tvar template = container.find('.indirectTemplate');\n\t\t\tvar indirect = template.clone();\n\t\t\ttemplate.before(indirect);\n\t\t\tindirect.removeClass('indirectTemplate');\n\t\t\tindirect.removeClass('d-none');\n\t\t\tvar coordinates = containerPopup.find('.coordinates');\n\t\t\tdescription = description.replace(/\\<br\\>/gi, \", \");\n\t\t\tif (typeof thisInstance.indirectPointLayer[description] !== \"undefined\") {\n\t\t\t\tmap.removeLayer(thisInstance.indirectPointLayer[description]);\n\t\t\t}\n\t\t\tvar indirectField = indirect.find('.indirect');\n\t\t\tindirectField.val(description);\n\t\t\tindirectField.data('lat', coordinates.data('lat'));\n\t\t\tindirectField.data('lon', coordinates.data('lon'));\n\t\t\tvar marker = L.marker([coordinates.data('lat'), coordinates.data('lon')], {\n\t\t\t\ticon: L.AwesomeMarkers.icon({\n\t\t\t\t\ticon: 'flag',\n\t\t\t\t\tmarkerColor: 'orange',\n\t\t\t\t\tprefix: 'fa',\n\t\t\t\t})\n\t\t\t}).bindPopup(containerPopup.html());\n\t\t\tthisInstance.indirectPointLayer[description] = L.featureGroup([marker]);\n\t\t\tmap.addLayer(thisInstance.indirectPointLayer[description]);\n\t\t});\n\t\tcontainer.on('click', '.removeIndirect', function (e) {\n\t\t\tvar currentTarget = $(e.currentTarget);\n\t\t\tvar container = currentTarget.closest('.indirectContainer');\n\t\t\tmap.removeLayer(thisInstance.indirectPointLayer[container.find('.indirect').val()]);\n\t\t\tcurrentTarget.closest('.indirectContainer').remove();\n\t\t});\n\t\tcontainer.on('click', '.moveUp', function (e) {\n\t\t\tvar currentTarget = $(e.currentTarget);\n\t\t\tvar container = currentTarget.closest('.indirectContainer');\n\t\t\tvar previousElement = container.prev();\n\t\t\tif (!previousElement.hasClass('startContainer')) {\n\t\t\t\tpreviousElement.before(container);\n\t\t\t}\n\t\t});\n\t\tcontainer.on('click', '.moveDown', function (e) {\n\t\t\tvar currentTarget = $(e.currentTarget);\n\t\t\tvar container = currentTarget.closest('.indirectContainer');\n\t\t\tvar nextElement = container.next();\n\t\t\tif (!nextElement.hasClass('indirectTemplate')) {\n\t\t\t\tnextElement.after(container);\n\t\t\t}\n\t\t});\n\t\tcontainer.on('click', '.searchInRadius', function (e) {\n\t\t\tif (endIconLayer) {\n\t\t\t\tmap.removeLayer(endIconLayer);\n\t\t\t}\n\t\t\tvar currentTarget = $(e.currentTarget);\n\t\t\tvar containerPopup = currentTarget.closest('.leaflet-popup-content');\n\t\t\tvar coordinates = containerPopup.find('.coordinates');\n\t\t\tvar progressIndicatorElement = jQuery.progressIndicator({\n\t\t\t\t'position': container,\n\t\t\t\t'blockInfo': {\n\t\t\t\t\t'enabled': true\n\t\t\t\t}\n\t\t\t});\n\t\t\tvar params = {\n\t\t\t\tmodule: 'OpenStreetMap',\n\t\t\t\taction: 'GetMarkers',\n\t\t\t\tsrcModule: app.getModuleName(),\n\t\t\t\tradius: container.find('.radius').val(),\n\t\t\t\tlat: coordinates.data('lat'),\n\t\t\t\tlon: coordinates.data('lon'),\n\t\t\t\tcache: thisInstance.getCacheParamsToRequest(),\n\t\t\t};\n\t\t\tparams = $.extend(thisInstance.selectedParams, params);\n\t\t\tAppConnector.request(params).done(function (response) {\n\t\t\t\tprogressIndicatorElement.progressIndicator({'mode': 'hide'});\n\t\t\t\tthisInstance.setMarkersByResponse(response);\n\t\t\t});\n\t\t});\n\t\tcontainer.find('.calculateTrack').on('click', function () {\n\t\t\tvar indirectLon = [];\n\t\t\tvar indirectLat = [];\n\t\t\tcontainer.find('.indirectContainer:not(.d-none) input.indirect').each(function () {\n\t\t\t\tvar currentTarget = $(this);\n\t\t\t\tindirectLat.push(currentTarget.data('lat'));\n\t\t\t\tindirectLon.push(currentTarget.data('lon'));\n\t\t\t});\n\t\t\tvar endElement = container.find('.end');\n\t\t\tvar startElement = container.find('.start');\n\t\t\tvar progressIndicatorElement = jQuery.progressIndicator({\n\t\t\t\t'position': container,\n\t\t\t\t'blockInfo': {\n\t\t\t\t\t'enabled': true\n\t\t\t\t}\n\t\t\t});\n\t\t\tvar params = {\n\t\t\t\turl: 'index.php',\n\t\t\t\tdata: {\n\t\t\t\t\tmodule: 'OpenStreetMap',\n\t\t\t\t\taction: 'GetRoute',\n\t\t\t\t\tflon: startElement.data('lon'),\n\t\t\t\t\tflat: startElement.data('lat'),\n\t\t\t\t\tilon: indirectLon,\n\t\t\t\t\tilat: indirectLat,\n\t\t\t\t\ttlon: endElement.data('lon'),\n\t\t\t\t\ttlat: endElement.data('lat')\n\t\t\t\t}\n\t\t\t};\n\t\t\tAppConnector.request(params).done(function (response) {\n\t\t\t\tprogressIndicatorElement.progressIndicator({mode: 'hide'});\n\t\t\t\tif (thisInstance.routeLayer) {\n\t\t\t\t\tmap.removeLayer(thisInstance.routeLayer);\n\t\t\t\t}\n\t\t\t\tvar route = L.geoJson(response.result.geoJson);\n\t\t\t\tthisInstance.routeLayer = L.featureGroup([route]);\n\t\t\t\tmap.addLayer(thisInstance.routeLayer);\n\t\t\t\tcontainer.find('.descriptionContainer').removeClass('d-none');\n\t\t\t\tcontainer.find('.descriptionContent .instruction').html(response.result.properties.description);\n\t\t\t\tcontainer.find('.descriptionContent .distance').html(App.Fields.Double.formatToDisplay(response.result.properties.distance));\n\t\t\t\tcontainer.find('.descriptionContent .travelTime').html(App.Fields.Double.formatToDisplay(response.result.properties.traveltime / 60));\n\t\t\t});\n\t\t});\n\t\tcontainer.on('click', '.setView', function (e) {\n\t\t\tvar currentTarget = $(e.currentTarget);\n\t\t\tvar inputInstance = currentTarget.closest('.input-group').find('.end,.start,.indirect');\n\t\t\tvar lat = inputInstance.data('lat');\n\t\t\tvar lon = inputInstance.data('lon');\n\t\t\tif (!(typeof lat === \"undefined\" && typeof lon === \"undefined\")) {\n\t\t\t\tmap.setView(new L.LatLng(lat, lon), 14);\n\t\t\t}\n\t\t});\n\t\tthis.registerSearchCompany();\n\t},\n\tregisterModalView: function (container) {\n\t\tvar thisInstance = this;\n\t\tvar progressIndicatorElement = jQuery.progressIndicator({\n\t\t\t'position': container,\n\t\t\t'blockInfo': {\n\t\t\t\t'enabled': true\n\t\t\t}\n\t\t});\n\t\tvar heightMap = $('body').height();\n\t\tthis.container = container;\n\t\tvar startCoordinate = [0, 0];\n\t\tvar startZoom = 2;\n\t\t$('#mapid').css({\n\t\t\theight: heightMap - 200\n\t\t});\n\t\tthis.registerMap(startCoordinate, startZoom);\n\t\tvar params = {\n\t\t\tmodule: 'OpenStreetMap',\n\t\t\taction: 'GetMarkers',\n\t\t\tsrcModule: app.getModuleName(),\n\t\t};\n\t\tparams = $.extend(this.selectedParams, params);\n\t\tthisInstance.registerBasicModal();\n\t\tAppConnector.request(params).done(function (response) {\n\t\t\tprogressIndicatorElement.progressIndicator({'mode': 'hide'});\n\t\t\tthisInstance.setMarkersByResponse(response);\n\n\t\t});\n\t},\n\tregisterDetailView: function (container) {\n\t\tthis.container = container;\n\t\tvar coordinates = container.find('#coordinates').val();\n\t\tcoordinates = JSON.parse(coordinates);\n\t\tvar startCoordinate = [0, 0];\n\t\tvar startZoom = 2;\n\t\tvar $map = container.find('#mapid');\n\t\tif (coordinates.length) {\n\t\t\tstartCoordinate = coordinates[0];\n\t\t\tstartZoom = 6;\n\t\t}\n\t\tif ($('.mainBody').length) {\n\t\t\tif ($('.mainBody').height() < 1000) {\n\t\t\t\t$map.height($('.mainBody').height() - ($('.detailViewTitle').height() + $('.detailViewContainer .related').height() + 25));\n\t\t\t} else {\n\t\t\t\t$map.height(1000);\n\t\t\t}\n\t\t} else {\n\t\t\tif ($('.bodyContents').height() < 1000) {\n\t\t\t\t$map.height($('.bodyContents').height() - ($('.detailViewTitle').height() + $('.detailViewContainer .related').height() + 25));\n\t\t\t} else {\n\t\t\t\t$map.height(1000);\n\t\t\t}\n\t\t}\n\n\t\tvar myMap = this.registerMap(startCoordinate, startZoom);\n\t\tvar markers = L.markerClusterGroup({\n\t\t\tmaxClusterRadius: 10\n\t\t});\n\t\tcoordinates.forEach(function (e) {\n\t\t\tvar marker = L.marker([e.lat, e.lon], {\n\t\t\t\ticon: L.AwesomeMarkers.icon({\n\t\t\t\t\ticon: 'home',\n\t\t\t\t\tmarkerColor: 'blue',\n\t\t\t\t\tprefix: 'fa',\n\t\t\t\t\ticonColor: e.color\n\t\t\t\t})\n\t\t\t}).bindPopup(e.label);\n\t\t\tmarkers.addLayer(marker);\n\t\t});\n\t\tmyMap.addLayer(markers);\n\t}\n});\n\n"],"names":["jQuery","Class","container","mapInstance","selectedParams","layerMarkers","markers","cacheMarkers","polygonLayer","routeLayer","recordsIds","cacheLayerMarkers","indirectPointLayer","setSelectedParams","params","registerMap","startCoordinate","startZoom","L","map","setView","tileLayer","maxZoom","attribution","addTo","myMap","setMarkersByResponse","response","markerArray","result","coordinates","markerClusterGroup","maxClusterRadius","removeLayer","forEach","e","push","lat","lon","marker","icon","AwesomeMarkers","markerColor","prefix","iconColor","color","bindPopup","label","addLayer","records","recordId","coordinatesCeneter","error","find","val","popup","$","isNumeric","radius","circle","fillColor","fillOpacity","featureGroup","title","app","vtranslate","text","type","Vtiger_Helper_Js","showMessage","cache","Object","keys","key","thisInstance","indexOf","markersCache","legend","html","value","footer","length","fitBounds","prop","showCalculateBtn","endAddress","startAddress","removeClass","registerCacheEvents","on","currentTarget","moduleName","data","is","module","action","srcModule","getModuleName","AppConnector","request","done","mode","recordIds","JSON","stringify","countRecords","closest","addClass","trigger","count","moduleContainer","getCacheParamsToRequest","each","currentObject","registerSearchCompany","searchValue","searchModule","addButton","thistInstance","crmId","record","srcModuleName","LatLng","widget","ui","autocomplete","_create","_super","menu","_renderMenu","ul","items","currentCategory","index","item","category","append","that","_renderItemData","_renderItem","appendTo","ivAutocomplete","delay","minLength","source","curentModule","view","responseAjax","parse","reponseDataList","select","event","selected","id","close","registerBasicModal","description","progressIndicator","groupBy","extend","progressIndicatorElement","layer","cacheLayer","radiusValue","parseInt","startIconLayer","containerPopup","replace","startElement","endIconLayer","endElement","indirect","template","clone","before","indirectField","remove","previousElement","prev","hasClass","nextElement","next","after","indirectLat","indirectLon","url","flon","flat","ilon","ilat","tlon","tlat","geoJson","route","properties","App","Fields","Double","formatToDisplay","distance","traveltime","inputInstance","registerModalView","heightMap","height","css","registerDetailView","$map"],"mappings":"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"}