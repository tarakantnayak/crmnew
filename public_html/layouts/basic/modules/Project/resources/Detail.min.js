'use strict';

Vtiger_Detail_Js('Project_Detail_Js',{},{registerSummaryViewContainerEvents:function registerSummaryViewContainerEvents(summaryViewContainer){this._super(summaryViewContainer);},loadModuleSummary:function loadModuleSummary(){var summaryParams={};summaryParams.module=app.getModuleName(),summaryParams.view='Detail',summaryParams.mode='showModuleSummaryView',summaryParams.record=jQuery('#recordId').val(),AppConnector.request(summaryParams).done(function(data){jQuery('.js-widget-general-info').html(data);});},loadGantt:function loadGantt(){var ganttContainer=$('.c-gantt',this.detailViewContentHolder);if(ganttContainer.length){var gantt=new Project_Gantt_Js(this.detailViewContentHolder);gantt.registerEvents();}},registerGantt:function registerGantt(){var _this=this;this.loadGantt(),app.event.on('DetailView.Tab.AfterLoad',function(e,data,instance){instance.detailViewContentHolder.ready(function(){_this.loadGantt();});});},getHierarchyResponseData:function getHierarchyResponseData(params){var thisInstance=this,aDeferred=$.Deferred();return $.isEmptyObject(thisInstance.hierarchyResponseCache)?AppConnector.request(params).then(function(data){thisInstance.hierarchyResponseCache=data,aDeferred.resolve(thisInstance.hierarchyResponseCache);}):aDeferred.resolve(thisInstance.hierarchyResponseCache),aDeferred.promise()},displayHierarchyResponseData:function displayHierarchyResponseData(data){var callbackFunction=function(){app.showScrollBar($('#hierarchyScroll'),{height:'300px',railVisible:!0,size:'6px'});};app.showModalWindow(data,function(){'function'==typeof callbackFunction&&300<$('#hierarchyScroll').height()&&callbackFunction();});},registerHierarchyRecordCount:function registerHierarchyRecordCount(){var hierarchyButton=$('.js-detail-hierarchy'),params={module:app.getModuleName(),action:'RelationAjax',record:app.getRecordId(),mode:'getHierarchyCount'};hierarchyButton.length&&AppConnector.request(params).then(function(response){response.success&&$('.hierarchy .badge').html(response.result);});},registerShowHierarchy:function registerShowHierarchy(){var thisInstance=this,hierarchyButton=$('.detailViewTitle'),params={module:app.getModuleName(),view:'Hierarchy',record:app.getRecordId()};hierarchyButton.on('click','.js-detail-hierarchy',function(){var progressIndicatorElement=$.progressIndicator({position:'html',blockInfo:{enabled:!0}});thisInstance.getHierarchyResponseData(params).then(function(data){thisInstance.displayHierarchyResponseData(data),progressIndicatorElement.progressIndicator({mode:'hide'});});});},registerEvents:function registerEvents(){var detailContentsHolder=this.getContentHolder(),thisInstance=this;this._super(),detailContentsHolder.on('click','.moreRecentTickets',function(){var recentTicketsTab=thisInstance.getTabByLabel(thisInstance.detailViewRecentTicketsTabLabel);recentTicketsTab.trigger('click');}),this.registerGantt(),this.registerHierarchyRecordCount(),this.registerShowHierarchy();}});
//# sourceMappingURL=Detail.min.js.map
