{"version":3,"file":"List.min.js","sources":["List.js"],"sourcesContent":["/*+***********************************************************************************\n * The contents of this file are subject to the vtiger CRM Public License Version 1.0\n * (\"License\"); You may not use this file except in compliance with the License\n * The Original Code is:  vtiger CRM Open Source\n * The Initial Developer of the Original Code is vtiger.\n * Portions created by vtiger are Copyright (C) vtiger.\n * All Rights Reserved.\n *************************************************************************************/\n'use strict';\n\nVtiger_List_Js(\"Documents_List_Js\", {\n\tmassMove: function (url) {\n\t\tvar listInstance = Vtiger_List_Js.getInstance();\n\t\tvar validationResult = listInstance.checkListRecordSelected();\n\t\tif (validationResult != true) {\n\t\t\tvar selectedIds = listInstance.readSelectedIds(true);\n\t\t\tvar excludedIds = listInstance.readExcludedIds(true);\n\t\t\tvar cvId = listInstance.getCurrentCvId();\n\t\t\tvar postData = {\n\t\t\t\t\"selected_ids\": selectedIds,\n\t\t\t\t\"excluded_ids\": excludedIds,\n\t\t\t\t\"viewname\": cvId\n\t\t\t};\n\n\t\t\tvar searchValue = listInstance.getAlphabetSearchValue();\n\n\t\t\tif (searchValue.length > 0) {\n\t\t\t\tpostData['search_key'] = listInstance.getAlphabetSearchField();\n\t\t\t\tpostData['search_value'] = searchValue;\n\t\t\t\tpostData['operator'] = \"s\";\n\t\t\t}\n\n\t\t\tvar params = {\n\t\t\t\t\"url\": url,\n\t\t\t\t\"data\": postData\n\t\t\t};\n\t\t\tvar progressIndicatorElement = jQuery.progressIndicator();\n\t\t\tAppConnector.request(params).done(function (data) {\n\t\t\t\tprogressIndicatorElement.progressIndicator({'mode': 'hide'});\n\t\t\t\tvar callBackFunction = function (data) {\n\t\t\t\t\tlistInstance.moveDocuments().done(function (data) {\n\t\t\t\t\t\tif (data) {\n\t\t\t\t\t\t\tvar result = data.result;\n\t\t\t\t\t\t\tif (result.success) {\n\t\t\t\t\t\t\t\tapp.hideModalWindow();\n\t\t\t\t\t\t\t\tVtiger_Helper_Js.showPnotify({\n\t\t\t\t\t\t\t\t\ttitle: app.vtranslate('JS_MOVE_DOCUMENTS'),\n\t\t\t\t\t\t\t\t\ttext: result.message,\n\t\t\t\t\t\t\t\t\tdelay: '2000',\n\t\t\t\t\t\t\t\t\ttype: 'success'\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\tvar urlParams = listInstance.getDefaultParams();\n\t\t\t\t\t\t\t\tlistInstance.getListViewRecords(urlParams);\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tVtiger_Helper_Js.showPnotify({\n\t\t\t\t\t\t\t\t\ttitle: app.vtranslate('JS_OPERATION_DENIED'),\n\t\t\t\t\t\t\t\t\ttext: result.message,\n\t\t\t\t\t\t\t\t\tdelay: '2000',\n\t\t\t\t\t\t\t\t\ttype: 'error'\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t};\n\t\t\t\tapp.showModalWindow(data, callBackFunction);\n\t\t\t});\n\t\t} else {\n\t\t\tlistInstance.noRecordSelectedAlert();\n\t\t}\n\n\t}\n\n}, {\n\tmoveDocuments: function () {\n\t\tvar aDeferred = jQuery.Deferred();\n\t\tjQuery('#moveDocuments').on('submit', function (e) {\n\t\t\tvar formData = jQuery(e.currentTarget).serializeFormData();\n\t\t\tAppConnector.request(formData).done(function (data) {\n\t\t\t\taDeferred.resolve(data);\n\t\t\t}).fail(function (textStatus, errorThrown) {\n\t\t\t\taDeferred.reject(textStatus, errorThrown);\n\t\t\t});\n\t\t\te.preventDefault();\n\t\t});\n\t\treturn aDeferred.promise();\n\t},\n\tregisterDeleteFilterClickEvent: function () {\n\t\tvar thisInstance = this;\n\n\t\tvar listViewFilterBlock = this.getFilterBlock();\n\t\tif (listViewFilterBlock != false) {\n\t\t\t//used mouseup event to stop the propagation of customfilter select change event.\n\t\t\tlistViewFilterBlock.on('mouseup', '.js-filter-delete', function (event) {\n\t\t\t\t//to close the dropdown\n\t\t\t\tevent.stopPropagation();\n\t\t\t\tthisInstance.getFilterSelectElement().data('select2').close();\n\t\t\t\tvar liElement = jQuery(event.currentTarget).closest('.select2-results__option');\n\t\t\t\tvar message = app.vtranslate('JS_LBL_ARE_YOU_SURE_YOU_WANT_TO_DELETE');\n\t\t\t\tif (liElement.hasClass('folderOption')) {\n\t\t\t\t\tif (liElement.find('.js-filter-delete').hasClass('dull')) {\n\t\t\t\t\t\tVtiger_Helper_Js.showPnotify(app.vtranslate('JS_FOLDER_IS_NOT_EMPTY'));\n\t\t\t\t\t\treturn;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tVtiger_Helper_Js.showConfirmationBox({'message': message}).done(function (e) {\n\t\t\t\t\t\t\tvar currentOptionElement = thisInstance.getSelectOptionFromChosenOption(liElement);\n\t\t\t\t\t\t\tvar folderId = currentOptionElement.data('folderid');\n\t\t\t\t\t\t\tvar params = {\n\t\t\t\t\t\t\t\tmodule: app.getModuleName(),\n\t\t\t\t\t\t\t\tmode: 'delete',\n\t\t\t\t\t\t\t\taction: 'Folder',\n\t\t\t\t\t\t\t\tfolderid: folderId\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\tAppConnector.request(params).done(function (data) {\n\t\t\t\t\t\t\t\tif (data.success) {\n\t\t\t\t\t\t\t\t\tcurrentOptionElement.remove();\n\t\t\t\t\t\t\t\t\tthisInstance.getFilterSelectElement().trigger('change');\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\n\t\t\t\t} else {\n\t\t\t\t\tVtiger_Helper_Js.showConfirmationBox({'message': message}).done(function (e) {\n\t\t\t\t\t\tvar currentOptionElement = thisInstance.getSelectOptionFromChosenOption(liElement);\n\t\t\t\t\t\tAppConnector.requestForm(currentOptionElement.data('deleteurl'));\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t}\n});\n"],"names":["Vtiger_List_Js","massMove","url","getInstance","validationResult","listInstance","checkListRecordSelected","readSelectedIds","excludedIds","readExcludedIds","cvId","getCurrentCvId","postData","selectedIds","searchValue","getAlphabetSearchValue","length","getAlphabetSearchField","jQuery","progressIndicator","AppConnector","request","done","data","progressIndicatorElement","app","showModalWindow","moveDocuments","result","success","hideModalWindow","Vtiger_Helper_Js","showPnotify","title","vtranslate","text","message","delay","type","getDefaultParams","getListViewRecords","urlParams","noRecordSelectedAlert","Deferred","on","e","currentTarget","serializeFormData","formData","aDeferred","resolve","fail","textStatus","errorThrown","reject","preventDefault","promise","registerDeleteFilterClickEvent","listViewFilterBlock","getFilterBlock","event","stopPropagation","thisInstance","getFilterSelectElement","close","closest","liElement","hasClass","find","showConfirmationBox","getSelectOptionFromChosenOption","folderId","currentOptionElement","params","module","getModuleName","mode","action","folderid","remove","trigger","requestForm"],"mappings":"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"}