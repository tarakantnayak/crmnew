{"version":3,"file":"Sorting.min.js","sources":["Sorting.js"],"sourcesContent":["/* {[The file is published on the basis of YetiForce Public License 3.0 that can be found in the following directory: licenses/LicenseEN.txt or yetiforce.com]} */\n'use strict';\n\njQuery.Class(\"Settings_CustomView_Sorting_Js\", {}, {\n\tformElement: false,\n\t/**\n\t * Register events for buttons in form\n\t */\n\tregisterButtonsEvent: function () {\n\t\tvar thisInstance = this;\n\t\tvar form = this.getForm();\n\t\tform.find('.js-clear').on('click', function (e) {\n\t\t\tvar currentTarget = jQuery(e.currentTarget);\n\t\t\tcurrentTarget.closest('.js-sort-container').find('[name=\"defaultOrderBy\"]').val('').trigger('change');\n\t\t});\n\t\tform.find('.js-sort-order-button').on('click', function (e) {\n\t\t\tvar currentTarget = jQuery(e.currentTarget);\n\t\t\tcurrentTarget.find('.fas').each(function (n, e) {\n\t\t\t\tif (jQuery(this).hasClass('d-none')) {\n\t\t\t\t\tjQuery(this).removeClass('d-none');\n\t\t\t\t\tform.find('[name=\"sortOrder\"]').val(jQuery(this).data('val'));\n\t\t\t\t} else {\n\t\t\t\t\tjQuery(this).addClass('d-none');\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\t\tform.on('submit', function (e) {\n\t\t\tvar form = jQuery(e.currentTarget);\n\t\t\tthisInstance.saveSorting(form);\n\t\t\te.preventDefault();\n\t\t});\n\t},\n\t/**\n\t * Saves sort the filter\n\t * @param {jQuery} form\n\t */\n\tsaveSorting: function (form) {\n\t\tvar progress = $.progressIndicator({\n\t\t\tmessage: app.vtranslate('JS_SAVE_LOADER_INFO'),\n\t\t\tblockInfo: {\n\t\t\t\tenabled: true\n\t\t\t}\n\t\t});\n\t\tvar data = form.serializeFormData();\n\t\tvar params = {\n\t\t\tcvid: data.cvid,\n\t\t\tname: 'sort',\n\t\t\tvalue: data.defaultOrderBy ? data.defaultOrderBy + ',' + data.sortOrder : ''\n\t\t};\n\t\tapp.saveAjax('updateField', {}, params).done(function (data) {\n\t\t\tapp.hideModalWindow();\n\t\t\tif (data.success) {\n\t\t\t\tVtiger_Helper_Js.showPnotify({text: data.result.message, type: 'success'});\n\t\t\t}\n\t\t\tprogress.progressIndicator({mode: 'hide'});\n\t\t});\n\t},\n\t/**\n\t * Returns form as jQuery object\n\t * @returns {jQuery}\n\t */\n\tgetForm: function () {\n\t\tif (this.formElement === false) {\n\t\t\tthis.setForm(jQuery('#js-sorting-filter'));\n\t\t}\n\t\treturn this.formElement;\n\t},\n\tsetForm: function (element) {\n\t\tthis.formElement = element;\n\t\treturn this;\n\t},\n\tregisterEvents: function () {\n\t\tthis.registerButtonsEvent();\n\t}\n});\n\njQuery(document).ready(function (e) {\n\tvar instance = new Settings_CustomView_Sorting_Js();\n\tinstance.registerEvents();\n});\n"],"names":["jQuery","Class","formElement","registerButtonsEvent","form","getForm","find","on","e","currentTarget","closest","val","trigger","each","hasClass","removeClass","data","addClass","thisInstance","saveSorting","preventDefault","$","progressIndicator","message","app","vtranslate","blockInfo","enabled","serializeFormData","params","cvid","name","value","defaultOrderBy","sortOrder","saveAjax","done","hideModalWindow","success","Vtiger_Helper_Js","showPnotify","text","result","type","progress","mode","setForm","element","registerEvents","document","ready","instance"],"mappings":";;AAGAA,OAAOC,KAAP,CAAa,gCAAb,CAA+C,EAA/C,CAAmD,CAClDC,cADkD,CAKlDC,qBAAsB,+BAAY,kBACd,IADc,CAE7BC,KAAO,KAAKC,OAAL,EAFsB,CAGjCD,KAAKE,IAAL,CAAU,WAAV,EAAuBC,EAAvB,CAA0B,OAA1B,CAAmC,SAAUC,CAAV,CAAa,CAC/C,kBAAoBR,OAAOQ,EAAEC,aAAT,CAApB,CACAA,cAAcC,OAAd,CAAsB,oBAAtB,EAA4CJ,IAA5C,CAAiD,yBAAjD,EAA4EK,GAA5E,CAAgF,EAAhF,EAAoFC,OAApF,CAA4F,QAA5F,EACA,CAHD,CAHiC,CAOjCR,KAAKE,IAAL,CAAU,uBAAV,EAAmCC,EAAnC,CAAsC,OAAtC,CAA+C,SAAUC,CAAV,CAAa,CAC3D,kBAAoBR,OAAOQ,EAAEC,aAAT,CAApB,CACAA,cAAcH,IAAd,CAAmB,MAAnB,EAA2BO,IAA3B,CAAgC,UAAgB,CAC3Cb,OAAO,IAAP,EAAac,QAAb,CAAsB,QAAtB,CAD2C,EAE9Cd,OAAO,IAAP,EAAae,WAAb,CAAyB,QAAzB,CAF8C,CAG9CX,KAAKE,IAAL,CAAU,oBAAV,EAAgCK,GAAhC,CAAoCX,OAAO,IAAP,EAAagB,IAAb,CAAkB,KAAlB,CAApC,CAH8C,EAK9ChB,OAAO,IAAP,EAAaiB,QAAb,CAAsB,QAAtB,EAED,CAPD,EAQA,CAVD,CAPiC,CAkBjCb,KAAKG,EAAL,CAAQ,QAAR,CAAkB,SAAUC,CAAV,CAAa,CAC9B,SAAWR,OAAOQ,EAAEC,aAAT,CAAX,CACAS,aAAaC,WAAb,CAAyBf,IAAzB,CAF8B,CAG9BI,EAAEY,cAAF,GACA,CAJD,EAKA,CA5BiD,CAiClDD,YAAa,qBAAUf,IAAV,CAAgB,cACbiB,EAAEC,iBAAF,CAAoB,CAClCC,QAASC,IAAIC,UAAJ,CAAe,qBAAf,CADyB,CAElCC,UAAW,CACVC,UADU,CAFuB,CAApB,CADa,CAOxBX,KAAOZ,KAAKwB,iBAAL,EAPiB,CAQxBC,OAAS,CACZC,KAAMd,KAAKc,IADC,CAEZC,KAAM,MAFM,CAGZC,MAAOhB,KAAKiB,cAAL,CAAsBjB,KAAKiB,cAAL,CAAsB,GAAtB,CAA4BjB,KAAKkB,SAAvD,CAAmE,EAH9D,CARe,CAa5BV,IAAIW,QAAJ,CAAa,aAAb,CAA4B,EAA5B,CAAgCN,MAAhC,EAAwCO,IAAxC,CAA6C,SAAUpB,IAAV,CAAgB,CAC5DQ,IAAIa,eAAJ,EAD4D,CAExDrB,KAAKsB,OAFmD,EAG3DC,iBAAiBC,WAAjB,CAA6B,CAACC,KAAMzB,KAAK0B,MAAL,CAAYnB,OAAnB,CAA4BoB,KAAM,SAAlC,CAA7B,CAH2D,CAK5DC,SAAStB,iBAAT,CAA2B,CAACuB,KAAM,MAAP,CAA3B,EACA,CAND,EAOA,CArDiD,CA0DlDxC,QAAS,kBAAY,CAIpB,OAHI,UAAKH,WAGT,EAFC,KAAK4C,OAAL,CAAa9C,OAAO,oBAAP,CAAb,CAED,CAAO,KAAKE,WACZ,CA/DiD,CAgElD4C,QAAS,iBAAUC,OAAV,CAAmB,CAE3B,YADK7C,WAAL,CAAmB6C,OACnB,CAAO,IACP,CAnEiD,CAoElDC,eAAgB,yBAAY,CAC3B,KAAK7C,oBAAL,GACA,CAtEiD,CAAnD,EAyEAH,OAAOiD,QAAP,EAAiBC,KAAjB,CAAuB,UAAa,CACnC,aAAe,kCAAf,CACAC,SAASH,cAAT,GACA,CAHD"}