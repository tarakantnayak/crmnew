'use strict';

Settings_Vtiger_Index_Js('Settings_Colors_Index_Js',{},{registerEvents:function registerEvents(){this.registerModuleTabEvent(),this.registerModuleChangeEvent(),this.registerModulePickListChangeEvent(),this.initEvants();},initEvants:function initEvants(){var thisInstance=this,container=$('.UserColors');container.find('.updateUserColor').on('click',function(e){thisInstance.updateUserColor(e,thisInstance);}),container.find('.generateUserColor').on('click',this.generateUserColor),container.find('.removeUserColor').on('click',this.removeUserColor),container.find('.updateGroupColor').on('click',function(e){thisInstance.updateGroupColor(e,thisInstance);}),container.find('.generateGroupColor').on('click',this.generateGroupColor),container.find('.removeGroupColor').on('click',this.removeGroupColor),container.find('.updateModuleColor').on('click',function(e){thisInstance.updateModuleColor(e,thisInstance);}),container.find('.generateModuleColor').on('click',this.generateModuleColor),container.find('.removeModuleColor').on('click',this.removeModuleColor),container.find('.activeModuleColor').on('click',this.activeModuleColor),container.find('.addPicklistColorColumn').on('click',this.addPicklistColorColumn),container.find('.updatePicklistValueColor').on('click',function(e){thisInstance.updatePicklistValueColor(e,thisInstance);}),container.find('.generatePicklistValueColor').on('click',this.generatePicklistValueColor),container.find('.removePicklistValueColor').on('click',this.removePicklistValueColor),container.find('.updateColor').on('click',function(e){thisInstance.updateCalendarColor(e,thisInstance);}),container.find('#update_event').on('click',this.updateEvent),container.find('.generateColor').on('click',this.generateCalendarColor),container.find('.removeCalendarColor').on('click',this.removeCalendarColor);},registerColorPicker:function registerColorPicker(data,colorObject){data.find('.js-color-picker').colorpicker({format:'hex',inline:!0,container:!0,color:colorObject.data('color')});},updateUserColor:function updateUserColor(e,thisInstance){var target=$(e.currentTarget),editColorModal=jQuery('.UserColors .editColorContainer'),clonedContainer=editColorModal.clone(!0,!0),colorPreview=$('#calendarColorPreviewUser'+target.data('record')),callBackFunction=function(data){data.find('.editColorContainer').removeClass('d-none').show();var selectedColor=data.find('.selectedColor');selectedColor.val(colorPreview.data('color')),thisInstance.registerColorPicker(data,colorPreview),data.find('[name="saveButton"]').on('click',function(){var progress=$.progressIndicator({message:app.vtranslate('JS_LOADING_PLEASE_WAIT'),blockInfo:{enabled:!0}});AppConnector.request({module:'Colors',parent:'Settings',action:'SaveAjax',mode:'updateUserColor',color:selectedColor.val(),record:target.data('record')}).done(function(data){return Vtiger_Helper_Js.showPnotify({text:data.result.message,type:'success'}),data.result}),colorPreview.css('background',selectedColor.val()),target.data('color',selectedColor.val()),progress.progressIndicator({mode:'hide'}),app.hideModalWindow();});};app.showModalWindow(clonedContainer,function(data){'function'==typeof callBackFunction&&callBackFunction(data);},{width:'1000px'});},generateUserColor:function generateUserColor(e){var target=$(e.currentTarget),colorPreview=$('#calendarColorPreviewUser'+target.data('record'));AppConnector.request({module:'Colors',parent:'Settings',action:'SaveAjax',mode:'updateUserColor',record:target.data('record')}).done(function(data){colorPreview.css('background',data.result.color),colorPreview.data('color',data.result.color),Vtiger_Helper_Js.showPnotify({text:data.result.message,type:'success'});});},removeUserColor:function removeUserColor(e){var target=$(e.currentTarget),colorPreview=$('#calendarColorPreviewUser'+target.data('record'));AppConnector.request({module:'Colors',parent:'Settings',action:'SaveAjax',mode:'removeUserColor',record:target.data('record')}).done(function(data){colorPreview.css('background',''),colorPreview.data('color',''),Vtiger_Helper_Js.showPnotify({text:data.result.message,type:'success'});});},updateGroupColor:function updateGroupColor(e,thisInstance){var target=$(e.currentTarget),editColorModal=jQuery('.UserColors .editColorContainer'),clonedContainer=editColorModal.clone(!0,!0),colorPreview=$('#calendarColorPreviewGroup'+target.data('record')),callBackFunction=function(data){data.find('.editColorContainer').removeClass('d-none').show();var selectedColor=data.find('.selectedColor');selectedColor.val(colorPreview.data('color')),thisInstance.registerColorPicker(data,colorPreview),data.find('[name="saveButton"]').on('click',function(){var progress=$.progressIndicator({message:app.vtranslate('JS_LOADING_PLEASE_WAIT'),blockInfo:{enabled:!0}});AppConnector.request({module:'Colors',parent:'Settings',action:'SaveAjax',mode:'updateGroupColor',color:selectedColor.val(),record:target.data('record')}).done(function(data){return Vtiger_Helper_Js.showPnotify({text:data.result.message,type:'success'}),data.result}),colorPreview.css('background',selectedColor.val()),target.data('color',selectedColor.val()),progress.progressIndicator({mode:'hide'}),app.hideModalWindow();});};app.showModalWindow(clonedContainer,function(data){'function'==typeof callBackFunction&&callBackFunction(data);},{width:'1000px'});},generateGroupColor:function generateGroupColor(e){var target=$(e.currentTarget),colorPreview=$('#calendarColorPreviewGroup'+target.data('record'));AppConnector.request({module:'Colors',parent:'Settings',action:'SaveAjax',mode:'updateGroupColor',record:target.data('record')}).done(function(data){colorPreview.css('background',data.result.color),colorPreview.data('color',data.result.color),Vtiger_Helper_Js.showPnotify({text:data.result.message,type:'success'});});},removeGroupColor:function removeGroupColor(e){var target=$(e.currentTarget),colorPreview=$('#calendarColorPreviewGroup'+target.data('record'));AppConnector.request({module:'Colors',parent:'Settings',action:'SaveAjax',mode:'removeGroupColor',record:target.data('record')}).done(function(data){colorPreview.css('background',''),colorPreview.data('color',''),Vtiger_Helper_Js.showPnotify({text:data.result.message,type:'success'});});},updateModuleColor:function updateModuleColor(e,thisInstance){var target=$(e.currentTarget),editColorModal=jQuery('.UserColors .editColorContainer'),clonedContainer=editColorModal.clone(!0,!0),colorPreview=$('#calendarColorPreviewModule'+target.data('record')),callBackFunction=function(data){data.find('.editColorContainer').removeClass('d-none').show();var selectedColor=data.find('.selectedColor');selectedColor.val(colorPreview.data('color')),thisInstance.registerColorPicker(data,colorPreview),data.find('[name="saveButton"]').on('click',function(){var progress=$.progressIndicator({message:app.vtranslate('JS_LOADING_PLEASE_WAIT'),blockInfo:{enabled:!0}});AppConnector.request({module:'Colors',parent:'Settings',action:'SaveAjax',mode:'updateModuleColor',color:selectedColor.val(),record:target.data('record')}).done(function(data){return Vtiger_Helper_Js.showPnotify({text:data.result.message,type:'success'}),data.result}),colorPreview.css('background',selectedColor.val()),target.data('color',selectedColor.val()),progress.progressIndicator({mode:'hide'}),app.hideModalWindow();});};app.showModalWindow(clonedContainer,function(data){'function'==typeof callBackFunction&&callBackFunction(data);},{width:'1000px'});},generateModuleColor:function generateModuleColor(e){var target=$(e.currentTarget),colorPreview=$('#calendarColorPreviewModule'+target.data('record'));AppConnector.request({module:'Colors',parent:'Settings',action:'SaveAjax',mode:'updateModuleColor',record:target.data('record')}).done(function(data){colorPreview.css('background',data.result.color),colorPreview.data('color',data.result.color),Vtiger_Helper_Js.showPnotify({text:data.result.message,type:'success'});});},removeModuleColor:function removeModuleColor(e){var target=$(e.currentTarget),colorPreview=$('#calendarColorPreviewModule'+target.data('record'));AppConnector.request({module:'Colors',parent:'Settings',action:'SaveAjax',mode:'removeModuleColor',record:target.data('record')}).done(function(data){colorPreview.css('background',''),colorPreview.data('color',''),Vtiger_Helper_Js.showPnotify({text:data.result.message,type:'success'});});},activeModuleColor:function activeModuleColor(e){var target=$(e.currentTarget),colorPreview=$('#calendarColorPreviewModule'+target.data('record'));AppConnector.request({module:'Colors',parent:'Settings',action:'SaveAjax',mode:'activeModuleColor',status:target.is(':checked'),color:colorPreview.data('color'),record:target.data('record')}).done(function(data){Vtiger_Helper_Js.showPnotify({text:data.result.message,type:'success'}),colorPreview.css('background',data.result.color),colorPreview.data('color',data.result.color);});},addPicklistColorColumn:function addPicklistColorColumn(e){var container=jQuery('.picklistViewContentDiv'),target=$(e.currentTarget);AppConnector.request({module:'Colors',parent:'Settings',action:'SaveAjax',mode:'addPicklistColorColumn',picklistModule:target.data('fieldmodule'),fieldId:target.data('fieldid')}).done(function(data){Vtiger_Helper_Js.showPnotify({text:data.result.message,type:'success'}),container.find('.modulePickList').trigger('change');});},updatePicklistValueColor:function updatePicklistValueColor(e,thisInstance){var container=jQuery('.picklistViewContentDiv'),target=$(e.currentTarget),editColorModal=jQuery('.UserColors .editColorContainer'),clonedContainer=editColorModal.clone(!0,!0),colorPreview=container.find('#calendarColorPreviewPicklistValue'+target.data('fieldvalueid')),callBackFunction=function(data){data.find('.editColorContainer').removeClass('d-none').show();var selectedColor=data.find('.selectedColor');selectedColor.val(colorPreview.data('color')),thisInstance.registerColorPicker(data,colorPreview),data.find('[name="saveButton"]').on('click',function(){var progress=$.progressIndicator({message:app.vtranslate('JS_LOADING_PLEASE_WAIT'),blockInfo:{enabled:!0}});AppConnector.request({module:'Colors',parent:'Settings',action:'SaveAjax',mode:'updatePicklistValueColor',color:selectedColor.val(),fieldId:target.data('fieldid'),fieldValueId:target.data('fieldvalueid')}).done(function(data){return Vtiger_Helper_Js.showPnotify({text:data.result.message,type:'success'}),data.result}),colorPreview.css('background',selectedColor.val()),target.data('color',selectedColor.val()),progress.progressIndicator({mode:'hide'}),app.hideModalWindow();});};app.showModalWindow(clonedContainer,function(data){'function'==typeof callBackFunction&&callBackFunction(data);},{width:'1000px'});},generatePicklistValueColor:function generatePicklistValueColor(e){var container=jQuery('.picklistViewContentDiv'),target=$(e.currentTarget),colorPreview=container.find('#calendarColorPreviewPicklistValue'+target.data('fieldvalueid')),progress=$.progressIndicator({message:app.vtranslate('JS_LOADING_PLEASE_WAIT'),blockInfo:{enabled:!0}});AppConnector.request({module:'Colors',parent:'Settings',action:'SaveAjax',mode:'updatePicklistValueColor',fieldId:target.data('fieldid'),fieldValueId:target.data('fieldvalueid')}).done(function(data){colorPreview.css('background',data.result.color),colorPreview.data('color',data.result.color),Vtiger_Helper_Js.showPnotify({text:data.result.message,type:'success'});}),progress.progressIndicator({mode:'hide'}),app.hideModalWindow();},removePicklistValueColor:function removePicklistValueColor(e){var container=jQuery('.picklistViewContentDiv'),target=$(e.currentTarget),colorPreview=container.find('#calendarColorPreviewPicklistValue'+target.data('fieldvalueid')),progress=$.progressIndicator({message:app.vtranslate('JS_LOADING_PLEASE_WAIT'),blockInfo:{enabled:!0}});AppConnector.request({module:'Colors',parent:'Settings',action:'SaveAjax',mode:'removePicklistValueColor',fieldId:target.data('fieldid'),fieldValueId:target.data('fieldvalueid')}).done(function(data){colorPreview.css('background',''),colorPreview.data('color',''),Vtiger_Helper_Js.showPnotify({text:data.result.message,type:'success'});}),progress.progressIndicator({mode:'hide'}),app.hideModalWindow();},generateCalendarColor:function generateCalendarColor(e){var target=$(e.currentTarget),closestTrElement=target.closest('tr');AppConnector.request({module:'Colors',parent:'Settings',action:'SaveAjax',mode:'updateCalendarColor',id:closestTrElement.data('id'),table:closestTrElement.data('table'),field:closestTrElement.data('field')}).done(function(data){Settings_Colors_Index_Js.showMessage({type:'success',text:data.result.message}),closestTrElement.find('.calendarColor').css('background',data.result.color),closestTrElement.data('color',data.result.color);});},updateCalendarColor:function updateCalendarColor(e,thisInstance){var target=$(e.currentTarget),closestTrElement=target.closest('tr'),editColorModal=jQuery('.UserColors .editColorContainer'),clonedContainer=editColorModal.clone(!0,!0),callBackFunction=function(data){data.find('.editColorContainer').removeClass('d-none').show();var selectedColor=data.find('.selectedColor');selectedColor.val(closestTrElement.data('color')),thisInstance.registerColorPicker(data,closestTrElement),data.find('[name="saveButton"]').on('click',function(){var progress=$.progressIndicator({message:app.vtranslate('Update labels'),blockInfo:{enabled:!0}});AppConnector.request({module:'Colors',parent:'Settings',action:'SaveAjax',mode:'updateCalendarColor',color:selectedColor.val(),id:closestTrElement.data('id'),table:closestTrElement.data('table'),field:closestTrElement.data('field')}).done(function(data){return Vtiger_Helper_Js.showPnotify({text:data.result.message,type:'success'}),data.result}),closestTrElement.find('.calendarColor').css('background',selectedColor.val()),closestTrElement.data('color',selectedColor.val()),progress.progressIndicator({mode:'hide'}),app.hideModalWindow();});};app.showModalWindow(clonedContainer,function(data){'function'==typeof callBackFunction&&callBackFunction(data);},{width:'1000px'});},removeCalendarColor:function removeCalendarColor(e){var container=jQuery('#calendarColors'),target=$(e.currentTarget),colorPreview=container.find('#calendarColorPreviewCalendar'+target.data('record')),progress=$.progressIndicator({message:app.vtranslate('JS_LOADING_PLEASE_WAIT'),blockInfo:{enabled:!0}});AppConnector.request({module:'Colors',parent:'Settings',action:'SaveAjax',mode:'removeCalendarColor',id:target.data('record')}).done(function(data){colorPreview.css('background',''),colorPreview.data('color',''),Vtiger_Helper_Js.showPnotify({text:data.result.message,type:'success'});}),progress.progressIndicator({mode:'hide'}),app.hideModalWindow();},registerModuleTabEvent:function registerModuleTabEvent(){var thisInstance=this;jQuery('#picklistsColorsTab').on('click',function(){var progressIndicatorElement=jQuery.progressIndicator({position:'html',blockInfo:{enabled:!0}});AppConnector.request({module:'Colors',parent:app.getParentModuleName(),view:'IndexAjax',mode:'getPickListView'}).done(function(data){var container=jQuery('.picklistViewContentDiv');container.html(data),progressIndicatorElement.progressIndicator({mode:'hide'}),App.Fields.Picklist.changeSelectElementView(jQuery('.pickListModulesSelectContainer')),thisInstance.registerModuleChangeEvent(),container.find('.modulePickList').trigger('change');});});},registerModuleChangeEvent:function registerModuleChangeEvent(){var thisInstance=this,container=jQuery('.picklistViewContentDiv');container.find('.pickListModules').on('change',function(e){var selectedModule=jQuery(e.currentTarget).val();if(0>=selectedModule.length)return jQuery('#picklistsColorsTab').trigger('click'),!1;var progressIndicatorElement=jQuery.progressIndicator({position:'html',blockInfo:{enabled:!0}});AppConnector.request({module:'Colors',parent:app.getParentModuleName(),source_module:selectedModule,view:'IndexAjax',mode:'getPickListView'}).done(function(data){container.html(data),progressIndicatorElement.progressIndicator({mode:'hide'}),App.Fields.Picklist.changeSelectElementView(jQuery('.pickListModulesSelectContainer')),App.Fields.Picklist.changeSelectElementView(jQuery('.pickListModulesPicklistSelectContainer')),thisInstance.registerModuleChangeEvent(),thisInstance.registerModulePickListChangeEvent(),jQuery('#modulePickList').trigger('change');});});},registerModulePickListChangeEvent:function registerModulePickListChangeEvent(){var thisInstance=this,container=jQuery('.picklistViewContentDiv');container.find('.modulePickList').on('change',function(e){var progressIndicatorElement=jQuery.progressIndicator({position:'html',blockInfo:{enabled:!0}});AppConnector.request({module:'Colors',parent:app.getParentModuleName(),source_module:jQuery('#pickListModules').val(),view:'IndexAjax',mode:'getPickListView',fieldId:jQuery(e.currentTarget).val()}).done(function(data){container.html(data),App.Fields.Picklist.changeSelectElementView(jQuery('.pickListModulesSelectContainer')),App.Fields.Picklist.changeSelectElementView(jQuery('.pickListModulesPicklistSelectContainer')),thisInstance.registerModuleChangeEvent(),thisInstance.registerModulePickListChangeEvent(),$('.UserColors .addPicklistColorColumn').on('click',thisInstance.addPicklistColorColumn),$('.UserColors .updatePicklistValueColor').on('click',function(e){thisInstance.updatePicklistValueColor(e,thisInstance);}),$('.UserColors .generatePicklistValueColor').on('click',thisInstance.generatePicklistValueColor),$('.UserColors .removePicklistValueColor').on('click',thisInstance.removePicklistValueColor),progressIndicatorElement.progressIndicator({mode:'hide'});});});}});
//# sourceMappingURL=Index.min.js.map
