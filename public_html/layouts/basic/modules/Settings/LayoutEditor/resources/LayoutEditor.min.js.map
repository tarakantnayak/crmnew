{"version":3,"file":"LayoutEditor.min.js","sources":["LayoutEditor.js"],"sourcesContent":["/*+***********************************************************************************\n * The contents of this file are subject to the vtiger CRM Public License Version 1.0\n * (\"License\"); You may not use this file except in compliance with the License\n * The Original Code is:  vtiger CRM Open Source\n * The Initial Developer of the Original Code is vtiger.\n * Portions created by vtiger are Copyright (C) vtiger.\n * All Rights Reserved.\n * Contributor(s): YetiForce.com\n *************************************************************************************/\n'use strict';\n\n$.Class(\n\t'Settings_LayoutEditor_Js',\n\t{},\n\t{\n\t\tupdatedBlockSequence: {},\n\t\treactiveFieldsList: [],\n\t\tinActiveFieldsList: false,\n\t\tupdatedBlockFieldsList: [],\n\t\tupdatedBlocksList: [],\n\t\tblockNamesList: [],\n\t\t/**\n\t\t * Function to set the inactive fields list used to show the inactive fields\n\t\t */\n\t\tsetInactiveFieldsList: function() {\n\t\t\tvar thisInstance = this;\n\t\t\tvar contents = $('#layoutEditorContainer').find('.contents');\n\t\t\tvar json = contents.find('.inActiveFieldsArray');\n\t\t\tif (0 < json.length) {\n\t\t\t\tthisInstance.inActiveFieldsList = JSON.parse(json.val());\n\t\t\t}\n\t\t},\n\t\t/**\n\t\t * Function to regiser the event to make the blocks sortable\n\t\t */\n\t\tmakeBlocksListSortable: function() {\n\t\t\tvar thisInstance = this;\n\t\t\tvar contents = $('#layoutEditorContainer').find('.contents');\n\t\t\tvar table = contents.find('.blockSortable');\n\t\t\tcontents.sortable({\n\t\t\t\tcontainment: contents,\n\t\t\t\titems: table,\n\t\t\t\trevert: true,\n\t\t\t\ttolerance: 'pointer',\n\t\t\t\tcursor: 'move',\n\t\t\t\tupdate: function(e, ui) {\n\t\t\t\t\tthisInstance.updateBlockSequence();\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\t/**\n\t\t * Function which will update block sequence\n\t\t */\n\t\tupdateBlockSequence: function() {\n\t\t\tvar thisInstance = this;\n\t\t\tvar progressIndicatorElement = $.progressIndicator({\n\t\t\t\tposition: 'html',\n\t\t\t\tblockInfo: {\n\t\t\t\t\tenabled: true\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tvar sequence = JSON.stringify(thisInstance.updateBlocksListByOrder());\n\t\t\tvar params = {};\n\t\t\tparams['module'] = app.getModuleName();\n\t\t\tparams['parent'] = app.getParentModuleName();\n\t\t\tparams['action'] = 'Block';\n\t\t\tparams['mode'] = 'updateSequenceNumber';\n\t\t\tparams['sequence'] = sequence;\n\n\t\t\tAppConnector.request(params)\n\t\t\t\t.done(function(data) {\n\t\t\t\t\tprogressIndicatorElement.progressIndicator({ mode: 'hide' });\n\t\t\t\t\tvar params = {};\n\t\t\t\t\tparams['text'] = app.vtranslate('JS_BLOCK_SEQUENCE_UPDATED');\n\t\t\t\t\tSettings_Vtiger_Index_Js.showMessage(params);\n\t\t\t\t})\n\t\t\t\t.fail(function(error) {\n\t\t\t\t\tprogressIndicatorElement.progressIndicator({ mode: 'hide' });\n\t\t\t\t});\n\t\t},\n\t\t/**\n\t\t * Function which will arrange the sequence number of blocks\n\t\t */\n\t\tupdateBlocksListByOrder: function() {\n\t\t\tvar thisInstance = this;\n\t\t\tvar contents = $('#layoutEditorContainer').find('.contents');\n\t\t\tcontents.find('.editFieldsTable.blockSortable').each(function(index, domElement) {\n\t\t\t\tvar blockTable = $(domElement);\n\t\t\t\tvar blockId = blockTable.data('blockId');\n\t\t\t\tvar actualBlockSequence = blockTable.data('sequence');\n\t\t\t\tvar expectedBlockSequence = index + 1;\n\n\t\t\t\tif (expectedBlockSequence != actualBlockSequence) {\n\t\t\t\t\tblockTable.data('sequence', expectedBlockSequence);\n\t\t\t\t}\n\t\t\t\tthisInstance.updatedBlockSequence[blockId] = expectedBlockSequence;\n\t\t\t});\n\t\t\treturn thisInstance.updatedBlockSequence;\n\t\t},\n\t\t/**\n\t\t * Function to register all the relatedList Events\n\t\t */\n\t\tregisterRelatedListEvents: function() {\n\t\t\tconst thisInstance = this,\n\t\t\t\trelatedList = $('#relatedTabOrder');\n\t\t\tApp.Fields.Picklist.showSelect2ElementView(relatedList.find('.relatedTabModulesList .select2_container'), {\n\t\t\t\tsortable: true,\n\t\t\t\tsortableCb: currentTarget => {\n\t\t\t\t\tthisInstance.updateSelectedFields(currentTarget);\n\t\t\t\t}\n\t\t\t});\n\t\t\trelatedList.on('click', '.inActiveRelationModule', function(e) {\n\t\t\t\tvar currentTarget = $(e.currentTarget);\n\t\t\t\tvar relatedModule = currentTarget.closest('.relatedModule');\n\t\t\t\trelatedModule\n\t\t\t\t\t.find('.activeRelationModule')\n\t\t\t\t\t.removeClass('d-none')\n\t\t\t\t\t.show();\n\t\t\t\tcurrentTarget.hide();\n\t\t\t\tthisInstance.changeStatusRelatedModule(relatedModule.data('relation-id'), false);\n\t\t\t});\n\t\t\trelatedList.on('click', '.activeRelationModule', function(e) {\n\t\t\t\tvar currentTarget = $(e.currentTarget);\n\t\t\t\tvar relatedModule = currentTarget.closest('.relatedModule');\n\t\t\t\trelatedModule\n\t\t\t\t\t.find('.inActiveRelationModule')\n\t\t\t\t\t.removeClass('d-none')\n\t\t\t\t\t.show();\n\t\t\t\tcurrentTarget.hide();\n\t\t\t\tthisInstance.changeStatusRelatedModule(relatedModule.data('relation-id'), true);\n\t\t\t});\n\t\t\trelatedList.on('click', '.removeRelation', function(e) {\n\t\t\t\tvar currentTarget = $(e.currentTarget);\n\t\t\t\tvar relatedModule = currentTarget.closest('.relatedModule');\n\t\t\t\tthisInstance.removeRelation(relatedModule);\n\t\t\t});\n\t\t\trelatedList.on('click', '.addToFavorites', function(e) {\n\t\t\t\tvar currentTarget = $(e.currentTarget);\n\t\t\t\tthisInstance.changeStateFavorites(currentTarget);\n\t\t\t});\n\t\t\trelatedList.on('change', '.relatedViewType', function(e) {\n\t\t\t\tvar currentTarget = $(this);\n\t\t\t\tvar value = currentTarget.val();\n\t\t\t\tif (!value) {\n\t\t\t\t\tcurrentTarget.validationEngine('showPrompt', app.vtranslate('JS_PLEASE_SELECT_ATLEAST_ONE_OPTION'));\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t\tcurrentTarget.validationEngine('hide');\n\t\t\t\tthisInstance.changeRelatedViewType(currentTarget);\n\t\t\t});\n\t\t\trelatedList.find('.js-related-column-list').on('change', function(e) {\n\t\t\t\tthisInstance.updateSelectedFields($(e.currentTarget));\n\t\t\t});\n\t\t\trelatedList.on('click', '.addRelation', function(e) {\n\t\t\t\tvar currentTarget = $(e.currentTarget);\n\t\t\t\tvar container = currentTarget.closest('#relatedTabOrder');\n\t\t\t\tvar contentsDiv = container.closest('.contentsDiv');\n\t\t\t\tvar addRelationContainer = relatedList.find('.addRelationContainer').clone(true, true);\n\t\t\t\tvar callBackFunction = function(data) {\n\t\t\t\t\tApp.Fields.Picklist.showSelect2ElementView(data.find('select'));\n\t\t\t\t\tdata.find('.relLabel').val(data.find('.target option:selected').val());\n\t\t\t\t\tdata.on('change', '.target', function(e) {\n\t\t\t\t\t\tvar currentTarget = $(e.currentTarget);\n\t\t\t\t\t\tdata.find('.relLabel').val(currentTarget.find('option:selected').val());\n\t\t\t\t\t});\n\t\t\t\t\tdata.find('[name=\"type\"]').on('change', function() {\n\t\t\t\t\t\tif ($(this).val() === 'getAttachments') {\n\t\t\t\t\t\t\tdata\n\t\t\t\t\t\t\t\t.find('[name=\"target\"] option')\n\t\t\t\t\t\t\t\t.not('[value=\"Documents\"]')\n\t\t\t\t\t\t\t\t.addClass('d-none');\n\t\t\t\t\t\t\tApp.Fields.Picklist.showSelect2ElementView(data.find('[name=\"target\"]'));\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tdata.find('[name=\"target\"] option').removeClass('d-none');\n\t\t\t\t\t\t\tApp.Fields.Picklist.showSelect2ElementView(data.find('[name=\"target\"]'));\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t\tdata.on('click', '.addButton', function(e) {\n\t\t\t\t\t\tvar form = data.find('form').serializeFormData();\n\t\t\t\t\t\tvar params = {};\n\t\t\t\t\t\tparams['module'] = app.getModuleName();\n\t\t\t\t\t\tparams['parent'] = app.getParentModuleName();\n\t\t\t\t\t\tparams['action'] = 'Relation';\n\t\t\t\t\t\tparams['mode'] = 'addRelation';\n\t\t\t\t\t\t$.extend(params, form);\n\t\t\t\t\t\tAppConnector.request(params).done(function(data) {\n\t\t\t\t\t\t\tthisInstance\n\t\t\t\t\t\t\t\t.getRelModuleLayoutEditor(container.find('[name=\"layoutEditorRelModules\"]').val())\n\t\t\t\t\t\t\t\t.done(function(data) {\n\t\t\t\t\t\t\t\t\tcontentsDiv.html(data);\n\t\t\t\t\t\t\t\t\tthisInstance.registerEvents();\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t});\n\t\t\t\t\t});\n\t\t\t\t};\n\t\t\t\tapp.showModalWindow(addRelationContainer, function(data) {\n\t\t\t\t\tif (typeof callBackFunction == 'function') {\n\t\t\t\t\t\tcallBackFunction(data);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t});\n\t\t},\n\t\tgetSelectedFields: function(target) {\n\t\t\tvar selectedFields = [];\n\t\t\ttarget.find(':selected').each(function(e) {\n\t\t\t\tselectedFields.push({\n\t\t\t\t\tid: $(this).val(),\n\t\t\t\t\tname: $(this).data('field-name') ? $(this).data('field-name') : $(this).data('name')\n\t\t\t\t});\n\t\t\t});\n\t\t\treturn selectedFields;\n\t\t},\n\t\t/**\n\t\t * Function to regiser the event to make the related modules sortable\n\t\t */\n\t\tmakeRelatedModuleSortable: function() {\n\t\t\tvar thisInstance = this;\n\t\t\tvar relatedModulesContainer = $('.relatedModulesList');\n\t\t\tvar modulesList = relatedModulesContainer.find('.relatedModule');\n\t\t\trelatedModulesContainer.sortable({\n\t\t\t\tcontainment: relatedModulesContainer,\n\t\t\t\titems: modulesList,\n\t\t\t\thandle: '.mainBlockTableLabel',\n\t\t\t\trevert: true,\n\t\t\t\ttolerance: 'pointer',\n\t\t\t\tcursor: 'move',\n\t\t\t\tupdate: function(e, ui) {\n\t\t\t\t\tthisInstance.updateSequenceRelatedModule();\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\tchangeRelatedViewType: function(currentTarget) {\n\t\t\tvar relatedModule = currentTarget.closest('.relatedModule');\n\t\t\tAppConnector.request({\n\t\t\t\tmodule: app.getModuleName(),\n\t\t\t\tparent: app.getParentModuleName(),\n\t\t\t\taction: 'Relation',\n\t\t\t\tmode: 'updateRelatedViewType',\n\t\t\t\trelationId: relatedModule.data('relation-id'),\n\t\t\t\ttypes: currentTarget.val()\n\t\t\t})\n\t\t\t\t.done(function(data) {\n\t\t\t\t\tif (data.success) {\n\t\t\t\t\t\tSettings_Vtiger_Index_Js.showMessage({\n\t\t\t\t\t\t\ttext: data.result.text\n\t\t\t\t\t\t});\n\t\t\t\t\t} else {\n\t\t\t\t\t\tSettings_Vtiger_Index_Js.showMessage({\n\t\t\t\t\t\t\ttype: 'error',\n\t\t\t\t\t\t\ttext: data.error.message\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t\t.fail(function(error) {\n\t\t\t\t\tSettings_Vtiger_Index_Js.showMessage({\n\t\t\t\t\t\ttext: error.message\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t},\n\t\tchangeStateFavorites: function(currentTarget) {\n\t\t\tvar relatedModule = currentTarget.closest('.relatedModule');\n\t\t\tvar status = currentTarget.data('state') == 1 ? 0 : 1;\n\t\t\tvar params = {};\n\t\t\tparams['module'] = app.getModuleName();\n\t\t\tparams['parent'] = app.getParentModuleName();\n\t\t\tparams['action'] = 'Relation';\n\t\t\tparams['mode'] = 'updateStateFavorites';\n\t\t\tparams['relationId'] = relatedModule.data('relation-id');\n\t\t\tparams['status'] = status;\n\n\t\t\tAppConnector.request(params)\n\t\t\t\t.done(function(data) {\n\t\t\t\t\tcurrentTarget.data('state', status);\n\t\t\t\t\tif (status) {\n\t\t\t\t\t\tcurrentTarget.find('.far').addClass('d-none');\n\t\t\t\t\t\tcurrentTarget.find('.fas').removeClass('d-none');\n\t\t\t\t\t} else {\n\t\t\t\t\t\tcurrentTarget.find('.fas').addClass('d-none');\n\t\t\t\t\t\tcurrentTarget.find('.far').removeClass('d-none');\n\t\t\t\t\t}\n\t\t\t\t\tSettings_Vtiger_Index_Js.showMessage({ text: app.vtranslate('JS_SAVE_NOTIFY_OK') });\n\t\t\t\t})\n\t\t\t\t.fail(function(error) {\n\t\t\t\t\tvar params = {};\n\t\t\t\t\tparams['text'] = error;\n\t\t\t\t\tSettings_Vtiger_Index_Js.showMessage(params);\n\t\t\t\t});\n\t\t},\n\t\tchangeStatusRelatedModule: function(relationId, status) {\n\t\t\tvar params = {};\n\t\t\tparams['module'] = app.getModuleName();\n\t\t\tparams['parent'] = app.getParentModuleName();\n\t\t\tparams['action'] = 'Relation';\n\t\t\tparams['mode'] = 'changeStatusRelation';\n\t\t\tparams['relationId'] = relationId;\n\t\t\tparams['status'] = status;\n\t\t\tAppConnector.request(params)\n\t\t\t\t.done(function(data) {\n\t\t\t\t\tvar params = {};\n\t\t\t\t\tif (status) {\n\t\t\t\t\t\tparams['text'] = app.vtranslate('JS_SAVED_CHANGE_STATUS_1');\n\t\t\t\t\t} else {\n\t\t\t\t\t\tparams['text'] = app.vtranslate('JS_SAVED_CHANGE_STATUS_0');\n\t\t\t\t\t}\n\t\t\t\t\tSettings_Vtiger_Index_Js.showMessage(params);\n\t\t\t\t})\n\t\t\t\t.fail(function(error) {\n\t\t\t\t\tvar params = {};\n\t\t\t\t\tparams['text'] = error;\n\t\t\t\t\tparams['type'] = 'error';\n\t\t\t\t\tSettings_Vtiger_Index_Js.showMessage(params);\n\t\t\t\t});\n\t\t},\n\t\tremoveRelation: function(relatedModule) {\n\t\t\tvar message = app.vtranslate('JS_DELETE_RELATION_CONFIRMATION');\n\t\t\tVtiger_Helper_Js.showConfirmationBox({ message: message })\n\t\t\t\t.done(function(e) {\n\t\t\t\t\tvar params = {};\n\t\t\t\t\tparams['module'] = app.getModuleName();\n\t\t\t\t\tparams['parent'] = app.getParentModuleName();\n\t\t\t\t\tparams['action'] = 'Relation';\n\t\t\t\t\tparams['mode'] = 'removeRelation';\n\t\t\t\t\tparams['relationId'] = relatedModule.data('relation-id');\n\n\t\t\t\t\tAppConnector.request(params)\n\t\t\t\t\t\t.done(function(data) {\n\t\t\t\t\t\t\tvar params = {};\n\t\t\t\t\t\t\tparams['text'] = app.vtranslate('JS_REMOVE_RELATION_OK');\n\t\t\t\t\t\t\trelatedModule.remove();\n\t\t\t\t\t\t\tSettings_Vtiger_Index_Js.showMessage(params);\n\t\t\t\t\t\t})\n\t\t\t\t\t\t.fail(function(error) {\n\t\t\t\t\t\t\tvar params = {\n\t\t\t\t\t\t\t\ttext: message,\n\t\t\t\t\t\t\t\ttype: 'error'\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\tSettings_Vtiger_Index_Js.showMessage(params);\n\t\t\t\t\t\t});\n\t\t\t\t})\n\t\t\t\t.fail(function(error, err) {});\n\t\t},\n\t\tupdateSequenceRelatedModule: function() {\n\t\t\tvar modules = [];\n\t\t\tvar relatedModulesContainer = $('.relatedModulesList');\n\t\t\tvar params = {};\n\t\t\tvar progressIndicatorElement = $.progressIndicator({\n\t\t\t\tposition: 'html',\n\t\t\t\tblockInfo: {\n\t\t\t\t\tenabled: true\n\t\t\t\t}\n\t\t\t});\n\t\t\trelatedModulesContainer.find('.relatedModule').each(function(index, domElement) {\n\t\t\t\tvar relationId = $(domElement).data('relationId');\n\t\t\t\tmodules.push({ relationId: relationId, index: index });\n\t\t\t});\n\n\t\t\tparams['module'] = app.getModuleName();\n\t\t\tparams['parent'] = app.getParentModuleName();\n\t\t\tparams['action'] = 'Relation';\n\t\t\tparams['mode'] = 'updateSequenceRelatedModule';\n\t\t\tparams['modules'] = modules;\n\n\t\t\tAppConnector.request(params)\n\t\t\t\t.done(function(data) {\n\t\t\t\t\tprogressIndicatorElement.progressIndicator({ mode: 'hide' });\n\t\t\t\t\tvar params = {};\n\t\t\t\t\tparams['text'] = app.vtranslate('JS_UPDATE_SEQUENCE');\n\t\t\t\t\tSettings_Vtiger_Index_Js.showMessage(params);\n\t\t\t\t})\n\t\t\t\t.fail(function(error) {\n\t\t\t\t\tprogressIndicatorElement.progressIndicator({ mode: 'hide' });\n\t\t\t\t\tvar params = {};\n\t\t\t\t\tparams['text'] = error;\n\t\t\t\t\tSettings_Vtiger_Index_Js.showMessage(params);\n\t\t\t\t});\n\t\t},\n\t\tupdateSelectedFields: function(target) {\n\t\t\tconst thisInstance = this;\n\t\t\tlet params = {},\n\t\t\t\trelatedModule = $(target).closest('.relatedModule'),\n\t\t\t\tprogressIndicatorElement = $.progressIndicator({\n\t\t\t\t\tposition: 'html',\n\t\t\t\t\tblockInfo: {\n\t\t\t\t\t\tenabled: true\n\t\t\t\t\t}\n\t\t\t\t}),\n\t\t\t\tselectedFields;\n\t\t\tif ($(target).data('type') == 'inventory') {\n\t\t\t\tparams['inventory'] = true;\n\t\t\t\tselectedFields = $(target).val();\n\t\t\t} else {\n\t\t\t\tselectedFields = thisInstance.getSelectedFields($(target));\n\t\t\t}\n\t\t\tparams['module'] = app.getModuleName();\n\t\t\tparams['parent'] = app.getParentModuleName();\n\t\t\tparams['action'] = 'Relation';\n\t\t\tparams['mode'] = 'updateSelectedFields';\n\t\t\tparams['relationId'] = relatedModule.data('relation-id');\n\t\t\tparams['fields'] = selectedFields;\n\t\t\tAppConnector.request(params)\n\t\t\t\t.done(function() {\n\t\t\t\t\tprogressIndicatorElement.progressIndicator({ mode: 'hide' });\n\t\t\t\t\tlet params = {};\n\t\t\t\t\tparams['text'] = app.vtranslate('JS_UPDATED_FIELD_LIST_MODULE_RELATED');\n\t\t\t\t\tSettings_Vtiger_Index_Js.showMessage(params);\n\t\t\t\t})\n\t\t\t\t.fail(function(error) {\n\t\t\t\t\tprogressIndicatorElement.progressIndicator({ mode: 'hide' });\n\t\t\t\t\tlet params = {};\n\t\t\t\t\tparams['text'] = error;\n\t\t\t\t\tSettings_Vtiger_Index_Js.showMessage(params);\n\t\t\t\t});\n\t\t},\n\t\t/**\n\t\t * Function to regiser the event to make the fields sortable\n\t\t */\n\t\tmakeFieldsListSortable: function() {\n\t\t\tvar thisInstance = this;\n\t\t\tvar contents = $('#layoutEditorContainer').find('.contents');\n\t\t\tvar table = contents.find('.editFieldsTable');\n\t\t\ttable.each(function() {\n\t\t\t\tvar containment = $(this).closest('.moduleBlocks');\n\t\t\t\t$(this)\n\t\t\t\t\t.find('ul[name=sortable1], ul[name=sortable2]')\n\t\t\t\t\t.sortable({\n\t\t\t\t\t\tcontainment: containment,\n\t\t\t\t\t\ttolerance: 'pointer',\n\t\t\t\t\t\tcursor: 'move',\n\t\t\t\t\t\tconnectWith: containment.find('.connectedSortable'),\n\t\t\t\t\t\tupdate: function(e, ui) {\n\t\t\t\t\t\t\tvar currentField = ui['item'];\n\t\t\t\t\t\t\tif (currentField.closest('.moduleBlocks').hasClass('inventoryBlock')) {\n\t\t\t\t\t\t\t\tthisInstance.showSaveFieldSequenceButton(currentField.closest('.editFieldsTable'));\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tthisInstance.showSaveFieldSequenceButton(thisInstance.getDetailViewLayout());\n\t\t\t\t\t\t\t\tthisInstance.createUpdatedBlocksList(currentField);\n\t\t\t\t\t\t\t\t// rearrange the older block fields\n\t\t\t\t\t\t\t\tif (ui.sender) {\n\t\t\t\t\t\t\t\t\tvar olderBlock = ui.sender.closest('.editFieldsTable');\n\t\t\t\t\t\t\t\t\tthisInstance.reArrangeBlockFields(olderBlock);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t});\n\t\t},\n\t\tgetDetailViewLayout: function() {\n\t\t\treturn $('#detailViewLayout');\n\t\t},\n\t\tgetInventoryViewLayout: function() {\n\t\t\treturn $('#inventoryViewLayout');\n\t\t},\n\t\t/**\n\t\t * Function to show the save button of fieldSequence\n\t\t */\n\t\tshowSaveFieldSequenceButton: function(layout) {\n\t\t\tvar thisInstance = this;\n\t\t\tvar saveButton = layout.find('.saveFieldSequence');\n\t\t\tif (app.isHidden(saveButton) || app.isInvisible(saveButton)) {\n\t\t\t\tif (!saveButton.hasClass('inventorySequence')) {\n\t\t\t\t\tthisInstance.updatedBlocksList = [];\n\t\t\t\t\tthisInstance.updatedBlockFieldsList = [];\n\t\t\t\t}\n\t\t\t\tsaveButton.removeClass('d-none');\n\t\t\t\tsaveButton.removeClass('invisible');\n\t\t\t\tvar params = {};\n\t\t\t\tparams['text'] = app.vtranslate('JS_SAVE_THE_CHANGES_TO_UPDATE_FIELD_SEQUENCE');\n\t\t\t\tSettings_Vtiger_Index_Js.showMessage(params);\n\t\t\t}\n\t\t},\n\t\t/**\n\t\t * Function which will hide the saveFieldSequence button\n\t\t */\n\t\thideSaveFieldSequenceButton: function() {\n\t\t\tvar layout = $('#detailViewLayout');\n\t\t\tvar saveButton = layout.find('.saveFieldSequence');\n\t\t\tsaveButton.addClass('d-none');\n\t\t},\n\t\t/**\n\t\t * Function to create the blocks list which are updated while sorting\n\t\t */\n\t\tcreateUpdatedBlocksList: function(currentField) {\n\t\t\tvar thisInstance = this;\n\t\t\tvar block = currentField.closest('.editFieldsTable');\n\t\t\tvar updatedBlockId = block.data('blockId');\n\t\t\tif ($.inArray(updatedBlockId, thisInstance.updatedBlocksList) == -1) {\n\t\t\t\tthisInstance.updatedBlocksList.push(updatedBlockId);\n\t\t\t}\n\t\t\tthisInstance.reArrangeBlockFields(block);\n\t\t},\n\t\t/**\n\t\t * Function that rearranges fields in the block when the fields are moved\n\t\t * @param <jQuery object> block\n\t\t */\n\t\treArrangeBlockFields: function(block) {\n\t\t\t// 1.get the containers, 2.compare the length, 3.if uneven then move the last element\n\t\t\tvar leftSideContainer = block.find('ul[name=sortable1]');\n\t\t\tvar rightSideContainer = block.find('ul[name=sortable2]');\n\t\t\tif (leftSideContainer.children().length < rightSideContainer.children().length) {\n\t\t\t\tvar lastElementInRightContainer = rightSideContainer.children(':last');\n\t\t\t\tleftSideContainer.append(lastElementInRightContainer);\n\t\t\t} else if (leftSideContainer.children().length > rightSideContainer.children().length + 1) {\n\t\t\t\t//greater than 1\n\t\t\t\tvar lastElementInLeftContainer = leftSideContainer.children(':last');\n\t\t\t\trightSideContainer.append(lastElementInLeftContainer);\n\t\t\t}\n\t\t},\n\t\t/**\n\t\t * Function to create the list of updated blocks with all the fields and their sequences\n\t\t */\n\t\tcreateUpdatedBlockFieldsList: function() {\n\t\t\tvar thisInstance = this;\n\t\t\tvar contents = $('#layoutEditorContainer').find('.contents');\n\n\t\t\tfor (var index in thisInstance.updatedBlocksList) {\n\t\t\t\tvar updatedBlockId = thisInstance.updatedBlocksList[index];\n\t\t\t\tvar updatedBlock = contents.find('.block_' + updatedBlockId);\n\t\t\t\tvar firstBlockSortFields = updatedBlock.find('ul[name=sortable1]');\n\t\t\t\tvar editFields = firstBlockSortFields.find('.editFields');\n\t\t\t\tvar expectedFieldSequence = 1;\n\t\t\t\teditFields.each(function(i, domElement) {\n\t\t\t\t\tvar fieldEle = $(domElement);\n\t\t\t\t\tvar fieldId = fieldEle.data('fieldId');\n\t\t\t\t\tthisInstance.updatedBlockFieldsList.push({\n\t\t\t\t\t\tfieldid: fieldId,\n\t\t\t\t\t\tsequence: expectedFieldSequence,\n\t\t\t\t\t\tblock: updatedBlockId\n\t\t\t\t\t});\n\t\t\t\t\texpectedFieldSequence = expectedFieldSequence + 2;\n\t\t\t\t});\n\t\t\t\tvar secondBlockSortFields = updatedBlock.find('ul[name=sortable2]');\n\t\t\t\tvar secondEditFields = secondBlockSortFields.find('.editFields');\n\t\t\t\tvar sequenceValue = 2;\n\t\t\t\tsecondEditFields.each(function(i, domElement) {\n\t\t\t\t\tvar fieldEle = $(domElement);\n\t\t\t\t\tvar fieldId = fieldEle.data('fieldId');\n\t\t\t\t\tthisInstance.updatedBlockFieldsList.push({\n\t\t\t\t\t\tfieldid: fieldId,\n\t\t\t\t\t\tsequence: sequenceValue,\n\t\t\t\t\t\tblock: updatedBlockId\n\t\t\t\t\t});\n\t\t\t\t\tsequenceValue = sequenceValue + 2;\n\t\t\t\t});\n\t\t\t}\n\t\t},\n\t\t/**\n\t\t * Function to register click event for save button of fields sequence\n\t\t */\n\t\tregisterFieldSequenceSaveClick: function() {\n\t\t\tthis.getDetailViewLayout().find('.saveFieldSequence').on('click', () => {\n\t\t\t\t\tthis.hideSaveFieldSequenceButton();\n\t\t\t\t\tthis.createUpdatedBlockFieldsList();\n\t\t\t\t\tthis.updateFieldSequence();\n\t\t\t\t});\n\t\t},\n\t\t/**\n\t\t * Function will save the field sequences\n\t\t */\n\t\tupdateFieldSequence: function() {\n\t\t\tvar thisInstance = this;\n\t\t\tvar progressIndicatorElement = $.progressIndicator({\n\t\t\t\tposition: 'html',\n\t\t\t\tblockInfo: {\n\t\t\t\t\tenabled: true\n\t\t\t\t}\n\t\t\t});\n\t\t\tvar params = {};\n\t\t\tparams['module'] = app.getModuleName();\n\t\t\tparams['parent'] = app.getParentModuleName();\n\t\t\tparams['action'] = 'Field';\n\t\t\tparams['mode'] = 'move';\n\t\t\tparams['updatedFields'] = thisInstance.updatedBlockFieldsList;\n\n\t\t\tAppConnector.request(params)\n\t\t\t\t.done(function(data) {\n\t\t\t\t\tprogressIndicatorElement.progressIndicator({ mode: 'hide' });\n\t\t\t\t\twindow.location.reload();\n\t\t\t\t\tvar params = {};\n\t\t\t\t\tparams['text'] = app.vtranslate('JS_FIELD_SEQUENCE_UPDATED');\n\t\t\t\t\tSettings_Vtiger_Index_Js.showMessage(params);\n\t\t\t\t})\n\t\t\t\t.fail(function(error) {\n\t\t\t\t\tprogressIndicatorElement.progressIndicator({ mode: 'hide' });\n\t\t\t\t});\n\t\t},\n\t\t/**\n\t\t * Function to register click evnet add custom field button\n\t\t */\n\t\tregisterAddCustomFieldEvent() {\n\t\t\tlet container = $('#layoutEditorContainer'),\n\t\t\t\tcontents = container.find('.contents');\n\t\t\tcontents.find('.addCustomField').on('click', e => {\n\t\t\t\tlet blockId = $(e.currentTarget)\n\t\t\t\t\t\t.closest('.editFieldsTable')\n\t\t\t\t\t\t.data('blockId'),\n\t\t\t\t\taddFieldContainer = container.find('.createFieldModal').clone(true, true);\n\t\t\t\taddFieldContainer.removeClass('d-none').show();\n\t\t\t\tlet callBackFunction = data => {\n\t\t\t\t\t//register all select2 Elements\n\t\t\t\t\tApp.Fields.Picklist.showSelect2ElementView(data.find('select'), { width: '100%' });\n\n\t\t\t\t\tlet form = data.find('.createCustomFieldForm');\n\t\t\t\t\tform.attr('id', 'createFieldForm');\n\t\t\t\t\tApp.Fields.Picklist.showSelect2ElementView(form.find('[name=\"pickListValues\"]'), {\n\t\t\t\t\t\ttags: true,\n\t\t\t\t\t\ttokenSeparators: [',']\n\t\t\t\t\t});\n\t\t\t\t\tthis.registerFieldTypeChangeEvent(form);\n\t\t\t\t\tthis.registerMultiReferenceFieldsChangeEvent(form);\n\t\t\t\t\tthis.registerMultiReferenceFilterFieldChangeEvent(form);\n\n\t\t\t\t\tlet params = app.getvalidationEngineOptions(true);\n\t\t\t\t\tparams.onValidationComplete = (form, valid) => {\n\t\t\t\t\t\tif (valid) {\n\t\t\t\t\t\t\tlet fieldTypeValue = $('[name=\"fieldType\"]', form).val(),\n\t\t\t\t\t\t\t\tfieldNameValue = $('[name=\"fieldName\"]', form).val(),\n\t\t\t\t\t\t\t\tmessage;\n\n\t\t\t\t\t\t\tif (fieldTypeValue == 'Picklist' || fieldTypeValue == 'MultiSelectCombo') {\n\t\t\t\t\t\t\t\tlet pickListValueElement = $('#pickListValues', form),\n\t\t\t\t\t\t\t\t\tpickListValuesArray = pickListValueElement.val(),\n\t\t\t\t\t\t\t\t\tpickListValuesArraySize = pickListValuesArray.length,\n\t\t\t\t\t\t\t\t\ti,\n\t\t\t\t\t\t\t\t\tselect2Element,\n\t\t\t\t\t\t\t\t\tspecialChars = /[\"]/;\n\t\t\t\t\t\t\t\tif (fieldNameValue.toLowerCase() === 'status' || 'picklist' === fieldNameValue.toLowerCase()) {\n\t\t\t\t\t\t\t\t\tmessage = app.vtranslate('JS_RESERVED_PICKLIST_NAME');\n\t\t\t\t\t\t\t\t\t$('[name=\"fieldName\"]', form).validationEngine('showPrompt', message, 'error', 'bottomLeft', true);\n\t\t\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tfor (i = 0; i < pickListValuesArray.length; i++) {\n\t\t\t\t\t\t\t\t\tif (specialChars.test(pickListValuesArray[i])) {\n\t\t\t\t\t\t\t\t\t\tselect2Element = app.getSelect2ElementFromSelect(pickListValueElement);\n\t\t\t\t\t\t\t\t\t\tmessage = app.vtranslate('JS_SPECIAL_CHARACTERS') + ' \" ' + app.vtranslate('JS_NOT_ALLOWED');\n\t\t\t\t\t\t\t\t\t\tselect2Element.validationEngine('showPrompt', message, 'error', 'bottomLeft', true);\n\t\t\t\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tlet lowerCasedpickListValuesArray = $.map(pickListValuesArray, (item, index) => {\n\t\t\t\t\t\t\t\t\t\treturn item.toLowerCase();\n\t\t\t\t\t\t\t\t\t}),\n\t\t\t\t\t\t\t\t\tuniqueLowerCasedpickListValuesArray = $.uniqueSort(lowerCasedpickListValuesArray),\n\t\t\t\t\t\t\t\t\tuniqueLowerCasedpickListValuesArraySize = uniqueLowerCasedpickListValuesArray.length,\n\t\t\t\t\t\t\t\t\tarrayDiffSize = pickListValuesArraySize - uniqueLowerCasedpickListValuesArraySize;\n\t\t\t\t\t\t\t\tif (arrayDiffSize > 0) {\n\t\t\t\t\t\t\t\t\tselect2Element = app.getSelect2ElementFromSelect(pickListValueElement);\n\t\t\t\t\t\t\t\t\tmessage = app.vtranslate('JS_DUPLICATES_VALUES_FOUND');\n\t\t\t\t\t\t\t\t\tselect2Element.validationEngine('showPrompt', message, 'error', 'bottomLeft', true);\n\t\t\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif (fieldTypeValue == 'Tree' || fieldTypeValue == 'CategoryMultipicklist') {\n\t\t\t\t\t\t\t\tlet treeListElement = form.find('select.TreeList');\n\t\t\t\t\t\t\t\tif (treeListElement.val() == '-') {\n\t\t\t\t\t\t\t\t\tmessage = app.vtranslate('JS_FIELD_CAN_NOT_BE_EMPTY');\n\t\t\t\t\t\t\t\t\tform.find('.TreeList').validationEngine('showPrompt', message, 'error', 'bottomLeft', true);\n\t\t\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif (fieldTypeValue == 'ServerAccess') {\n\t\t\t\t\t\t\t\tlet serverListElement = form.find('select[name=\"server\"]');\n\t\t\t\t\t\t\t\tif (serverListElement.val() == '-') {\n\t\t\t\t\t\t\t\t\tmessage = app.vtranslate('JS_FIELD_CAN_NOT_BE_EMPTY');\n\t\t\t\t\t\t\t\t\tserverListElement.validationEngine('showPrompt', message, 'error', 'bottomLeft', true);\n\t\t\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tlet saveButton = form.find(':submit');\n\t\t\t\t\t\t\tsaveButton.attr('disabled', 'disabled');\n\t\t\t\t\t\t\tthis.addCustomField(blockId, form).done(data => {\n\t\t\t\t\t\t\t\tlet result = data['result'],\n\t\t\t\t\t\t\t\t\tparams = {};\n\t\t\t\t\t\t\t\tif (data['success']) {\n\t\t\t\t\t\t\t\t\tapp.hideModalWindow();\n\t\t\t\t\t\t\t\t\tparams['text'] = app.vtranslate('JS_CUSTOM_FIELD_ADDED');\n\t\t\t\t\t\t\t\t\tSettings_Vtiger_Index_Js.showMessage(params);\n\t\t\t\t\t\t\t\t\tthis.showCustomField(result);\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\tmessage = data['error']['message'];\n\t\t\t\t\t\t\t\t\tVtiger_Helper_Js.showPnotify({\n\t\t\t\t\t\t\t\t\t\ttitle:\n\t\t\t\t\t\t\t\t\t\t\tdata['error']['code'] != 513\n\t\t\t\t\t\t\t\t\t\t\t\t? form.find('.fieldNameForm').text()\n\t\t\t\t\t\t\t\t\t\t\t\t: form.find('.fieldLabelForm').text(),\n\t\t\t\t\t\t\t\t\t\ttype: 'error',\n\t\t\t\t\t\t\t\t\t\ttext: data['error']['message']\n\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\tsaveButton.removeAttr('disabled');\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t\t//To prevent form submit\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t};\n\t\t\t\t\tform.validationEngine(params);\n\t\t\t\t};\n\n\t\t\t\tapp.showModalWindow(\n\t\t\t\t\taddFieldContainer,\n\t\t\t\t\tdata => {\n\t\t\t\t\t\tif (typeof callBackFunction == 'function') {\n\t\t\t\t\t\t\tcallBackFunction(data);\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\t{ width: '1000px' }\n\t\t\t\t);\n\t\t\t});\n\t\t},\n\t\t/**\n\t\t * Function to create the array of block names list\n\t\t */\n\t\tsetBlocksListArray: function(form) {\n\t\t\tvar thisInstance = this;\n\t\t\tthisInstance.blockNamesList = [];\n\t\t\tvar blocksListSelect = form.find('[name=\"beforeBlockId\"]');\n\t\t\tblocksListSelect.find('option').each(function(index, ele) {\n\t\t\t\tvar option = $(ele);\n\t\t\t\tvar label = option.data('label');\n\t\t\t\tthisInstance.blockNamesList.push(label);\n\t\t\t});\n\t\t},\n\t\t/**\n\t\t * Function to save the custom field details\n\t\t */\n\t\taddCustomField: function(blockId, form) {\n\t\t\tvar modalHeader = form.closest('#' + Window.lastModalId).find('.modal-header h3');\n\t\t\tvar aDeferred = $.Deferred();\n\n\t\t\tmodalHeader.progressIndicator({\n\t\t\t\tsmallLoadingImage: true,\n\t\t\t\timageContainerCss: { display: 'inline', 'margin-left': '18%', position: 'absolute' }\n\t\t\t});\n\n\t\t\tvar params = form.serializeFormData();\n\t\t\tparams['module'] = app.getModuleName();\n\t\t\tparams['parent'] = app.getParentModuleName();\n\t\t\tparams['action'] = 'Field';\n\t\t\tparams['mode'] = 'add';\n\t\t\tparams['blockid'] = blockId;\n\t\t\tparams['sourceModule'] = $('#selectedModuleName').val();\n\n\t\t\tAppConnector.request(params)\n\t\t\t\t.done(function(data) {\n\t\t\t\t\tmodalHeader.progressIndicator({ mode: 'hide' });\n\t\t\t\t\taDeferred.resolve(data);\n\t\t\t\t})\n\t\t\t\t.fail(function(err, error, errorObj) {\n\t\t\t\t\tmodalHeader.progressIndicator({ mode: 'hide' });\n\t\t\t\t\tif (errorObj.responseText !== undefined) {\n\t\t\t\t\t\tapp.showNotify({ title: JSON.parse(errorObj.responseText).error.message, type: 'error' });\n\t\t\t\t\t}\n\t\t\t\t\taDeferred.reject(error);\n\t\t\t\t});\n\t\t\treturn aDeferred.promise();\n\t\t},\n\t\t/**\n\t\t * Function to register change event for fieldType while adding custom field\n\t\t */\n\t\tregisterFieldTypeChangeEvent(form) {\n\t\t\tvar thisInstance = this;\n\t\t\tvar lengthInput = form.find('[name=\"fieldLength\"]');\n\n\t\t\t//special validators while adding new field\n\t\t\tvar lengthValidator = [{ name: 'DecimalMaxLength' }];\n\t\t\tvar maxLengthValidator = [{ name: 'MaxLength' }];\n\t\t\tvar decimalValidator = [{ name: 'FloatingDigits' }];\n\n\t\t\t//By default add the max length validator\n\t\t\tlengthInput.data('validator', maxLengthValidator);\n\n\t\t\t//register the change event for field types\n\t\t\tform.find('[name=\"fieldType\"]').on('change', function(e) {\n\t\t\t\tvar currentTarget = $(e.currentTarget);\n\t\t\t\tvar lengthInput = form.find('[name=\"fieldLength\"]');\n\t\t\t\tvar selectedOption = currentTarget.find('option:selected');\n\n\t\t\t\t//hide all the elements like length, decimal,picklist\n\t\t\t\tform.find('.supportedType').addClass('d-none');\n\t\t\t\tif (selectedOption.data('lengthsupported')) {\n\t\t\t\t\tform.find('.lengthsupported').removeClass('d-none');\n\t\t\t\t\tif (!selectedOption.data('nolimitforlength')) {\n\t\t\t\t\t\tlengthInput.data('validator', maxLengthValidator);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tlengthInput.data('validator', [{ name: 'WholeNumberGreaterThanZero' }]);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (selectedOption.data('decimalsupported')) {\n\t\t\t\t\tvar decimalFieldUi = form.find('.decimalsupported');\n\t\t\t\t\tdecimalFieldUi.removeClass('d-none');\n\n\t\t\t\t\tvar decimalInput = decimalFieldUi.find('[name=\"decimal\"]');\n\t\t\t\t\tvar maxFloatingDigits = selectedOption.data('maxfloatingdigits');\n\n\t\t\t\t\tif (typeof maxFloatingDigits !== 'undefined') {\n\t\t\t\t\t\tdecimalInput.data('validator', decimalValidator);\n\t\t\t\t\t\tlengthInput.data('validator', lengthValidator);\n\t\t\t\t\t}\n\n\t\t\t\t\tif (selectedOption.data('decimalreadonly')) {\n\t\t\t\t\t\tdecimalInput.val(maxFloatingDigits).attr('readonly', true);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tdecimalInput.removeAttr('readonly').val('');\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (selectedOption.data('predefinedvalueexists')) {\n\t\t\t\t\tvar pickListUi = form.find('.preDefinedValueExists');\n\t\t\t\t\tpickListUi.removeClass('d-none');\n\t\t\t\t}\n\t\t\t\tif (selectedOption.data('picklistoption')) {\n\t\t\t\t\tvar pickListOption = form.find('.picklistOption');\n\t\t\t\t\tpickListOption.removeClass('d-none');\n\t\t\t\t}\n\t\t\t\tif (selectedOption.val() == 'Related1M') {\n\t\t\t\t\tform.find('.preDefinedModuleList').removeClass('d-none');\n\t\t\t\t}\n\t\t\t\tif (selectedOption.val() == 'Tree' || selectedOption.val() == 'CategoryMultipicklist') {\n\t\t\t\t\tform.find('.preDefinedTreeList').removeClass('d-none');\n\t\t\t\t}\n\t\t\t\tif (selectedOption.val() == 'ServerAccess') {\n\t\t\t\t\tform.find('.js-server-access-list').removeClass('d-none');\n\t\t\t\t}\n\t\t\t\tif (selectedOption.val() == 'MultiReferenceValue') {\n\t\t\t\t\tform.find('.preMultiReferenceValue').removeClass('d-none');\n\t\t\t\t\tthisInstance.loadMultiReferenceFields(form);\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\t/**\n\t\t * Function to add new custom field ui to the list\n\t\t */\n\t\tshowCustomField: function(result) {\n\t\t\tvar thisInstance = this;\n\t\t\tvar contents = $('#layoutEditorContainer').find('.contents');\n\t\t\tvar relatedBlock = contents.find('.block_' + result['blockid']);\n\t\t\tvar fieldCopy = contents.find('.newCustomFieldCopy').clone(true, true);\n\t\t\tvar fieldContainer = fieldCopy.find('div.marginLeftZero.border1px');\n\t\t\tfieldContainer\n\t\t\t\t.addClass('opacity editFields')\n\t\t\t\t.attr('data-field-id', result['id'])\n\t\t\t\t.attr('data-block-id', result['blockid']);\n\t\t\tfieldContainer.find('.deleteCustomField, .saveFieldDetails').attr('data-field-id', result['id']);\n\t\t\tfieldContainer.find('.fieldLabel').html(result['label'] + ' [' + result['name'] + ']');\n\t\t\tfieldContainer\n\t\t\t\t.find('#relatedFieldValue')\n\t\t\t\t.val(result['name'])\n\t\t\t\t.prop('id', 'relatedFieldValue' + result['id']);\n\t\t\tfieldContainer.find('.copyFieldLabel').attr('data-target', 'relatedFieldValue' + result['id']);\n\t\t\tthisInstance.registerCopyClipboard();\n\t\t\tif (!result['customField']) {\n\t\t\t\tfieldContainer.find('.deleteCustomField').remove();\n\t\t\t}\n\t\t\tif ($.inArray(result['type'], ['string', 'phone', 'currency', 'url', 'integer', 'double']) == -1) {\n\t\t\t\tfieldContainer.find('.maskField').remove();\n\t\t\t}\n\t\t\tvar block = relatedBlock.find('.blockFieldsList');\n\t\t\tvar sortable1 = block.find('.js-sort-table1');\n\t\t\tvar length1 = sortable1.children().length;\n\t\t\tvar sortable2 = block.find('.js-sort-table2');\n\t\t\tvar length2 = sortable2.children().length;\n\t\t\t// Deciding where to add the new field\n\t\t\tif (length1 > length2) {\n\t\t\t\tsortable2.append(fieldCopy.removeClass('d-none newCustomFieldCopy'));\n\t\t\t} else {\n\t\t\t\tsortable1.append(fieldCopy.removeClass('d-none newCustomFieldCopy'));\n\t\t\t}\n\t\t\tthisInstance.makeFieldsListSortable();\n\t\t},\n\t\t/**\n\t\t * Function to register click event for add custom block button\n\t\t */\n\t\tregisterAddCustomBlockEvent: function() {\n\t\t\tvar thisInstance = this;\n\t\t\tvar contents = $('#layoutEditorContainer').find('.contents');\n\t\t\tcontents.find('.addCustomBlock').on('click', function(e) {\n\t\t\t\tvar addBlockContainer = contents.find('.addBlockModal').clone(true, true);\n\n\t\t\t\tvar callBackFunction = function(data) {\n\t\t\t\t\tdata\n\t\t\t\t\t\t.find('.addBlockModal')\n\t\t\t\t\t\t.removeClass('d-none')\n\t\t\t\t\t\t.show();\n\t\t\t\t\t//register all select2 Elements\n\t\t\t\t\tApp.Fields.Picklist.showSelect2ElementView(data.find('select'));\n\n\t\t\t\t\tvar form = data.find('.addCustomBlockForm');\n\t\t\t\t\tthisInstance.setBlocksListArray(form);\n\t\t\t\t\tvar fieldLabel = form.find('[name=\"label\"]');\n\t\t\t\t\tvar params = Object.create(app.validationEngineOptions);\n\t\t\t\t\tparams.onValidationComplete = function(form, valid) {\n\t\t\t\t\t\tif (valid) {\n\t\t\t\t\t\t\tvar formData = form.serializeFormData();\n\t\t\t\t\t\t\tif ($.inArray(formData['label'], thisInstance.blockNamesList) == -1) {\n\t\t\t\t\t\t\t\tthisInstance.saveBlockDetails(form).done(function(data) {\n\t\t\t\t\t\t\t\t\tvar params = {};\n\t\t\t\t\t\t\t\t\tif (data['success']) {\n\t\t\t\t\t\t\t\t\t\tvar result = data['result'];\n\t\t\t\t\t\t\t\t\t\tthisInstance.displayNewCustomBlock(result);\n\t\t\t\t\t\t\t\t\t\tthisInstance.updateNewSequenceForBlocks(result['sequenceList']);\n\t\t\t\t\t\t\t\t\t\tthisInstance.appendNewBlockToBlocksList(result, form);\n\t\t\t\t\t\t\t\t\t\tthisInstance.makeFieldsListSortable();\n\n\t\t\t\t\t\t\t\t\t\tparams['text'] = app.vtranslate('JS_CUSTOM_BLOCK_ADDED');\n\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\tparams['text'] = data['error']['message'];\n\t\t\t\t\t\t\t\t\t\tparams['type'] = 'error';\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tSettings_Vtiger_Index_Js.showMessage(params);\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\tapp.hideModalWindow();\n\t\t\t\t\t\t\t\treturn valid;\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tvar result = app.vtranslate('JS_BLOCK_NAME_EXISTS');\n\t\t\t\t\t\t\t\tfieldLabel.validationEngine('showPrompt', result, 'error', 'topLeft', true);\n\t\t\t\t\t\t\t\te.preventDefault();\n\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t};\n\t\t\t\t\tform.validationEngine(params);\n\n\t\t\t\t\tform.on('submit', function(e) {\n\t\t\t\t\t\te.preventDefault();\n\t\t\t\t\t});\n\t\t\t\t};\n\t\t\t\tapp.showModalWindow(\n\t\t\t\t\taddBlockContainer,\n\t\t\t\t\tfunction(data) {\n\t\t\t\t\t\tif (typeof callBackFunction == 'function') {\n\t\t\t\t\t\t\tcallBackFunction(data);\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\t{ width: '1000px' }\n\t\t\t\t);\n\t\t\t});\n\t\t},\n\t\t/**\n\t\t * Function to save the new custom block details\n\t\t */\n\t\tsaveBlockDetails: function(form) {\n\t\t\tvar aDeferred = $.Deferred();\n\t\t\tvar progressIndicatorElement = $.progressIndicator({\n\t\t\t\tposition: 'html',\n\t\t\t\tblockInfo: {\n\t\t\t\t\tenabled: true\n\t\t\t\t}\n\t\t\t});\n\t\t\tvar params = form.serializeFormData();\n\t\t\tparams['module'] = app.getModuleName();\n\t\t\tparams['parent'] = app.getParentModuleName();\n\t\t\tparams['sourceModule'] = $('#selectedModuleName').val();\n\t\t\tparams['action'] = 'Block';\n\t\t\tparams['mode'] = 'save';\n\n\t\t\tAppConnector.request(params)\n\t\t\t\t.done(function(data) {\n\t\t\t\t\tprogressIndicatorElement.progressIndicator({ mode: 'hide' });\n\t\t\t\t\taDeferred.resolve(data);\n\t\t\t\t})\n\t\t\t\t.fail(function(error) {\n\t\t\t\t\tprogressIndicatorElement.progressIndicator({ mode: 'hide' });\n\t\t\t\t\taDeferred.reject(error);\n\t\t\t\t});\n\t\t\treturn aDeferred.promise();\n\t\t},\n\t\t/**\n\t\t * Function used to display the new custom block ui after save\n\t\t */\n\t\tdisplayNewCustomBlock: function(result) {\n\t\t\tvar contents = $('#layoutEditorContainer').find('.contents');\n\t\t\tvar beforeBlockId = result['beforeBlockId'];\n\t\t\tvar beforeBlock = contents.find('.block_' + beforeBlockId);\n\n\t\t\tvar newBlockCloneCopy = contents.find('.newCustomBlockCopy').clone(true, true);\n\t\t\tnewBlockCloneCopy\n\t\t\t\t.data('blockId', result['id'])\n\t\t\t\t.find('.blockLabel')\n\t\t\t\t.append($('<strong class=\"align-middle\">' + result['label'] + '</strong>'));\n\t\t\tnewBlockCloneCopy.find('.js-block-visibility').data('blockId', result['id']);\n\t\t\tif (result['isAddCustomFieldEnabled']) {\n\t\t\t\tnewBlockCloneCopy.find('.addCustomField').removeClass('d-none');\n\t\t\t}\n\t\t\tbeforeBlock.after(\n\t\t\t\tnewBlockCloneCopy.removeClass('d-none newCustomBlockCopy').addClass('editFieldsTable block_' + result['id'])\n\t\t\t);\n\n\t\t\tnewBlockCloneCopy.find('.blockFieldsList').sortable({ connectWith: '.blockFieldsList' });\n\t\t},\n\t\t/**\n\t\t * Function to update the sequence for all blocks after adding new Block\n\t\t */\n\t\tupdateNewSequenceForBlocks: function(sequenceList) {\n\t\t\tvar contents = $('#layoutEditorContainer').find('.contents');\n\t\t\t$.each(sequenceList, function(blockId, sequence) {\n\t\t\t\tcontents.find('.block_' + blockId).data('sequence', sequence);\n\t\t\t});\n\t\t},\n\t\t/**\n\t\t * Function to update the block list with the new block label in the clone container\n\t\t */\n\t\tappendNewBlockToBlocksList: function(result, form) {\n\t\t\tvar contents = $('#layoutEditorContainer').find('.contents');\n\t\t\tvar hiddenAddBlockModel = contents.find('.addBlockModal');\n\t\t\tvar blocksListSelect = hiddenAddBlockModel.find('[name=\"beforeBlockId\"]');\n\t\t\tvar option = $('<option>', {\n\t\t\t\tvalue: result['id'],\n\t\t\t\ttext: result['label']\n\t\t\t});\n\t\t\tblocksListSelect.append(option.attr('data-label', result['label']));\n\t\t},\n\t\t/**\n\t\t * Function to update the block list to remove the deleted custom block label in the clone container\n\t\t */\n\t\tremoveBlockFromBlocksList: function(blockId) {\n\t\t\tvar contents = $('#layoutEditorContainer').find('.contents');\n\t\t\tvar hiddenAddBlockModel = contents.find('.addBlockModal');\n\t\t\tvar blocksListSelect = hiddenAddBlockModel.find('[name=\"beforeBlockId\"]');\n\t\t\tblocksListSelect.find('option[value=\"' + blockId + '\"]').remove();\n\t\t},\n\t\t/**\n\t\t * Function to register the change event for block visibility\n\t\t */\n\t\tregisterBlockVisibilityEvent: function() {\n\t\t\tvar thisInstance = this;\n\t\t\tvar contents = $('#layoutEditorContainer').find('.contents');\n\t\t\tcontents.on('click', '.js-block-visibility', function(e) {\n\t\t\t\tvar currentTarget = $(e.currentTarget);\n\t\t\t\tthisInstance.updateBlockStatus(currentTarget);\n\t\t\t});\n\t\t},\n\t\t/**\n\t\t * Function to save the changed visibility for the block\n\t\t */\n\t\tupdateBlockStatus: function(currentTarget) {\n\t\t\tvar blockStatus = currentTarget.data('visible');\n\t\t\tvar progressIndicatorElement = $.progressIndicator({\n\t\t\t\tposition: 'html',\n\t\t\t\tblockInfo: {\n\t\t\t\t\tenabled: true\n\t\t\t\t}\n\t\t\t});\n\t\t\tvar params = {};\n\t\t\tparams['module'] = app.getModuleName();\n\t\t\tparams['parent'] = app.getParentModuleName();\n\t\t\tparams['sourceModule'] = $('#selectedModuleName').val();\n\t\t\tparams['action'] = 'Block';\n\t\t\tparams['mode'] = 'save';\n\t\t\tparams['blockid'] = currentTarget.data('blockId');\n\t\t\tparams['display_status'] = blockStatus;\n\n\t\t\tAppConnector.request(params)\n\t\t\t\t.done(function(data) {\n\t\t\t\t\tprogressIndicatorElement.progressIndicator({ mode: 'hide' });\n\t\t\t\t\tvar params = {};\n\t\t\t\t\tif (blockStatus == '1') {\n\t\t\t\t\t\tparams['text'] = app.vtranslate('JS_BLOCK_VISIBILITY_SHOW');\n\t\t\t\t\t} else if (blockStatus == '2') {\n\t\t\t\t\t\tparams['text'] = app.vtranslate('JS_BLOCK_VISIBILITY_DYNAMIC');\n\t\t\t\t\t} else {\n\t\t\t\t\t\tparams['text'] = app.vtranslate('JS_BLOCK_VISIBILITY_HIDE');\n\t\t\t\t\t}\n\t\t\t\t\tSettings_Vtiger_Index_Js.showMessage(params);\n\t\t\t\t})\n\t\t\t\t.fail(function(error) {\n\t\t\t\t\tprogressIndicatorElement.progressIndicator({ mode: 'hide' });\n\t\t\t\t});\n\t\t},\n\t\t/**\n\t\t * Function to register the click event for inactive fields list\n\t\t */\n\t\tregisterInactiveFieldsEvent: function() {\n\t\t\tvar thisInstance = this;\n\t\t\tvar contents = $('#layoutEditorContainer').find('.contents');\n\t\t\tcontents.on('click', '.js-inactive-fields-btn', function(e) {\n\t\t\t\tvar currentTarget = $(e.currentTarget);\n\t\t\t\tvar currentBlock = currentTarget.closest('.editFieldsTable');\n\t\t\t\tvar blockId = currentBlock.data('blockId');\n\t\t\t\t//If there are no hidden fields, show pnotify\n\t\t\t\tif ($.isEmptyObject(thisInstance.inActiveFieldsList[blockId])) {\n\t\t\t\t\tvar params = {};\n\t\t\t\t\tparams['text'] = app.vtranslate('JS_NO_HIDDEN_FIELDS_EXISTS');\n\t\t\t\t\tparams['type'] = 'error';\n\t\t\t\t\tSettings_Vtiger_Index_Js.showMessage(params);\n\t\t\t\t} else {\n\t\t\t\t\tvar inActiveFieldsContainer = contents.find('.inactiveFieldsModal').clone(true, true);\n\n\t\t\t\t\tvar callBackFunction = function(data) {\n\t\t\t\t\t\tdata\n\t\t\t\t\t\t\t.find('.inactiveFieldsModal')\n\t\t\t\t\t\t\t.removeClass('d-none')\n\t\t\t\t\t\t\t.show();\n\t\t\t\t\t\tthisInstance.reactiveFieldsList = [];\n\t\t\t\t\t\tvar form = data.find('.inactiveFieldsForm');\n\t\t\t\t\t\tthisInstance.showHiddenFields(blockId, form);\n\t\t\t\t\t\t//register click event for reactivate button in the inactive fields modal\n\t\t\t\t\t\tform.on('submit', function(e) {\n\t\t\t\t\t\t\tthisInstance.createReactivateFieldslist(blockId, form);\n\t\t\t\t\t\t\tthisInstance.reActivateHiddenFields(currentBlock);\n\t\t\t\t\t\t\tapp.hideModalWindow();\n\t\t\t\t\t\t\te.preventDefault();\n\t\t\t\t\t\t});\n\t\t\t\t\t};\n\n\t\t\t\t\tapp.showModalWindow(\n\t\t\t\t\t\tinActiveFieldsContainer,\n\t\t\t\t\t\tfunction(data) {\n\t\t\t\t\t\t\tif (typeof callBackFunction == 'function') {\n\t\t\t\t\t\t\t\tcallBackFunction(data);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{ width: '1000px' }\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\t/**\n\t\t * Function to show the list of inactive fields in the modal\n\t\t */\n\t\tshowHiddenFields: function(blockId, form) {\n\t\t\tvar thisInstance = this;\n\t\t\t$.each(thisInstance.inActiveFieldsList[blockId], function(key, value) {\n\t\t\t\tvar inActiveField = $(\n\t\t\t\t\t'<div class=\"col-md-4 marginLeftZero padding-bottom1per' +\n\t\t\t\t\t\t' checkbox\"><label class=\"\"><input type=\"checkbox\" class=\"inActiveField\"' +\n\t\t\t\t\t\t' value=\"' +\n\t\t\t\t\t\tkey +\n\t\t\t\t\t\t'\" />&nbsp;' +\n\t\t\t\t\t\tvalue +\n\t\t\t\t\t\t'</label></div>'\n\t\t\t\t);\n\t\t\t\tform.find('.inActiveList').append(inActiveField);\n\t\t\t});\n\t\t},\n\t\t/**\n\t\t * Function to create the list of reactivate fields list\n\t\t */\n\t\tcreateReactivateFieldslist: function(blockId, form) {\n\t\t\tvar thisInstance = this;\n\t\t\tform.find('.inActiveField').each(function(index, domElement) {\n\t\t\t\tvar element = $(domElement);\n\t\t\t\tvar fieldId = element.val();\n\t\t\t\tif (element.is(':checked')) {\n\t\t\t\t\tdelete thisInstance.inActiveFieldsList[blockId][fieldId];\n\t\t\t\t\tthisInstance.reactiveFieldsList.push(fieldId);\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\t/**\n\t\t * Function to unHide the selected fields in the inactive fields modal\n\t\t */\n\t\treActivateHiddenFields: function(currentBlock) {\n\t\t\tconst thisInstance = this;\n\t\t\tlet progressIndicatorElement = $.progressIndicator({\n\t\t\t\t\tposition: 'html',\n\t\t\t\t\tblockInfo: {\n\t\t\t\t\t\tenabled: true\n\t\t\t\t\t}\n\t\t\t\t}),\n\t\t\t\tparams = {\n\t\t\t\t\tmodule: app.getModuleName(),\n\t\t\t\t\tparent: app.getParentModuleName(),\n\t\t\t\t\taction: 'Field',\n\t\t\t\t\tmode: 'unHide',\n\t\t\t\t\tblockId: currentBlock.data('blockId'),\n\t\t\t\t\tfieldIdList: JSON.stringify(thisInstance.reactiveFieldsList)\n\t\t\t\t},\n\t\t\t\tmessageParams = {};\n\t\t\tif (params.fieldIdList !== '[]') {\n\t\t\t\tAppConnector.request(params)\n\t\t\t\t\t.done(function(data) {\n\t\t\t\t\t\tfor (let index in data.result) {\n\t\t\t\t\t\t\tthisInstance.showCustomField(data.result[index]);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tprogressIndicatorElement.progressIndicator({ mode: 'hide' });\n\t\t\t\t\t\tmessageParams.text = app.vtranslate('JS_SELECTED_FIELDS_REACTIVATED');\n\t\t\t\t\t\tSettings_Vtiger_Index_Js.showMessage(messageParams);\n\t\t\t\t\t})\n\t\t\t\t\t.fail(function(error) {\n\t\t\t\t\t\tprogressIndicatorElement.progressIndicator({ mode: 'hide' });\n\t\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tmessageParams.text = app.vtranslate('JS_NO_ITEM_SELECTED');\n\t\t\t\tmessageParams.type = 'error';\n\t\t\t\tprogressIndicatorElement.progressIndicator({ mode: 'hide' });\n\t\t\t\tSettings_Vtiger_Index_Js.showMessage(messageParams);\n\t\t\t}\n\t\t},\n\t\t/**\n\t\t * Function to register the click event for delete custom block\n\t\t */\n\t\tregisterDeleteCustomBlockEvent: function() {\n\t\t\tvar thisInstance = this;\n\t\t\tvar contents = $('#layoutEditorContainer').find('.contents');\n\t\t\tcontents.on('click', '.js-delete-custom-block-btn', function(e) {\n\t\t\t\tvar currentTarget = $(e.currentTarget);\n\t\t\t\tvar table = currentTarget.closest('div.editFieldsTable');\n\t\t\t\tvar blockId = table.data('blockId');\n\n\t\t\t\tvar message = app.vtranslate('JS_LBL_ARE_YOU_SURE_YOU_WANT_TO_DELETE');\n\t\t\t\tVtiger_Helper_Js.showConfirmationBox({ message: message })\n\t\t\t\t\t.done(function(e) {\n\t\t\t\t\t\tthisInstance.deleteCustomBlock(blockId);\n\t\t\t\t\t})\n\t\t\t\t\t.fail(function(error, err) {});\n\t\t\t});\n\t\t},\n\t\t/**\n\t\t * Function to delete the custom block\n\t\t */\n\t\tdeleteCustomBlock: function(blockId) {\n\t\t\tvar thisInstance = this;\n\t\t\tvar progressIndicatorElement = $.progressIndicator({\n\t\t\t\tposition: 'html',\n\t\t\t\tblockInfo: {\n\t\t\t\t\tenabled: true\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tvar params = {};\n\t\t\tparams['module'] = app.getModuleName();\n\t\t\tparams['parent'] = app.getParentModuleName();\n\t\t\tparams['action'] = 'Block';\n\t\t\tparams['mode'] = 'delete';\n\t\t\tparams['blockid'] = blockId;\n\n\t\t\tAppConnector.request(params)\n\t\t\t\t.done(function(data) {\n\t\t\t\t\tprogressIndicatorElement.progressIndicator({ mode: 'hide' });\n\t\t\t\t\tvar params = {};\n\t\t\t\t\tif (data['success']) {\n\t\t\t\t\t\tthisInstance.removeDeletedBlock(blockId);\n\t\t\t\t\t\tthisInstance.removeBlockFromBlocksList(blockId);\n\t\t\t\t\t\tparams['text'] = app.vtranslate('JS_CUSTOM_BLOCK_DELETED');\n\t\t\t\t\t} else {\n\t\t\t\t\t\tparams['text'] = data['error']['message'];\n\t\t\t\t\t\tparams['type'] = 'error';\n\t\t\t\t\t}\n\t\t\t\t\tSettings_Vtiger_Index_Js.showMessage(params);\n\t\t\t\t})\n\t\t\t\t.fail(function(error) {\n\t\t\t\t\tprogressIndicatorElement.progressIndicator({ mode: 'hide' });\n\t\t\t\t});\n\t\t},\n\t\t/**\n\t\t * Function to remove the deleted custom block from the ui\n\t\t */\n\t\tremoveDeletedBlock: function(blockId) {\n\t\t\tvar contents = $('#layoutEditorContainer').find('.contents');\n\t\t\tvar deletedTable = contents.find('.block_' + blockId);\n\t\t\tdeletedTable.fadeOut('slow').remove();\n\t\t},\n\t\t/**\n\t\t * Function to register the click event for delete custom field\n\t\t */\n\t\tregisterDeleteCustomFieldEvent: function(contents) {\n\t\t\tvar thisInstance = this;\n\t\t\tif (typeof contents === 'undefined') {\n\t\t\t\tcontents = $('#layoutEditorContainer').find('.contents');\n\t\t\t}\n\t\t\tcontents.find('.deleteCustomField').on('click', function(e) {\n\t\t\t\tvar currentTarget = $(e.currentTarget);\n\t\t\t\tvar fieldId = currentTarget.data('fieldId');\n\t\t\t\tvar message = app.vtranslate('JS_LBL_ARE_YOU_SURE_YOU_WANT_TO_DELETE');\n\t\t\t\tVtiger_Helper_Js.showConfirmationBox({ message: message })\n\t\t\t\t\t.done(function(e) {\n\t\t\t\t\t\tthisInstance\n\t\t\t\t\t\t\t.deleteCustomField(fieldId)\n\t\t\t\t\t\t\t.done(function(data) {\n\t\t\t\t\t\t\t\tvar field = currentTarget.closest('div.editFields');\n\t\t\t\t\t\t\t\tvar blockId = field.data('blockId');\n\t\t\t\t\t\t\t\tfield\n\t\t\t\t\t\t\t\t\t.parent()\n\t\t\t\t\t\t\t\t\t.fadeOut('slow')\n\t\t\t\t\t\t\t\t\t.remove();\n\t\t\t\t\t\t\t\tvar block = $('#block_' + blockId);\n\t\t\t\t\t\t\t\tthisInstance.reArrangeBlockFields(block);\n\t\t\t\t\t\t\t\tvar params = {};\n\t\t\t\t\t\t\t\tparams['text'] = app.vtranslate('JS_CUSTOM_FIELD_DELETED');\n\t\t\t\t\t\t\t\tSettings_Vtiger_Index_Js.showMessage(params);\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t.fail(function(error, err) {});\n\t\t\t\t\t})\n\t\t\t\t\t.fail(function(error, err) {});\n\t\t\t});\n\t\t},\n\t\t/**\n\t\t * Function to delete the custom field\n\t\t */\n\t\tdeleteCustomField: function(fieldId) {\n\t\t\tvar aDeferred = $.Deferred();\n\t\t\tvar progressIndicatorElement = $.progressIndicator({\n\t\t\t\tposition: 'html',\n\t\t\t\tblockInfo: {\n\t\t\t\t\tenabled: true\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tvar params = {};\n\t\t\tparams['module'] = app.getModuleName();\n\t\t\tparams['parent'] = app.getParentModuleName();\n\t\t\tparams['action'] = 'Field';\n\t\t\tparams['mode'] = 'delete';\n\t\t\tparams['fieldid'] = fieldId;\n\n\t\t\tAppConnector.request(params)\n\t\t\t\t.done(function(data) {\n\t\t\t\t\tprogressIndicatorElement.progressIndicator({ mode: 'hide' });\n\t\t\t\t\taDeferred.resolve(data);\n\t\t\t\t})\n\t\t\t\t.fail(function(error) {\n\t\t\t\t\tprogressIndicatorElement.progressIndicator({ mode: 'hide' });\n\t\t\t\t\taDeferred.reject();\n\t\t\t\t});\n\t\t\treturn aDeferred.promise();\n\t\t},\n\t\t/**\n\t\t * Function to register the cahnge event for mandatory & default checkboxes in edit field details\n\t\t */\n\t\tregisterFieldDetailsChange: function(contents) {\n\t\t\tcontents.find('[name=\"mandatory\"]').on('change', function(e) {\n\t\t\t\tvar currentTarget = $(e.currentTarget);\n\t\t\t\tif (currentTarget.attr('readonly') !== 'readonly') {\n\t\t\t\t\tvar form = currentTarget.closest('.fieldDetailsForm');\n\t\t\t\t\tvar quickcreateEle = form\n\t\t\t\t\t\t.find('[name=\"quickcreate\"]')\n\t\t\t\t\t\t.filter(':checkbox')\n\t\t\t\t\t\t.not('.optionDisabled');\n\t\t\t\t\tvar presenceEle = form\n\t\t\t\t\t\t.find('[name=\"presence\"]')\n\t\t\t\t\t\t.filter(':checkbox')\n\t\t\t\t\t\t.not('.optionDisabled');\n\t\t\t\t\tif (currentTarget.is(':checked')) {\n\t\t\t\t\t\tquickcreateEle.attr('checked', true).attr('readonly', 'readonly');\n\t\t\t\t\t\tpresenceEle.attr('checked', true).attr('readonly', 'readonly');\n\t\t\t\t\t} else {\n\t\t\t\t\t\tquickcreateEle.removeAttr('readonly');\n\t\t\t\t\t\tpresenceEle.removeAttr('readonly');\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t\tcontents.find('[name=\"defaultvalue\"],[name=\"header_field\"]').on('change', function(e) {\n\t\t\t\tvar currentTarget = $(e.currentTarget);\n\t\t\t\tvar defaultValueUi = currentTarget.closest('.checkbox').find('.js-toggle-hide');\n\t\t\t\tif (currentTarget.is(':checked')) {\n\t\t\t\t\tdefaultValueUi.removeClass('zeroOpacity');\n\t\t\t\t} else {\n\t\t\t\t\tdefaultValueUi.addClass('zeroOpacity');\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\t/**\n\t\t * Function to register the click event for related modules list tab\n\t\t */\n\t\trelatedModulesTabClickEvent: function() {\n\t\t\tvar thisInstance = this;\n\t\t\tvar contents = $('#layoutEditorContainer').find('.contents');\n\t\t\tvar relatedContainer = contents.find('#relatedTabOrder');\n\t\t\tvar relatedTab = contents.find('.relatedListTab');\n\t\t\trelatedTab.on('click', function() {\n\t\t\t\tif (relatedContainer.find('.relatedTabModulesList').length > 0) {\n\t\t\t\t} else {\n\t\t\t\t\tthisInstance.showRelatedTabModulesList(relatedContainer);\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\t/**\n\t\t * Function to show the related tab modules list in the tab\n\t\t */\n\t\tshowRelatedTabModulesList: function(relatedContainer) {\n\t\t\tvar thisInstance = this;\n\t\t\tvar params = {};\n\t\t\tparams['module'] = app.getModuleName();\n\t\t\tparams['parent'] = app.getParentModuleName();\n\t\t\tparams['sourceModule'] = $('#selectedModuleName').val();\n\t\t\tparams['view'] = 'Index';\n\t\t\tparams['mode'] = 'showRelatedListLayout';\n\n\t\t\tAppConnector.request(params)\n\t\t\t\t.done(function(data) {\n\t\t\t\t\trelatedContainer.html(data);\n\t\t\t\t\tif ($(data).find('.relatedListContainer').length > 0) {\n\t\t\t\t\t\tthisInstance.makeRelatedModuleSortable();\n\t\t\t\t\t\tthisInstance.registerRelatedListEvents();\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t\t.fail(function(error) {});\n\t\t},\n\t\t/**\n\t\t * Function to get the respective module layout editor through pjax\n\t\t */\n\t\tgetModuleLayoutEditor: function(selectedModule) {\n\t\t\tvar aDeferred = $.Deferred();\n\t\t\tvar progressIndicatorElement = $.progressIndicator({\n\t\t\t\tposition: 'html',\n\t\t\t\tblockInfo: {\n\t\t\t\t\tenabled: true\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tvar params = {};\n\t\t\tparams['module'] = app.getModuleName();\n\t\t\tparams['parent'] = app.getParentModuleName();\n\t\t\tparams['view'] = 'Index';\n\t\t\tparams['sourceModule'] = selectedModule;\n\n\t\t\tAppConnector.requestPjax(params)\n\t\t\t\t.done(function(data) {\n\t\t\t\t\tprogressIndicatorElement.progressIndicator({ mode: 'hide' });\n\t\t\t\t\taDeferred.resolve(data);\n\t\t\t\t})\n\t\t\t\t.fail(function(error) {\n\t\t\t\t\tprogressIndicatorElement.progressIndicator({ mode: 'hide' });\n\t\t\t\t\taDeferred.reject();\n\t\t\t\t});\n\t\t\treturn aDeferred.promise();\n\t\t},\n\t\tgetRelModuleLayoutEditor: function(selectedModule) {\n\t\t\tvar aDeferred = $.Deferred();\n\t\t\tvar progressIndicatorElement = $.progressIndicator({\n\t\t\t\tposition: 'html',\n\t\t\t\tblockInfo: {\n\t\t\t\t\tenabled: true\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tvar params = {};\n\t\t\tparams['module'] = app.getModuleName();\n\t\t\tparams['parent'] = app.getParentModuleName();\n\t\t\tparams['view'] = 'Index';\n\t\t\tparams['mode'] = 'showRelatedListLayout';\n\t\t\tparams['sourceModule'] = selectedModule;\n\n\t\t\tAppConnector.requestPjax(params)\n\t\t\t\t.done(function(data) {\n\t\t\t\t\tprogressIndicatorElement.progressIndicator({ mode: 'hide' });\n\t\t\t\t\taDeferred.resolve(data);\n\t\t\t\t})\n\t\t\t\t.fail(function(error) {\n\t\t\t\t\tprogressIndicatorElement.progressIndicator({ mode: 'hide' });\n\t\t\t\t\taDeferred.reject();\n\t\t\t\t});\n\t\t\treturn aDeferred.promise();\n\t\t},\n\t\t/**\n\t\t * Function to register the change event for layout editor modules list\n\t\t */\n\t\tregisterModulesChangeEvent: function() {\n\t\t\tvar thisInstance = this;\n\t\t\tvar container = $('#layoutEditorContainer');\n\t\t\tvar contentsDiv = container.closest('.contentsDiv');\n\n\t\t\tApp.Fields.Picklist.showSelect2ElementView(container.find('[name=\"layoutEditorModules\"]'));\n\n\t\t\tcontainer.on('change', '[name=\"layoutEditorModules\"]', function(e) {\n\t\t\t\tvar currentTarget = $(e.currentTarget);\n\t\t\t\tvar selectedModule = currentTarget.val();\n\t\t\t\tthisInstance.getModuleLayoutEditor(selectedModule).done(function(data) {\n\t\t\t\t\tcontentsDiv.html(data);\n\t\t\t\t\tthisInstance.registerEvents();\n\t\t\t\t});\n\t\t\t});\n\t\t},\n\t\tregisterRelModulesChangeEvent: function() {\n\t\t\tvar thisInstance = this;\n\t\t\tvar container = $('#layoutEditorContainer');\n\t\t\tvar contentsDiv = container.closest('.contentsDiv');\n\n\t\t\tApp.Fields.Picklist.showSelect2ElementView(container.find('[name=\"layoutEditorRelModules\"]'));\n\n\t\t\tcontainer.on('change', '[name=\"layoutEditorRelModules\"]', function(e) {\n\t\t\t\tvar currentTarget = $(e.currentTarget);\n\t\t\t\tvar selectedModule = currentTarget.val();\n\t\t\t\tthisInstance.getRelModuleLayoutEditor(selectedModule).done(function(data) {\n\t\t\t\t\tcontentsDiv.html(data);\n\t\t\t\t\tthisInstance.registerEvents();\n\t\t\t\t});\n\t\t\t});\n\t\t},\n\t\tlockCheckbox: function(contents) {\n\t\t\tcontents.on('change', ':checkbox', function(e) {\n\t\t\t\tvar currentTarget = $(e.currentTarget);\n\t\t\t\tif (currentTarget.attr('readonly') === 'readonly') {\n\t\t\t\t\tvar status = $(e.currentTarget).is(':checked');\n\t\t\t\t\tif (!status) {\n\t\t\t\t\t\t$(e.currentTarget).prop('checked', true);\n\t\t\t\t\t} else {\n\t\t\t\t\t\t$(e.currentTarget).prop('checked', false);\n\t\t\t\t\t}\n\t\t\t\t\te.preventDefault();\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\tregisterEditFieldDetailsClick: function(contents) {\n\t\t\tvar thisInstance = this;\n\t\t\tif (typeof contents === 'undefined') {\n\t\t\t\tcontents = $('#layoutEditorContainer').find('.contents');\n\t\t\t}\n\t\t\tcontents.find('.editFieldDetails').on('click', function(e) {\n\t\t\t\tvar currentTarget = $(e.currentTarget);\n\t\t\t\tvar fieldRow = currentTarget.closest('div.editFields');\n\t\t\t\tvar fieldId = fieldRow.data('fieldId');\n\t\t\t\tvar block = fieldRow.closest('.editFieldsTable');\n\t\t\t\tvar blockId = block.data('blockId');\n\t\t\t\tapp.showModalWindow({\n\t\t\t\t\turl: 'index.php?parent=Settings&module=LayoutEditor&view=EditField&fieldId=' + fieldRow.data('fieldId'),\n\t\t\t\t\tcb: function(modalContainer) {\n\t\t\t\t\t\tthisInstance.registerFieldDetailsChange(modalContainer);\n\t\t\t\t\t\tthisInstance.lockCheckbox(modalContainer);\n\t\t\t\t\t\tthisInstance.registerVaribleToParsers(modalContainer);\n\t\t\t\t\t\tapp.registerEventForClockPicker(modalContainer.find('.clockPicker'));\n\t\t\t\t\t\tmodalContainer.find('[data-inputmask]').inputmask();\n\t\t\t\t\t},\n\t\t\t\t\tsendByAjaxCb: (formData, response) => {\n\t\t\t\t\t\tif (!response.success) {\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tSettings_Vtiger_Index_Js.showMessage({\n\t\t\t\t\t\t\ttext: app.vtranslate('JS_FIELD_DETAILS_SAVED')\n\t\t\t\t\t\t});\n\t\t\t\t\t\tlet result = response['result'];\n\t\t\t\t\t\tlet fieldLabel = fieldRow.find('.fieldLabel');\n\t\t\t\t\t\tif (result['presence'] === '1') {\n\t\t\t\t\t\t\tfieldRow\n\t\t\t\t\t\t\t\t.parent()\n\t\t\t\t\t\t\t\t.fadeOut('slow')\n\t\t\t\t\t\t\t\t.remove();\n\t\t\t\t\t\t\tif ($.isEmptyObject(thisInstance.inActiveFieldsList[blockId])) {\n\t\t\t\t\t\t\t\tif (thisInstance.inActiveFieldsList.length === 0) {\n\t\t\t\t\t\t\t\t\tthisInstance.inActiveFieldsList = {};\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tthisInstance.inActiveFieldsList[blockId] = {};\n\t\t\t\t\t\t\t\tthisInstance.inActiveFieldsList[blockId][fieldId] = result['label'];\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tthisInstance.inActiveFieldsList[blockId][fieldId] = result['label'];\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tthisInstance.reArrangeBlockFields(block);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (result['mandatory']) {\n\t\t\t\t\t\t\tif (fieldLabel.find('.redColor').length === 0) {\n\t\t\t\t\t\t\t\tfieldRow.find('.fieldLabel').append($('<span class=\"redColor\">*</span>'));\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tfieldRow\n\t\t\t\t\t\t\t\t.find('.fieldLabel')\n\t\t\t\t\t\t\t\t.find('.redColor')\n\t\t\t\t\t\t\t\t.remove();\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t});\n\t\t},\n\t\tregisterVaribleToParsers: function(container) {\n\t\t\tcontainer.find('.configButton').on('click', function(e) {\n\t\t\t\tcontainer.find('.js-toggle-hide .js-base-element').each(function(n, e) {\n\t\t\t\t\tvar currentElement = $(e);\n\t\t\t\t\tif (currentElement.hasClass('d-none')) {\n\t\t\t\t\t\tcurrentElement.find('input,select').prop('disabled', false);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tcurrentElement.find('input,select').prop('disabled', true);\n\t\t\t\t\t}\n\t\t\t\t\tcurrentElement.toggleClass('d-none');\n\t\t\t\t});\n\t\t\t});\n\t\t\tcontainer.find('.varibleToParsers').on('click', function(e) {\n\t\t\t\tlet element = $(e.currentTarget);\n\t\t\t\tlet container = element.closest('.js-base-element');\n\t\t\t\tlet input = container.find('[name=\"' + container.data('name') + '\"]');\n\t\t\t\tlet fieldId = element\n\t\t\t\t\t.closest('form')\n\t\t\t\t\t.find('[name=\"fieldid\"]')\n\t\t\t\t\t.val();\n\t\t\t\tlet id = 'varibleToParsersModal';\n\t\t\t\tapp.showModalWindow({\n\t\t\t\t\tid: id,\n\t\t\t\t\turl:\n\t\t\t\t\t\t'index.php?parent=Settings&module=LayoutEditor&view=VaribleToParsers&fieldId=' +\n\t\t\t\t\t\tfieldId +\n\t\t\t\t\t\t'&defaultValue=' +\n\t\t\t\t\t\tinput.val(),\n\t\t\t\t\tcb: function(modalContainer) {\n\t\t\t\t\t\tmodalContainer.find('[name=\"saveButton\"]').on('click', function() {\n\t\t\t\t\t\t\tinput.val(modalContainer.find('select').val());\n\t\t\t\t\t\t\tapp.hideModalWindow(null, id);\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t});\n\t\t\tApp.Fields.Tree.register(container);\n\t\t},\n\t\t/**\n\t\t * Function to register all the events for blocks\n\t\t */\n\t\tregisterBlockEvents: function() {\n\t\t\tvar thisInstance = this;\n\t\t\tthisInstance.makeBlocksListSortable();\n\t\t\tthisInstance.registerAddCustomFieldEvent();\n\t\t\tthisInstance.registerBlockVisibilityEvent();\n\t\t\tthisInstance.registerInactiveFieldsEvent();\n\t\t\tthisInstance.registerDeleteCustomBlockEvent();\n\t\t},\n\t\t/**\n\t\t * Function to register all the events for fields\n\t\t */\n\t\tregisterFieldEvents: function(contents) {\n\t\t\tvar thisInstance = this;\n\t\t\tif (typeof contents === 'undefined') {\n\t\t\t\tcontents = $('#layoutEditorContainer').find('.contents');\n\t\t\t}\n\t\t\tApp.Fields.Date.register(contents);\n\t\t\tApp.Fields.Picklist.changeSelectElementView(contents);\n\t\t\tthisInstance.makeFieldsListSortable();\n\t\t\tthisInstance.registerDeleteCustomFieldEvent(contents);\n\t\t\tthisInstance.registerEditFieldDetailsClick(contents);\n\n\t\t\tcontents.find(':checkbox').on('change', function(e) {\n\t\t\t\tvar currentTarget = $(e.currentTarget);\n\t\t\t\tif (currentTarget.attr('readonly') == 'readonly') {\n\t\t\t\t\tvar status = $(e.currentTarget).is(':checked');\n\t\t\t\t\tif (!status) {\n\t\t\t\t\t\t$(e.currentTarget).prop('checked', true);\n\t\t\t\t\t} else {\n\t\t\t\t\t\t$(e.currentTarget).prop('checked', false);\n\t\t\t\t\t}\n\t\t\t\t\te.preventDefault();\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\t/**\n\t\t * Function to register switch\n\t\t */\n\t\tregisterSwitch: function() {\n\t\t\tvar container = $('#layoutEditorContainer');\n\t\t\tcontainer.find('.js-switch--inventory').on('click', function(event) {\n\t\t\t\tevent.preventDefault();\n\t\t\t\tvar switchBtn = $(event.currentTarget);\n\t\t\t\tvar state = switchBtn.data('value');\n\t\t\t\tvar message = app.vtranslate('JS_EXTENDED_MODULE');\n\t\t\t\tVtiger_Helper_Js.showConfirmationBox({\n\t\t\t\t\tmessage: '<span class=\"message-medium\">' + message + '</span>',\n\t\t\t\t\tclassName: 'test'\n\t\t\t\t}).done(function(e) {\n\t\t\t\t\tlet progress = $.progressIndicator({\n\t\t\t\t\t\tmessage: app.vtranslate('JS_SAVE_LOADER_INFO'),\n\t\t\t\t\t\tposition: 'html',\n\t\t\t\t\t\tblockInfo: {\n\t\t\t\t\t\t\tenabled: true\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t\tvar params = {};\n\t\t\t\t\tparams['sourceModule'] = container.find('[name=\"layoutEditorModules\"]').val();\n\t\t\t\t\tparams['type'] = state;\n\t\t\t\t\tapp.saveAjax('changeModuleType', null, params).done(function(data) {\n\t\t\t\t\t\tif (data.result) {\n\t\t\t\t\t\t\tif (data.result.success) {\n\t\t\t\t\t\t\t\tcontainer.find('.js-switch--inventory').prop('disabled', true);\n\t\t\t\t\t\t\t\tSettings_Vtiger_Index_Js.showMessage({ type: 'success', text: data.result.message });\n\t\t\t\t\t\t\t\tprogress.progressIndicator({ mode: 'hide' });\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\twindow.location.reload();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t});\n\t\t},\n\t\t/**\n\t\t * Function to adding inventory field\n\t\t */\n\t\tregisterAddInventoryField() {\n\t\t\tconst thisInstance = this;\n\t\t\tlet container = thisInstance.getInventoryViewLayout();\n\t\t\tcontainer.find('.addInventoryField').on('click', e => {\n\t\t\t\tlet currentTarget = $(e.currentTarget);\n\t\t\t\tlet selectedModule = $('#layoutEditorContainer')\n\t\t\t\t\t.find('[name=\"layoutEditorModules\"]')\n\t\t\t\t\t.val();\n\t\t\t\tlet blockId = currentTarget.closest('.inventoryBlock').data('block-id');\n\t\t\t\tconst progress = $.progressIndicator();\n\t\t\t\tapp.showModalWindow(\n\t\t\t\t\tnull,\n\t\t\t\t\t'index.php?module=LayoutEditor&parent=Settings&view=CreateInventoryFields&mode=step1&sourceModule=' +\n\t\t\t\t\t\tselectedModule +\n\t\t\t\t\t\t'&block=' +\n\t\t\t\t\t\tblockId,\n\t\t\t\t\tmodalContainer => {\n\t\t\t\t\t\tapp.showScrollBar(modalContainer.find('.well'), {\n\t\t\t\t\t\t\theight: '300px'\n\t\t\t\t\t\t});\n\t\t\t\t\t\tthisInstance.registerStep1(modalContainer, blockId);\n\t\t\t\t\t\tprogress.progressIndicator({ mode: 'hide' });\n\t\t\t\t\t}\n\t\t\t\t);\n\t\t\t});\n\t\t},\n\t\t/**\n\t\t * Function to editing inventory field\n\t\t */\n\t\tregisterEditInventoryField: function() {\n\t\t\tvar thisInstance = this;\n\t\t\tvar container = thisInstance.getInventoryViewLayout();\n\t\t\tcontainer.find('.editInventoryField').on('click', function(e) {\n\t\t\t\tvar currentTarget = $(e.currentTarget);\n\t\t\t\tvar selectedModule = $('#layoutEditorContainer')\n\t\t\t\t\t.find('[name=\"layoutEditorModules\"]')\n\t\t\t\t\t.val();\n\t\t\t\tvar blockId = currentTarget.closest('.inventoryBlock').data('block-id');\n\t\t\t\tvar editField = currentTarget.closest('.editFields');\n\t\t\t\tvar progress = $.progressIndicator();\n\t\t\t\tapp.showModalWindow(\n\t\t\t\t\tnull,\n\t\t\t\t\t'index.php?module=LayoutEditor&parent=Settings&view=CreateInventoryFields&mode=step2&sourceModule=' +\n\t\t\t\t\t\tselectedModule +\n\t\t\t\t\t\t'&type=' +\n\t\t\t\t\t\teditField.data('type') +\n\t\t\t\t\t\t'&fieldName=' +\n\t\t\t\t\t\teditField.data('name'),\n\t\t\t\t\tfunction(container) {\n\t\t\t\t\t\tapp.showPopoverElementView(container.find('.js-help-info'));\n\t\t\t\t\t\tthisInstance.registerStep2(container, blockId);\n\t\t\t\t\t\tprogress.progressIndicator({ mode: 'hide' });\n\t\t\t\t\t}\n\t\t\t\t);\n\t\t\t});\n\t\t},\n\t\t/**\n\t\t * Function to adding inventory field first step\n\t\t *\n\t\t * @param {jQuery} container\n\t\t * @param {int} blockId\n\t\t */\n\t\tregisterStep1(container, blockId) {\n\t\t\tconst thisInstance = this;\n\t\t\tcontainer.find('.js-next-button').on('click', e => {\n\t\t\t\tlet selectedModule = $('#layoutEditorContainer')\n\t\t\t\t\t.find('[name=\"layoutEditorModules\"]')\n\t\t\t\t\t.val();\n\t\t\t\tlet type = container.find('select.type').val();\n\t\t\t\tif (type === null) {\n\t\t\t\t\tcontainer\n\t\t\t\t\t\t.find('select.type')\n\t\t\t\t\t\t.validationEngine('showPrompt', app.vtranslate('JS_REQUIRED_FIELD'), 'error', 'topRight', true);\n\t\t\t\t} else {\n\t\t\t\t\tapp.hideModalWindow(() => {\n\t\t\t\t\t\tconst progress = $.progressIndicator({\n\t\t\t\t\t\t\tposition: 'html',\n\t\t\t\t\t\t\tblockInfo: {\n\t\t\t\t\t\t\t\tenabled: true\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t\tapp.showModalWindow(\n\t\t\t\t\t\t\tnull,\n\t\t\t\t\t\t\t'index.php?module=LayoutEditor&parent=Settings&view=CreateInventoryFields&mode=step2&sourceModule=' +\n\t\t\t\t\t\t\t\tselectedModule +\n\t\t\t\t\t\t\t\t'&type=' +\n\t\t\t\t\t\t\t\ttype,\n\t\t\t\t\t\t\tmodalContainer => {\n\t\t\t\t\t\t\t\tthisInstance.registerStep2(modalContainer, blockId);\n\t\t\t\t\t\t\t\tprogress.progressIndicator({ mode: 'hide' });\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t);\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\t/**\n\t\t * Function to save inventory field\n\t\t */\n\t\tregisterStep2: function(container, blockId) {\n\t\t\tlet thisInstance = this;\n\t\t\tlet containerInventory = thisInstance.getInventoryViewLayout();\n\t\t\tlet form = container.find('form');\n\t\t\tlet selectedModule = $('#layoutEditorContainer')\n\t\t\t\t.find('[name=\"layoutEditorModules\"]')\n\t\t\t\t.val();\n\t\t\tform.validationEngine(app.validationEngineOptions);\n\t\t\tform.on('submit', function(e) {\n\t\t\t\tlet formData = form.serializeFormData();\n\t\t\t\tlet paramsName = container.find('#params');\n\t\t\t\tif (paramsName.length) {\n\t\t\t\t\tparamsName = JSON.parse(paramsName.val());\n\t\t\t\t\tlet params = {};\n\t\t\t\t\tfor (let i in formData) {\n\t\t\t\t\t\tif ($.inArray(i, paramsName) != -1) {\n\t\t\t\t\t\t\tlet value = formData[i];\n\t\t\t\t\t\t\tif (i === 'modules' && typeof value === 'string') {\n\t\t\t\t\t\t\t\tvalue = [value];\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tparams[i] = value;\n\t\t\t\t\t\t\tdelete formData[i];\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tformData.params = JSON.stringify(params);\n\t\t\t\t}\n\t\t\t\tlet errorExists = form.validationEngine('validate');\n\t\t\t\tif (errorExists != false) {\n\t\t\t\t\tformData.block = blockId;\n\t\t\t\t\tformData.sourceModule = selectedModule;\n\t\t\t\t\tapp.saveAjax('saveInventoryField', null, formData).done(function(data) {\n\t\t\t\t\t\tlet result = data.result,\n\t\t\t\t\t\t\tsuccess = data.success;\n\t\t\t\t\t\tapp.hideModalWindow();\n\t\t\t\t\t\tif (success && result && result.edit) {\n\t\t\t\t\t\t\tlet liElement = containerInventory.find('[data-id=\"' + result.data.id + '\"]');\n\t\t\t\t\t\t\tliElement.find('.fieldLabel').text(result.data.translate);\n\t\t\t\t\t\t} else if (success && result) {\n\t\t\t\t\t\t\tlet newLiElement = containerInventory.find('.newLiElement').clone(true, true);\n\t\t\t\t\t\t\tnewLiElement\n\t\t\t\t\t\t\t\t.removeClass('d-none newLiElement')\n\t\t\t\t\t\t\t\t.find('.editFields')\n\t\t\t\t\t\t\t\t.attr('data-id', result.data.id)\n\t\t\t\t\t\t\t\t.attr('data-sequence', result.data.sequence)\n\t\t\t\t\t\t\t\t.attr('data-name', result.data.columnName)\n\t\t\t\t\t\t\t\t.attr('data-type', result.data.invtype)\n\t\t\t\t\t\t\t\t.find('.fieldLabel')\n\t\t\t\t\t\t\t\t.text(result.data.translate);\n\t\t\t\t\t\t\tcontainerInventory\n\t\t\t\t\t\t\t\t.find('[data-block-id=\"' + result.data.block + '\"] .connectedSortable')\n\t\t\t\t\t\t\t\t.append(newLiElement);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tVtiger_Helper_Js.showPnotify(app.vtranslate('JS_ERROR'));\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t});\n\t\t\tcontainer.find('form').on('submit', function(event) {\n\t\t\t\tevent.preventDefault();\n\t\t\t});\n\t\t},\n\t\t/**\n\t\t * Function to register click event for save button of fields sequence\n\t\t */\n\t\tregisterInventoryFieldSequenceSaveClick: function() {\n\t\t\tvar thisInstance = this;\n\t\t\tvar containerInventory = thisInstance.getInventoryViewLayout();\n\t\t\tvar selectedModule = $('#layoutEditorContainer')\n\t\t\t\t.find('[name=\"layoutEditorModules\"]')\n\t\t\t\t.val();\n\t\t\tcontainerInventory.on('click', '.saveFieldSequence', function(e) {\n\t\t\t\tvar button = $(e.currentTarget);\n\t\t\t\tvar target = button.closest('.inventoryBlock');\n\t\t\t\tvar fieldId = [];\n\t\t\t\ttarget.find('.editFields').each(function() {\n\t\t\t\t\tfieldId.push($(this).data('id'));\n\t\t\t\t});\n\t\t\t\tapp.saveAjax('saveSequence', null, { sourceModule: selectedModule, ids: fieldId }).done(function(data) {\n\t\t\t\t\tbutton.addClass('invisible');\n\t\t\t\t});\n\t\t\t});\n\t\t},\n\t\t/**\n\t\t * removing elements in advanced blocks\n\t\t */\n\t\tregisterDeleteInventoryField: function() {\n\t\t\tvar thisInstance = this;\n\t\t\tvar container = thisInstance.getInventoryViewLayout();\n\t\t\tvar selectedModule = $('#layoutEditorContainer')\n\t\t\t\t.find('[name=\"layoutEditorModules\"]')\n\t\t\t\t.val();\n\t\t\tcontainer.find('.deleteInventoryField').on('click', function(e) {\n\t\t\t\tvar currentTarget = $(e.currentTarget);\n\t\t\t\tvar liElement = currentTarget.closest('li');\n\t\t\t\tvar message = app.vtranslate('JS_DELETE_INVENTORY_CONFIRMATION');\n\t\t\t\tVtiger_Helper_Js.showConfirmationBox({ message: message })\n\t\t\t\t\t.done(function(e) {\n\t\t\t\t\t\tvar progressIndicatorElement = $.progressIndicator({\n\t\t\t\t\t\t\tmessage: app.vtranslate('JS_SAVE_LOADER_INFO'),\n\t\t\t\t\t\t\tposition: 'html',\n\t\t\t\t\t\t\tblockInfo: {\n\t\t\t\t\t\t\t\tenabled: true\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t\tvar editFields = liElement.find('.editFields');\n\t\t\t\t\t\tapp\n\t\t\t\t\t\t\t.saveAjax('delete', null, {\n\t\t\t\t\t\t\t\tsourceModule: selectedModule,\n\t\t\t\t\t\t\t\tfieldName: editFields.data('name')\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t.done(function(response) {\n\t\t\t\t\t\t\t\tlet param = {};\n\t\t\t\t\t\t\t\tif (response.result) {\n\t\t\t\t\t\t\t\t\tliElement.remove();\n\t\t\t\t\t\t\t\t\tparam = { type: 'success', text: app.vtranslate('JS_SAVE_CHANGES') };\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\tparam = { type: 'error', text: app.vtranslate('JS_ERROR') };\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tSettings_Vtiger_Index_Js.showMessage(param);\n\t\t\t\t\t\t\t\tprogressIndicatorElement.progressIndicator({ mode: 'hide' });\n\t\t\t\t\t\t\t});\n\t\t\t\t\t})\n\t\t\t\t\t.fail(function(error, err) {\n\t\t\t\t\t\tprogressIndicatorElement.progressIndicator({ mode: 'hide' });\n\t\t\t\t\t});\n\t\t\t});\n\t\t},\n\n\t\t/**\n\t\t * Loading list of fields for a related module\n\t\t */\n\t\tloadMultiReferenceFields: function(form) {\n\t\t\tvar thisInstance = this;\n\t\t\tvar module = form.find('[name=\"MRVModule\"]').val();\n\t\t\tform.find('[name=\"MRVField\"],[name=\"MRVFilterField\"]').select2('destroy');\n\t\t\tform.find('[name=\"MRVField\"]').html(thisInstance.cacheMRVField.html());\n\t\t\tform.find('[name=\"MRVField\"] optgroup').each(function(index) {\n\t\t\t\tif ($(this).data('module') != module) {\n\t\t\t\t\t$(this).remove();\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tform.find('[name=\"MRVFilterField\"]').html(thisInstance.cacheMRVFilter.html());\n\t\t\tform.find('[name=\"MRVFilterField\"] option').each(function(index) {\n\t\t\t\tif ($(this).data('module') != module) {\n\t\t\t\t\t$(this).remove();\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tApp.Fields.Picklist.showSelect2ElementView(form.find('[name=\"MRVField\"],[name=\"MRVFilterField\"]'), {\n\t\t\t\twidth: '100%'\n\t\t\t});\n\t\t},\n\t\tcacheMRVField: false,\n\t\tcacheMRVFilter: false,\n\t\t/**\n\t\t * Loading list of fields for a related module\n\t\t */\n\t\tregisterMultiReferenceFieldsChangeEvent: function(form) {\n\t\t\tvar thisInstance = this;\n\t\t\tthisInstance.cacheMRVField = form.find('[name=\"MRVField\"]').clone(true, true);\n\t\t\tthisInstance.cacheMRVFilter = form.find('[name=\"MRVFilterField\"]').clone(true, true);\n\n\t\t\tform.find('[name=\"MRVModule\"]').on('change', function(e) {\n\t\t\t\tthisInstance.loadMultiReferenceFields(form);\n\t\t\t});\n\t\t},\n\t\t/**\n\t\t * Loading list of fields for a related module\n\t\t */\n\t\tregisterMultiReferenceFilterFieldChangeEvent: function(form) {\n\t\t\tform.find('[name=\"MRVFilterField\"]').on('change', function(e) {\n\t\t\t\tvar params = {};\n\t\t\t\tparams['module'] = app.getModuleName();\n\t\t\t\tparams['parent'] = app.getParentModuleName();\n\t\t\t\tparams['action'] = 'Field';\n\t\t\t\tparams['mode'] = 'getPicklist';\n\t\t\t\tparams['rfield'] = form.find('[name=\"MRVFilterField\"]').val();\n\t\t\t\tparams['rmodule'] = form.find('[name=\"MRVModule\"]').val();\n\n\t\t\t\tform.find('[name=\"MRVFilterValue\"]').select2('destroy');\n\t\t\t\tform.find('[name=\"MRVFilterValue\"] option').remove();\n\t\t\t\tAppConnector.request(params).done(function(data) {\n\t\t\t\t\t$.each(data.result, function(index, value) {\n\t\t\t\t\t\tform.find('[name=\"MRVFilterValue\"]').append(\n\t\t\t\t\t\t\t$('<option>')\n\t\t\t\t\t\t\t\t.val(index)\n\t\t\t\t\t\t\t\t.html(value)\n\t\t\t\t\t\t);\n\t\t\t\t\t});\n\t\t\t\t\tApp.Fields.Picklist.showSelect2ElementView(form.find('[name=\"MRVFilterValue\"]'), { width: '100%' });\n\t\t\t\t});\n\t\t\t});\n\t\t},\n\t\t/**\n\t\t * Register label copy\n\t\t */\n\t\tregisterCopyClipboard: function() {\n\t\t\tnew ClipboardJS('.copyFieldLabel', {\n\t\t\t\ttext: function(trigger) {\n\t\t\t\t\tVtiger_Helper_Js.showPnotify({\n\t\t\t\t\t\ttext: app.vtranslate('JS_NOTIFY_COPY_TEXT'),\n\t\t\t\t\t\ttype: 'success'\n\t\t\t\t\t});\n\t\t\t\t\treturn $('#layoutEditorContainer')\n\t\t\t\t\t\t.find('#' + trigger.getAttribute('data-target'))\n\t\t\t\t\t\t.val();\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\t/**\n\t\t * Context help\n\t\t * @param {jQuery} container\n\t\t */\n\t\tregisterContextHelp: function() {\n\t\t\t$(document).on('click', '.js-context-help', function(e) {\n\t\t\t\tconst customConfig = {\n\t\t\t\t\ttoolbar: 'Min'\n\t\t\t\t};\n\t\t\t\tconst element = $(e.currentTarget);\n\t\t\t\tlet progressInstance = $.progressIndicator({\n\t\t\t\t\tblockInfo: {\n\t\t\t\t\t\tenabled: true\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\tAppConnector.request({\n\t\t\t\t\tmodule: app.getModuleName(),\n\t\t\t\t\tparent: app.getParentModuleName(),\n\t\t\t\t\tview: 'HelpInfo',\n\t\t\t\t\tfield: element.data('field-id')\n\t\t\t\t}).done(function(data) {\n\t\t\t\t\tapp.showModalWindow(data, modalContainer => {\n\t\t\t\t\t\tprogressInstance.progressIndicator({ mode: 'hide' });\n\t\t\t\t\t\tapp.showPopoverElementView(modalContainer.find('.js-help-info'));\n\t\t\t\t\t\tnew App.Fields.Text.Editor(modalContainer.find('.js-context-area:visible'), customConfig);\n\t\t\t\t\t\tmodalContainer.find('.js-lang').on('change', function(e) {\n\t\t\t\t\t\t\tlet previous = modalContainer.find('.js-editor:not([disabled])');\n\t\t\t\t\t\t\tApp.Fields.Text.destroyEditor(previous);\n\t\t\t\t\t\t\tprevious.closest('.js-context-block').addClass('d-none');\n\t\t\t\t\t\t\tprevious.prop('disabled', true);\n\t\t\t\t\t\t\tlet element = $(e.currentTarget).val();\n\t\t\t\t\t\t\tlet textArea = modalContainer.find('#' + element + '.js-context-area');\n\t\t\t\t\t\t\ttextArea.prop('disabled', false);\n\t\t\t\t\t\t\ttextArea.closest('.js-context-block').removeClass('d-none');\n\t\t\t\t\t\t\tApp.Fields.Text.destroyEditor(textArea);\n\t\t\t\t\t\t\tmodalContainer.find('.js-help-info').attr('data-content', textArea.val());\n\t\t\t\t\t\t\tnew App.Fields.Text.Editor(textArea, customConfig);\n\t\t\t\t\t\t});\n\t\t\t\t\t\tmodalContainer.find('form').on('submit', function(e) {\n\t\t\t\t\t\t\te.preventDefault();\n\t\t\t\t\t\t\tvar form = $(e.currentTarget);\n\t\t\t\t\t\t\tvar params = form.serializeFormData();\n\t\t\t\t\t\t\tif (typeof params.views === 'undefined') {\n\t\t\t\t\t\t\t\tparams.views = form.find('[name=\"views\"]').val();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tapp.saveAjax('contextHelp', '', params).done(function(data) {\n\t\t\t\t\t\t\t\tVtiger_Helper_Js.showPnotify({\n\t\t\t\t\t\t\t\t\ttype: 'success',\n\t\t\t\t\t\t\t\t\ttext: app.vtranslate('JS_SAVE_CHANGES')\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\tlet prefix = form.find('.js-lang').val();\n\t\t\t\t\t\t\t\tlet textArea = form.find('#' + prefix + '.js-context-area');\n\t\t\t\t\t\t\t\tform.find('.js-help-info').attr('data-content', textArea.val());\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t});\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t});\n\t\t},\n\t\t/**\n\t\t * register events for layout editor\n\t\t */\n\t\tregisterEvents: function() {\n\t\t\tvar thisInstance = this;\n\n\t\t\tthisInstance.registerBlockEvents();\n\t\t\tthisInstance.registerFieldEvents();\n\t\t\tthisInstance.setInactiveFieldsList();\n\t\t\tthisInstance.registerAddCustomBlockEvent();\n\n\t\t\tthisInstance.relatedModulesTabClickEvent();\n\t\t\tthisInstance.registerModulesChangeEvent();\n\t\t\tthisInstance.registerRelModulesChangeEvent();\n\n\t\t\tif (1 === $('#relatedTabOrder').length) {\n\t\t\t\tthisInstance.registerRelatedListEvents();\n\t\t\t\tthisInstance.makeRelatedModuleSortable();\n\t\t\t}\n\n\t\t\tthisInstance.registerSwitch();\n\t\t\tthisInstance.registerAddInventoryField();\n\t\t\tthisInstance.registerEditInventoryField();\n\t\t\tthisInstance.registerInventoryFieldSequenceSaveClick();\n\t\t\tthisInstance.registerDeleteInventoryField();\n\t\t},\n\t\tregisterBasicEvents: function() {\n\t\t\tvar container = $('#layoutEditorContainer');\n\n\t\t\tthis.registerEvents();\n\t\t\tthis.registerFieldSequenceSaveClick();\n\t\t\tthis.registerCopyClipboard();\n\t\t\tthis.registerContextHelp(container);\n\t\t}\n\t}\n);\n\n$(document).ready(function() {\n\tvar instance = new Settings_LayoutEditor_Js();\n\tinstance.registerBasicEvents();\n});\n\nVtiger_WholeNumberGreaterThanZero_Validator_Js(\n\t'Vtiger_FloatingDigits_Validator_Js',\n\t{\n\t\t/**\n\t\t *Function which invokes field validation\n\t\t *@param accepts field element as parameter\n\t\t * @return error if validation fails true on success\n\t\t */\n\t\tinvokeValidation: function(field, rules, i, options) {\n\t\t\tvar rangeInstance = new Vtiger_FloatingDigits_Validator_Js();\n\t\t\trangeInstance.setElement(field);\n\t\t\tvar response = rangeInstance.validate();\n\t\t\tif (response != true) {\n\t\t\t\treturn rangeInstance.getError();\n\t\t\t}\n\t\t}\n\t},\n\t{\n\t\t/**\n\t\t * Function to validate the decimals length\n\t\t * @return true if validation is successfull\n\t\t * @return false if validation error occurs\n\t\t */\n\t\tvalidate: function() {\n\t\t\tvar response = this._super();\n\t\t\tif (response != true) {\n\t\t\t\treturn response;\n\t\t\t} else {\n\t\t\t\tvar fieldValue = this.getFieldValue();\n\t\t\t\tif (fieldValue < 2 || fieldValue > 5) {\n\t\t\t\t\tvar errorInfo = app.vtranslate('JS_PLEASE_ENTER_NUMBER_IN_RANGE_2TO5');\n\t\t\t\t\tthis.setError(errorInfo);\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\n\t\t\t\tvar specialChars = /^[+]/;\n\t\t\t\tif (specialChars.test(fieldValue)) {\n\t\t\t\t\tvar error = app.vtranslate('JS_CONTAINS_ILLEGAL_CHARACTERS');\n\t\t\t\t\tthis.setError(error);\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\t}\n);\n\nVtiger_WholeNumberGreaterThanZero_Validator_Js(\n\t'Vtiger_DecimalMaxLength_Validator_Js',\n\t{\n\t\t/**\n\t\t *Function which invokes field validation\n\t\t *@param accepts field element as parameter\n\t\t * @return error if validation fails true on success\n\t\t */\n\t\tinvokeValidation: function(field, rules, i, options) {\n\t\t\tvar rangeInstance = new Vtiger_DecimalMaxLength_Validator_Js();\n\t\t\trangeInstance.setElement(field);\n\t\t\tvar response = rangeInstance.validate();\n\t\t\tif (response != true) {\n\t\t\t\treturn rangeInstance.getError();\n\t\t\t}\n\t\t}\n\t},\n\t{\n\t\t/**\n\t\t * Function to validate the fieldLength\n\t\t * @return true if validation is successfull\n\t\t * @return false if validation error occurs\n\t\t */\n\t\tvalidate: function() {\n\t\t\tvar response = this._super();\n\t\t\tif (response != true) {\n\t\t\t\treturn response;\n\t\t\t} else {\n\t\t\t\tvar fieldValue = this.getFieldValue();\n\t\t\t\tvar decimalFieldValue = $('#createFieldForm')\n\t\t\t\t\t.find('[name=\"decimal\"]')\n\t\t\t\t\t.val();\n\t\t\t\tvar fieldLength = parseInt(64) - parseInt(decimalFieldValue);\n\t\t\t\tif (fieldValue > fieldLength && !(fieldLength < 0) && fieldLength >= 59) {\n\t\t\t\t\tvar errorInfo = app.vtranslate('JS_LENGTH_SHOULD_BE_LESS_THAN_EQUAL_TO') + ' ' + fieldLength;\n\t\t\t\t\tthis.setError(errorInfo);\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\n\t\t\t\tvar specialChars = /^[+]/;\n\t\t\t\tif (specialChars.test(fieldValue)) {\n\t\t\t\t\tvar error = app.vtranslate('JS_CONTAINS_ILLEGAL_CHARACTERS');\n\t\t\t\t\tthis.setError(error);\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\t}\n);\n\nVtiger_WholeNumberGreaterThanZero_Validator_Js(\n\t'Vtiger_MaxLength_Validator_Js',\n\t{\n\t\t/**\n\t\t *Function which invokes field validation\n\t\t *@param accepts field element as parameter\n\t\t * @return error if validation fails true on success\n\t\t */\n\t\tinvokeValidation: function(field, rules, i, options) {\n\t\t\tvar rangeInstance = new Vtiger_DecimalMaxLength_Validator_Js();\n\t\t\trangeInstance.setElement(field);\n\t\t\tvar response = rangeInstance.validate();\n\t\t\tif (response != true) {\n\t\t\t\treturn rangeInstance.getError();\n\t\t\t}\n\t\t}\n\t},\n\t{\n\t\t/**\n\t\t * Function to validate the fieldLength\n\t\t * @return true if validation is successfull\n\t\t * @return false if validation error occurs\n\t\t */\n\t\tvalidate: function() {\n\t\t\tvar response = this._super();\n\t\t\tif (response != true) {\n\t\t\t\treturn response;\n\t\t\t} else {\n\t\t\t\tvar fieldValue = this.getFieldValue();\n\t\t\t\tif (fieldValue > 255) {\n\t\t\t\t\tvar errorInfo = app.vtranslate('JS_LENGTH_SHOULD_BE_LESS_THAN_EQUAL_TO') + ' 255';\n\t\t\t\t\tthis.setError(errorInfo);\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\n\t\t\t\tvar specialChars = /^[+]/;\n\t\t\t\tif (specialChars.test(fieldValue)) {\n\t\t\t\t\tvar error = app.vtranslate('JS_CONTAINS_ILLEGAL_CHARACTERS');\n\t\t\t\t\tthis.setError(error);\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\t}\n);\n\nVtiger_Base_Validator_Js(\n\t'Vtiger_FieldLabel_Validator_Js',\n\t{\n\t\t/**\n\t\t *Function which invokes field validation\n\t\t *@param accepts field element as parameter\n\t\t * @return error if validation fails true on success\n\t\t */\n\t\tinvokeValidation: function(field, rules, i, options) {\n\t\t\tvar instance = new Vtiger_FieldLabel_Validator_Js();\n\t\t\tinstance.setElement(field);\n\t\t\tvar response = instance.validate();\n\t\t\tif (response != true) {\n\t\t\t\treturn instance.getError();\n\t\t\t}\n\t\t}\n\t},\n\t{\n\t\t/**\n\t\t * Function to validate the field label\n\t\t * @return true if validation is successfull\n\t\t * @return false if validation error occurs\n\t\t */\n\t\tvalidate: function() {\n\t\t\tvar fieldValue = this.getFieldValue();\n\t\t\treturn this.validateValue(fieldValue);\n\t\t},\n\t\tvalidateValue: function(fieldValue) {\n\t\t\tvar specialChars = /[&\\<\\>\\:\\'\\\"\\,]/;\n\n\t\t\tif (specialChars.test(fieldValue)) {\n\t\t\t\tvar errorInfo = app.vtranslate('JS_SPECIAL_CHARACTERS') + ' & < > \\' \" : , ' + app.vtranslate('JS_NOT_ALLOWED');\n\t\t\t\tthis.setError(errorInfo);\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\treturn true;\n\t\t}\n\t}\n);\n\nVtiger_Base_Validator_Js(\n\t'Vtiger_PicklistFieldValues_Validator_Js',\n\t{\n\t\t/**\n\t\t *Function which invokes field validation\n\t\t *@param accepts field element as parameter\n\t\t * @return error if validation fails true on success\n\t\t */\n\t\tinvokeValidation: function(field, rules, i, options) {\n\t\t\tlet instance = new Vtiger_PicklistFieldValues_Validator_Js();\n\t\t\tinstance.setElement(field);\n\t\t\tlet response = instance.validate();\n\t\t\tif (response != true) {\n\t\t\t\treturn instance.getError();\n\t\t\t}\n\t\t}\n\t},\n\t{\n\t\t/**\n\t\t * Function to validate the field label\n\t\t * @return true if validation is successfull\n\t\t * @return false if validation error occurs\n\t\t */\n\t\tvalidate: function() {\n\t\t\treturn this.validateValue(this.getElement().val());\n\t\t},\n\t\tvalidateValue: function(fieldValue) {\n\t\t\tlet specialChars = /[\\<\\>\\\"\\,\\#]/;\n\t\t\tlet r = true;\n\t\t\t$.each(fieldValue, (i, val) => {\n\t\t\t\tif (specialChars.test(val)) {\n\t\t\t\t\tthis.setError(app.vtranslate('JS_SPECIAL_CHARACTERS') + ' < > \" , # ' + app.vtranslate('JS_NOT_ALLOWED'));\n\t\t\t\t\tr = false;\n\t\t\t\t}\n\t\t\t});\n\t\t\treturn r;\n\t\t}\n\t}\n);\n"],"names":["$","Class","updatedBlockSequence","reactiveFieldsList","inActiveFieldsList","updatedBlockFieldsList","updatedBlocksList","blockNamesList","setInactiveFieldsList","contents","find","json","length","thisInstance","JSON","parse","val","makeBlocksListSortable","table","sortable","containment","items","revert","tolerance","cursor","update","updateBlockSequence","progressIndicatorElement","progressIndicator","position","blockInfo","enabled","sequence","stringify","updateBlocksListByOrder","params","app","getModuleName","getParentModuleName","AppConnector","request","done","mode","vtranslate","Settings_Vtiger_Index_Js","showMessage","fail","each","index","domElement","blockId","blockTable","data","actualBlockSequence","expectedBlockSequence","registerRelatedListEvents","relatedList","App","Fields","Picklist","showSelect2ElementView","sortableCb","updateSelectedFields","currentTarget","on","e","relatedModule","closest","removeClass","show","hide","changeStatusRelatedModule","removeRelation","changeStateFavorites","value","validationEngine","changeRelatedViewType","container","contentsDiv","addRelationContainer","clone","callBackFunction","not","addClass","serializeFormData","extend","form","getRelModuleLayoutEditor","html","registerEvents","showModalWindow","getSelectedFields","target","selectedFields","push","id","name","makeRelatedModuleSortable","relatedModulesContainer","modulesList","handle","updateSequenceRelatedModule","module","parent","action","relationId","types","success","text","result","type","error","message","status","Vtiger_Helper_Js","showConfirmationBox","remove","modules","makeFieldsListSortable","connectWith","ui","currentField","hasClass","showSaveFieldSequenceButton","getDetailViewLayout","createUpdatedBlocksList","sender","reArrangeBlockFields","olderBlock","getInventoryViewLayout","layout","saveButton","isHidden","isInvisible","hideSaveFieldSequenceButton","block","updatedBlockId","inArray","rightSideContainer","leftSideContainer","children","append","lastElementInRightContainer","lastElementInLeftContainer","createUpdatedBlockFieldsList","updatedBlock","firstBlockSortFields","editFields","expectedFieldSequence","i","fieldId","fieldEle","fieldid","secondEditFields","secondBlockSortFields","sequenceValue","registerFieldSequenceSaveClick","updateFieldSequence","window","location","reload","registerAddCustomFieldEvent","addFieldContainer","width","attr","tags","tokenSeparators","registerFieldTypeChangeEvent","registerMultiReferenceFieldsChangeEvent","registerMultiReferenceFilterFieldChangeEvent","getvalidationEngineOptions","onValidationComplete","valid","fieldTypeValue","fieldNameValue","select2Element","pickListValueElement","pickListValuesArray","pickListValuesArraySize","specialChars","toLowerCase","test","getSelect2ElementFromSelect","map","item","uniqueLowerCasedpickListValuesArray","uniqueSort","lowerCasedpickListValuesArray","uniqueLowerCasedpickListValuesArraySize","serverListElement","addCustomField","hideModalWindow","showCustomField","showPnotify","title","removeAttr","setBlocksListArray","blocksListSelect","ele","label","option","Window","lastModalId","aDeferred","Deferred","modalHeader","smallLoadingImage","imageContainerCss","display","resolve","err","errorObj","responseText","showNotify","reject","promise","lengthInput","lengthValidator","maxLengthValidator","decimalValidator","selectedOption","decimalFieldUi","maxFloatingDigits","decimalInput","pickListUi","pickListOption","loadMultiReferenceFields","relatedBlock","fieldCopy","fieldContainer","prop","registerCopyClipboard","sortable1","length1","sortable2","length2","registerAddCustomBlockEvent","Object","create","validationEngineOptions","formData","saveBlockDetails","displayNewCustomBlock","updateNewSequenceForBlocks","appendNewBlockToBlocksList","preventDefault","addBlockContainer","beforeBlockId","beforeBlock","newBlockCloneCopy","after","sequenceList","hiddenAddBlockModel","removeBlockFromBlocksList","registerBlockVisibilityEvent","updateBlockStatus","blockStatus","registerInactiveFieldsEvent","currentBlock","isEmptyObject","showHiddenFields","createReactivateFieldslist","reActivateHiddenFields","inActiveFieldsContainer","key","inActiveField","element","is","fieldIdList","messageParams","registerDeleteCustomBlockEvent","deleteCustomBlock","removeDeletedBlock","deletedTable","fadeOut","registerDeleteCustomFieldEvent","deleteCustomField","field","registerFieldDetailsChange","quickcreateEle","filter","presenceEle","defaultValueUi","relatedModulesTabClickEvent","relatedContainer","relatedTab","showRelatedTabModulesList","getModuleLayoutEditor","selectedModule","requestPjax","registerModulesChangeEvent","registerRelModulesChangeEvent","lockCheckbox","registerEditFieldDetailsClick","fieldRow","url","cb","modalContainer","registerVaribleToParsers","registerEventForClockPicker","inputmask","sendByAjaxCb","response","fieldLabel","n","currentElement","toggleClass","input","Tree","register","registerBlockEvents","registerFieldEvents","Date","changeSelectElementView","registerSwitch","event","state","switchBtn","className","saveAjax","progress","registerAddInventoryField","showScrollBar","height","registerStep1","registerEditInventoryField","editField","showPopoverElementView","registerStep2","containerInventory","paramsName","sourceModule","edit","liElement","translate","newLiElement","columnName","invtype","registerInventoryFieldSequenceSaveClick","button","ids","registerDeleteInventoryField","fieldName","param","select2","cacheMRVField","cacheMRVFilter","trigger","getAttribute","registerContextHelp","document","toolbar","progressInstance","view","Text","Editor","customConfig","destroyEditor","previous","textArea","views","prefix","registerBasicEvents","ready","instance","Vtiger_WholeNumberGreaterThanZero_Validator_Js","invokeValidation","rangeInstance","setElement","validate","getError","_super","getFieldValue","setError","errorInfo","fieldValue","decimalFieldValue","fieldLength","parseInt","Vtiger_Base_Validator_Js","validateValue","getElement","r"],"mappings":"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"}