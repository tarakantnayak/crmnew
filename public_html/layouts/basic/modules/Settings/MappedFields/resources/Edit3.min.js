'use strict';

Settings_MappedFields_Edit_Js("Settings_MappedFields_Edit3_Js",{},{step3Container:!1,advanceFilterInstance:!1,init:function init(){this.initialize();},getContainer:function getContainer(){return this.step3Container},setContainer:function setContainer(element){return this.step3Container=element,this},initialize:function initialize(container){"undefined"==typeof container&&(container=jQuery("#mf_step3")),container.is("#mf_step3")?this.setContainer(container):this.setContainer(jQuery("#mf_step3"));},calculateValues:function calculateValues(){var enableFilterElement=jQuery("#enableAdvanceFilters");if(0<enableFilterElement.length&&!1==enableFilterElement.is(":checked"))jQuery("#advanced_filter").val(jQuery("#olderConditions").val());else{jQuery("[name=\"filtersavedinnew\"]").val("6");var advfilterlist=this.advanceFilterInstance.getValues();jQuery("#advanced_filter").val(JSON.stringify(advfilterlist));}},submit:function submit(){var aDeferred=jQuery.Deferred();this.calculateValues();var form=this.getContainer(),formData=form.serializeFormData(),progressIndicatorElement=jQuery.progressIndicator({position:"html",blockInfo:{enabled:!0}}),saveData=form.serializeFormData();return saveData.step=3,delete saveData.__vtrftk,delete saveData.module,delete saveData.view,delete saveData.mode,delete saveData.parent,app.saveAjax("step1",saveData).done(function(data){!0==data.success&&(Settings_Vtiger_Index_Js.showMessage({text:app.vtranslate("JS_MF_SAVED_SUCCESSFULLY")}),AppConnector.request(formData).done(function(data){form.hide(),progressIndicatorElement.progressIndicator({mode:"hide"}),aDeferred.resolve(data);}).fail(function(error,err){app.errorLog(error,err);}));}),aDeferred.promise()},registerCancelStepClickEvent:function registerCancelStepClickEvent(form){jQuery("button.cancelLink",form).on("click",function(){window.history.back();});},registerEvents:function registerEvents(){var container=this.getContainer(),opts=app.validationEngineOptions;opts.onValidationComplete=function(form,valid){return valid},opts.promptPosition="bottomRight",container.validationEngine(opts),this.registerCancelStepClickEvent(container),this.advanceFilterInstance=Vtiger_AdvanceFilter_Js.getInstance(jQuery("#advanceFilterContainer",container)),App.Fields.Picklist.changeSelectElementView(container);}});
//# sourceMappingURL=Edit3.min.js.map
