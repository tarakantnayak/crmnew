'use strict';

Settings_MappedFields_Edit_Js("Settings_MappedFields_Edit1_Js",{},{init:function init(){this.initialize();},getContainer:function getContainer(){return this.step1Container},setContainer:function setContainer(element){return this.step1Container=element,this},initialize:function initialize(container){"undefined"==typeof container&&(container=jQuery("#mf_step1")),container.is("#mf_step1")?this.setContainer(container):this.setContainer(jQuery("#mf_step1"));},submit:function submit(){var aDeferred=jQuery.Deferred(),form=this.getContainer(),formData=form.serializeFormData();formData.async=!1;var saveData=form.serializeFormData();if(delete saveData.__vtrftk,delete saveData.module,delete saveData.view,delete saveData.mode,delete saveData.parent,saveData.step=1,this.checkModulesName()){var progressIndicatorElement=jQuery.progressIndicator({position:"html",blockInfo:{enabled:!0}});app.saveAjax("step1",saveData).done(function(data){if(!0===data.success){if(!data.result.id&&data.result.message)return Settings_Vtiger_Index_Js.showMessage({text:data.result.message,type:"error"}),aDeferred.resolve(!1),progressIndicatorElement.progressIndicator({mode:"hide"}),!1;Settings_Vtiger_Index_Js.showMessage({text:app.vtranslate("JS_MF_SAVED_SUCCESSFULLY")});var mfRecordElement=jQuery("[name=\"record\"]",form);""===mfRecordElement.val()&&(mfRecordElement.val(data.result.id),formData.record=data.result.id),formData.record=data.result.id,AppConnector.request(formData).done(function(data){form.hide(),progressIndicatorElement.progressIndicator({mode:"hide"}),aDeferred.resolve(data);});}});}return aDeferred.promise()},registerCancelStepClickEvent:function registerCancelStepClickEvent(form){jQuery("button.cancelLink",form).on("click",function(){window.history.back();});},checkModulesName:function checkModulesName(){var sourceModule=jQuery("[name=\"tabid\"]").val(),targetModule=jQuery("[name=\"reltabid\"]").val();if(sourceModule===targetModule){var notificationParams={text:app.vtranslate("JS_YOU_CAN_NOT_SELECT_THE_SAME_MODULES"),type:"error"};return Settings_Vtiger_Index_Js.showMessage(notificationParams),!1}return !0},registerEvents:function registerEvents(){var container=this.getContainer();container.find("[type=\"submit\"]").removeAttr("disabled");var opts=app.validationEngineOptions;opts.onValidationComplete=function(form,valid){return valid},opts.promptPosition="bottomRight",container.validationEngine(opts),this.registerCancelStepClickEvent(container);}});
//# sourceMappingURL=Edit1.min.js.map
