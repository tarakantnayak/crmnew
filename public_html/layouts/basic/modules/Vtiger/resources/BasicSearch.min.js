'use strict';

jQuery.Class('Vtiger_BasicSearch_Js',{},{searchModule:!1,currentSearchModule:!1,reduceNumberResults:!1,returnHtml:!0,mainContainer:!1,getSearchModule:function getSearchModule(){if(!1===this.searchModule){var module=app.getModuleName();'undefined'!=typeof this.getCurrentSearchModule()&&(module=this.getCurrentSearchModule()),this.setSearchModule(module);}return this.searchModule},setSearchModule:function setSearchModule(moduleName){return this.searchModule=moduleName,this},setMainContainer:function setMainContainer(container){return this.mainContainer=container,this},getCurrentSearchModule:function getCurrentSearchModule(){return !1===this.currentSearchModule&&this.mainContainer&&(this.currentSearchModule=this.mainContainer.find('.basicSearchModulesList').val()),this.currentSearchModule},_search:function _search(params){var aDeferred=jQuery.Deferred();if('undefined'==typeof params&&(params={}),params.module=params.searchModule&&'-'!==params.searchModule?params.searchModule:app.getModuleName(),params.view='BasicAjax',params.mode='showSearchResults',params.limit=this.reduceNumberResults,params.html=this.returnHtml,app.getParentModuleName()&&(params.parent=app.getParentModuleName()),params.operator=CONFIG.globalSearchDefaultOperator,this.mainContainer){var operatorElement=this.mainContainer.find('.js-global-search-operator .active[data-operator]');operatorElement.length&&''!=operatorElement.data('operator')&&(params.operator=operatorElement.data('operator'));}return AppConnector.request(params).done(function(data){aDeferred.resolve(data);}).fail(function(error){aDeferred.reject(error);}),aDeferred.promise()},search:function search(value){var searchModule=this.getCurrentSearchModule(),params={};return params.value=value,'undefined'!=typeof searchModule&&!1!==searchModule?params.searchModule=searchModule:this.searchModule&&(params.searchModule=this.searchModule),this._search(params)},showSearchResults:function showSearchResults(data){var aDeferred=jQuery.Deferred(),params={};return params.data=data,params.cb=function postLoad(data){aDeferred.resolve(data);},app.showModalWindow(params),aDeferred.promise()}});
//# sourceMappingURL=BasicSearch.min.js.map
